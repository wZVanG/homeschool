<div class="padding-out---">
	<div class="p-h-md p-v bg-white box-shadow pos-rlt">
		<h3 class="no-margin">Configuración General - Administrador</h3>
	</div>

	<div class="box">
		<div class="col-md-3">
			<div style="background:url('./assets/images/logo/favicon/android-chrome-512x512.png') center center; background-size:cover">
				<div class="p-lg bg-white-overlay text-center">
					<a href class="w-xs inline">
						<img ng-src="{{'./assets/images/logo/favicon/android-chrome-512x512.png'}}" class="img-circle img-responsive avatar">
					</a>
					<div class="m-b m-t-sm h2">
						<span class="text-black" ng-bind="Info.institucion.nombre_corto"></span>
					</div>
					<p>
						{{Info.institucion.nombre}}
					</p>
				</div>
			</div>
			<ul class="nav nav-lists b-t" ui-nav>
				<li md-colors="{'background-color': tab_active === 'institucion' ? 'primary-400' : 'background'}">
					<a href ng-click="tab_active = 'institucion'"><md-icon>language</md-icon> Principal</a>
                </li>
                <li md-colors="{'background-color': tab_active === 'externo' ? 'primary-400' : 'background'}">
					<a href ng-click="tab_active = 'externo'"><md-icon>launch</md-icon> Sistema</a>
				</li><!--
				<li md-colors="{'background-color': tab_active === 'video_principal' ? 'primary-400' : 'background'}">
					<a href ng-click="tab_active = 'video_principal'"><md-icon>movie_filter</md-icon> Video Principal</a>
				</li>

				<li md-colors="{'background-color': tab_active === 'contacto' ? 'primary-400' : 'background'}">
					<a href ng-click="tab_active = 'contacto'"><md-icon>mail</md-icon> Social / Contacto</a>
				</li>

				<li md-colors="{'background-color': tab_active === 'payment' ? 'primary-400' : 'background'}">
					<a href ng-click="tab_active = 'payment'"><md-icon>check</md-icon> Configuración pagos</a>
				</li>-->
            </ul>

        </div>

        <div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'institucion'">
			<div class="p-md bg-light lt b-b font-bold md-title">Institución</div>

			<div layout="column" layout-padding>

				<div flex="100">

					<form name="formulario" ng-submit="guardar('institucion', 'general')" novalidate class="mt-20">
						<div layout="column">
                            
                            <md-input-container flex="100">
								<label>Título</label>
                                <md-icon>short_text</md-icon>
                                <input type="text" ng-model="registro_info.institucion.nombre" />
                            </md-input-container>
                            
                            <md-input-container flex="100">
								<label>Nombre corto</label>
                                <md-icon>short_text</md-icon>
                                <input type="text" ng-model="registro_info.institucion.nombre_corto" />
                            </md-input-container>
                            
                            <!--<md-input-container flex="100">
								<label>Título sistema</label>
                                <md-icon>short_text</md-icon>
                                <input type="text" ng-model="registro_info.institucion.titulo_sistema" />
							</md-input-container>-->

							<md-input-container flex="100">
								<label>Descripción</label>
								<md-icon>short_text</md-icon>
								<textarea ng-model="registro_info.institucion.description" rows="3"></textarea>
							</md-input-container>

							<md-input-container flex="100">
								<label>Palabras clave buscadores</label>
								<md-icon>short_text</md-icon>
								<textarea ng-model="registro_info.institucion.keywords" rows="3"></textarea>
							</md-input-container>

						
							<div>
								<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario.$valid || loading">
									Guardar
									cambios</md-button>
							</div>
						</div>
					</form>
				</div>
			</div>

		</div>

        
		<div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'externo'">
			
			<div layout="column" layout-padding>

				<div flex="100">

					<form name="formulario" ng-submit="guardar('configuracion', 'externo')" novalidate class="chipsdemoContactChips mt-20">

						<div class="p-md bg-light lt b-b font-bold md-title" >Sistema</div>

						<div layout="column" class="autocomplete"  style="padding-top: 25px;">

							
							<md-input-container flex="100">
								<label>E-mail matrículas</label>
								<md-icon>mail</md-icon>
								<input type="text" name="email_matriculas" ng-model="registro_info.configuracion.externo.email_matriculas" />
							</md-input-container>

						</div>

												
						<div>
							<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario.$valid || loading">
								Guardar
								cambios</md-button>
						</div>

					</form>
				</div>
			</div>

		</div>

		<div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'contacto'">
			
			<div layout="column" layout-padding>

				<div flex="100">

					<form name="formulario" ng-submit="guardar('configuracion', 'externo')" novalidate class="chipsdemoContactChips mt-20">
						
						<div class="p-md bg-light lt b-b font-bold md-title" >Contacto</div>

						<div layout="column" class="autocomplete"  style="padding-top: 25px;">
							<md-input-container flex="100">
								<label>Teléfono</label>
                                <md-icon>short_text</md-icon>
                                <input type="text" name="externo_telefono" ng-model="registro_info.configuracion.externo.telefono" />
							</md-input-container>
							<md-input-container flex="100">
								<label>E-mail</label>
                                <md-icon>mail</md-icon>
                                <input type="text" name="externo_email" ng-model="registro_info.configuracion.externo.email" />
							</md-input-container>
							<md-input-container flex="100">
								<label>WhatsApp</label>
                                <md-icon>check</md-icon>
                                <input type="text" name="externo_whatsapp" ng-model="registro_info.configuracion.externo.whatsapp" />
							</md-input-container>
						</div>

						<div class="p-md bg-light lt b-b font-bold md-title" >Social</div>

						<div layout="column" class="autocomplete"  style="padding-top: 25px;">

						
							<md-input-container flex="100">
								<label>Social Links</label>
								<md-icon>check</md-icon>
								<textarea name="externo_social" ng-model="registro_info.configuracion.externo.externo_social" rows="8"></textarea>
								<div class="hint">Separados por nueva <b>línea</b></div>
							</md-input-container>
	
						</div>

												
						<div>
							<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario.$valid || loading">
								Guardar
								cambios</md-button>
						</div>

					</form>
				</div>
			</div>

		</div>

		<div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'video_principal'">
			
			<div layout="column" layout-padding>

				<div flex="100">

					<form name="formulario" ng-submit="guardar('configuracion', 'externo')" novalidate class="chipsdemoContactChips mt-20">
						
						<div class="p-md bg-light lt b-b font-bold md-title" >Video</div>

						<div layout="column" class="autocomplete"  style="padding-top: 25px;">
							<md-input-container flex="100">
								<label>URL Video Principal</label>
                                <md-icon>link</md-icon>
                                <input type="text" ng-model="registro_info.configuracion.externo.video_principal_url" />
							</md-input-container>

							<md-input-container flex="100">
								<label>Imágen Video Principal</label>
                                <md-icon>image</md-icon>
                                <input type="text" ng-model="registro_info.configuracion.externo.video_principal_image" />
							</md-input-container>
						
						</div>
											
						<div>
							<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario.$valid || loading">
								Guardar
								cambios</md-button>
						</div>

					</form>
				</div>
			</div>

		</div>

		<div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'payment'">
			
			<div layout="column" layout-padding>

				<div flex="100">

					<form name="formulario" ng-submit="guardar('configuracion', 'payment')" novalidate class=" mt-20">
						
						<div class="p-md bg-light lt b-b font-bold md-title" >Configuración Pagos</div>

						<div layout="column" class="autocomplete"  style="padding-top: 25px;">
							<md-input-container flex="100">
								<label>Culqi Secret Key</label>
                                <md-icon>code</md-icon>
                                <input type="text" ng-model="registro_info.configuracion.payment.culqi_secret_key" />
							</md-input-container>

							<md-input-container flex="100">
								<label>Culqi Public Key</label>
                                <md-icon>code</md-icon>
                                <input type="text" ng-model="registro_info.configuracion.payment.culqi_public_key" />
							</md-input-container>
						
						</div>
											
						<div>
							<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario.$valid || loading">
								Guardar
								cambios</md-button>
						</div>

					</form>
				</div>
			</div>

		</div>

		<div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'video_principal_upload'">
			<div class="p-md bg-light lt b-b font-bold md-title">Video Prinipal</div>

			<div layout="column" layout-padding>
	
				<div flex="100">
					<form name="formulario" ng-submit="guardar('firma')" novalidate class="mt-20">
						<div layout="column">
							<div layout="column" layout-padding nv-file-drop="" uploader="uploaders[1]" filters="queueLimit, customFilter">
								<md-input-container flex="70">
									<md-icon>attach_file</md-icon>
									<input type="file" id="archivo_1"
										onchange="var el = this; setTimeout(function(){angular.element(el).scope().uploaders[1].queue[0].upload()},100)"
										ng-disabled="false" nv-file-select="" uploader="uploaders[1]" />
									<div class="hint"><span ng-if="usuario_info.archivo_1"><a md-colors="{'color': 'accent-500'}" download="" target="_blank" href="./uploads/firmas/{{usuario_info.archivo_1}}"><md-icon>save_alt</md-icon> Descargar</a></span> Archivo <b>.cer</b> </div>
								</md-input-container>	
								<div ng-if="uploaders[1].queue.length">
									<md-progress-linear class="md-accent" md-mode="buffer" value="uploaders[1].queue[0].progress"
										md-buffer-value="{{uploaders[1].queue[0].progress}}" ng-disabled="!uploaders[1].queue.length">
									</md-progress-linear>
								</div>

								<div ng-if="WAI.usuario.firma">
									<pre>{{WAI.usuario.firma | json}}</pre>
								</div>
							</div>

							<div layout="column" layout-padding nv-file-drop="" uploader="uploaders[2]" filters="queueLimit, customFilter">
								<md-input-container flex="70">
									<md-icon>attach_file</md-icon>
									<input type="file" id="archivo_2"
										onchange="var el = this; setTimeout(function(){angular.element(el).scope().uploaders[2].queue[0].upload()},100)"
										ng-disabled="false" nv-file-select="" uploader="uploaders[2]" />
									<div class="hint"><span ng-if="usuario_info.archivo_2"><a md-colors="{'color': 'accent-500'}" download="" target="_blank" href="./uploads/firmas/{{usuario_info.archivo_2}}"><md-icon>save_alt</md-icon> Descargar</a></span> Archivo <b>.key</b> </div>
								</md-input-container>	
								<div ng-if="uploaders[2].queue.length">
									<md-progress-linear class="md-accent" md-mode="buffer" value="uploaders[2].queue[0].progress"
										md-buffer-value="{{uploaders[2].queue[0].progress}}" ng-disabled="!uploaders[2].queue.length">
									</md-progress-linear>
								</div>
							</div>
							
							<md-input-container flex="100">
								<label>Clave pública</label>
								<md-icon>vpn_key</md-icon>
								<input type="text" autocomplete="off" class="form-control" ng-model="usuario_info.clave_publica">
							</md-input-container>	
							<div>
								<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario.$valid || loading || subiendo[1] || subiendo[2]">
									Guardar
									cambios</md-button>
							</div>
						</div>
					</form>
				</div>
			</div>

		</div>

		<div class="col-md-9 b-l bg-white bg-auto" ng-if="tab_active === 'password'">
			<div class="p-md bg-light lt b-b font-bold md-title">Editar contraseña</div>

			<div layout="column" layout-padding>
				<div flex="100">
					<form name="formulario_password" ng-submit="guardar('password')" novalidate class="mt-20">
						<div layout="column">
							<md-input-container flex="100">
								<label>Contraseña actual</label>
								<md-icon>security</md-icon>
								<input type="password" name="old_password" required autocomplete="off" class="form-control" ng-model="usuario_password.old_password">
							</md-input-container>
							<md-input-container flex="100">
								<label>Nueva contraseña</label>
								<md-icon>security</md-icon>
								<input type="password" name="new_password" ng-minlength="6" required autocomplete="off" class="form-control" ng-model="usuario_password.new_password">
							</md-input-container>
							<md-input-container flex="100">
								<label>Repetir Nueva contraseña</label>
								<md-icon>security</md-icon>
								<input type="password" name="re_new_password" ng-minlength="6" required autocomplete="off" class="form-control" ng-model="usuario_password.re_new_password">
							</md-input-container>
							<div>
								<md-button class="md-primary md-raised" type="submit" ng-disabled="!formulario_password.$valid || loading || usuario_password.new_password != usuario_password.re_new_password || usuario_password.old_password === usuario_password.new_password">
									Guardar
									cambios</md-button>
							</div>
						</div>
					</form>
				</div>
			</div>

		</div>
	</div>
</div>