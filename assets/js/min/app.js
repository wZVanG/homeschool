angular.module("app",["ngAnimate","ngAria","ngCookies","uiGmapgoogle-maps","ngFileUpload","angularMoment","ngMessages","ngResource","ngSanitize","ngMaterial","ngStorage","ngStore","ui.router","ui.utils","ui.bootstrap","ui.load","ui.jp","pascalprecht.translate","oc.lazyLoad","angular-loading-bar","angularFileUpload"]),angular.module("app").controller("AppCtrl",["$scope","$translate","$localStorage","$window","$document","$location","$rootScope","$timeout","$mdSidenav","$mdColorPalette","$anchorScroll",function(e,t,a,o,n,i,r,s,l,c,d){function u(e){var t=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");return isNaN(e)?"00":t[(e-e%16)/16]+t[e%16]}(!!navigator.userAgent.match(/MSIE/i)||!!navigator.userAgent.match(/Trident.*rv:11\./))&&angular.element(o.document.body).addClass("ie"),function(e){var t=e.navigator.userAgent||e.navigator.vendor||e.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(t)}(o)&&angular.element(o.document.body).addClass("smart"),e.app={name:"APP",version:"1.0.0",color:{primary:"#3a5cff",info:"#2196f3",success:"#4caf50",warning:"#ffc107",danger:"#f44336",accent:"#7e57c2",white:"#ffffff",light:"#f1f2f3",dark:"#475069"},setting:{theme:{primary:"indigo",accent:"purple",warn:"amber"},asideFolded:!1},search:{content:"",show:!1}},e.setTheme=function(t){e.app.setting.theme=t},angular.isDefined(a.appSetting)?e.app.setting=a.appSetting:a.appSetting=e.app.setting,e.$watch("app.setting",function(){a.appSetting=e.app.setting},!0),e.langs={en:"English",zh_CN:"ä¸­æ–‡"},e.selectLang=e.langs[t.proposedLanguage()]||"English",e.setLang=function(a){e.selectLang=e.langs[a],t.use(a)},e.getColor=function(t,a){return"bg-dark"==t||"bg-white"==t?e.app.color[t.substr(3,t.length)]:function(e){return"#"+u(e[0])+u(e[1])+u(e[2])}(c[t][a].value)},r.$on("$stateChangeSuccess",function(){e.app.search.content="",e.app.search.show=!1,e.closeAside(),i.hash("view"),d(),i.hash("")}),e.goBack=function(){o.history.back()},e.openAside=function(){s(function(){l("aside").open()})},e.closeAside=function(){s(function(){n.find("#aside").length&&l("aside").close()})}}]);var app=angular.module("app").config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,a,o){app.controller=e.register,app.directive=t.directive,app.filter=a.register,app.factory=o.factory,app.service=o.service,app.constant=o.constant,app.value=o.value}]).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"assets/js/i18n/",suffix:".js"}),e.preferredLanguage("en"),e.useLocalStorage()}]);angular.module("app").constant("MODULE_CONFIG",[{name:"ui.select",module:!0,files:["./assets/js/libs/angular/angular-ui-select/dist/select.min.js","./assets/js/libs/angular/angular-ui-select/dist/select.min.css"]},{name:"textAngular",module:!0,files:["./assets/js/libs/angular/textAngular/dist/textAngular-sanitize.min.js","./assets/js/libs/angular/textAngular/dist/textAngular.min.js"]},{name:"vr.directives.slider",module:!0,files:["./assets/js/libs/angular/venturocket-angular-slider/build/angular-slider.min.js","./assets/js/libs/angular/venturocket-angular-slider/angular-slider.css"]},{name:"angularBootstrapNavTree",module:!0,files:["./assets/js/libs/angular/angular-bootstrap-nav-tree/dist/abn_tree_directive.js","./assets/js/libs/angular/angular-bootstrap-nav-tree/dist/abn_tree.css"]},{name:"angularFileUpload",module:!0,files:["./assets/js/libs/angular/angular-file-upload/angular-file-upload.js"]},{name:"ngImgCrop",module:!0,files:["./assets/js/libs/angular/ngImgCrop/compile/minified/ng-img-crop.js","./assets/js/libs/angular/ngImgCrop/compile/minified/ng-img-crop.css"]},{name:"smart-table",module:!0,files:["./assets/js/libs/angular/angular-smart-table/dist/smart-table.min.js"]},{name:"ui.map",module:!0,files:["./assets/js/libs/angular/angular-ui-map/ui-map.js"]},{name:"ngGrid",module:!0,files:["./assets/js/libs/angular/ng-grid/build/ng-grid.min.js","./assets/js/libs/angular/ng-grid/ng-grid.min.css","./assets/js/libs/angular/ng-grid/ng-grid.bootstrap.css"]},{name:"ui.grid",module:!0,files:["./assets/js/libs/angular/angular-ui-grid/ui-grid.min.js","./assets/js/libs/angular/angular-ui-grid/ui-grid.min.css","./assets/js/libs/angular/angular-ui-grid/ui-grid.bootstrap.css"]},{name:"xeditable",module:!0,files:["./assets/js/libs/angular/angular-xeditable/dist/js/xeditable.min.js","./assets/js/libs/angular/angular-xeditable/dist/css/xeditable.css"]},{name:"smart-table",module:!0,files:["./assets/js/libs/angular/angular-smart-table/dist/smart-table.min.js"]},{name:"dataTable",module:!1,files:[]},{name:"footable",module:!1,files:["./assets/js/libs/jquery/footable/dist/footable.all.min.js","./assets/js/libs/jquery/footable/css/footable.core.css"]},{name:"easyPieChart",module:!1,files:["./assets/js/libs/jquery/jquery.easy-pie-chart/dist/jquery.easypiechart.fill.js"]},{name:"sparkline",module:!1,files:["./assets/js/libs/jquery/jquery.sparkline/dist/jquery.sparkline.retina.js"]},{name:"plot",module:!1,files:["./assets/js/libs/jquery/flot/jquery.flot.js","./assets/js/libs/jquery/flot/jquery.flot.resize.js","./assets/js/libs/jquery/flot/jquery.flot.pie.js","./assets/js/libs/jquery/flot.tooltip/js/jquery.flot.tooltip.min.js","./assets/js/libs/jquery/flot-spline/js/jquery.flot.spline.min.js","./assets/js/libs/jquery/flot.orderbars/js/jquery.flot.orderBars.js"]},{name:"vectorMap",module:!1,files:["./assets/js/libs/jquery/bower-jvectormap/jquery-jvectormap-1.2.2.min.js","./assets/js/libs/jquery/bower-jvectormap/jquery-jvectormap.css","./assets/js/libs/jquery/bower-jvectormap/jquery-jvectormap-world-mill-en.js","./assets/js/libs/jquery/bower-jvectormap/jquery-jvectormap-us-aea-en.js"]},{name:"moment",module:!1,files:["./assets/js/libs/jquery/moment/moment.js"]}]).config(["$ocLazyLoadProvider","MODULE_CONFIG",function(e,t){e.config({debug:!1,events:!1,modules:t})}]),angular.module("app").run(["$rootScope","$state","$stateParams",function(e,t,a){e.$state=t,e.$stateParams=a}]).config(["$stateProvider","$urlRouterProvider","MODULE_CONFIG",function(e,t,a){function o(e,t){return{deps:["$ocLazyLoad","$q",function(o,n){var i=n.defer(),r=!1;return e=angular.isArray(e)?e:e.split(/\s+/),r||(r=i.promise),angular.forEach(e,function(e){r=r.then(function(){return angular.forEach(a,function(t){t.name==e?t.module?name=t.name:name=t.files:name=e}),o.load(name)})}),i.resolve(),t?r.then(function(){return t()}):r}]}}var n=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("layout"),i=n?n+".":"",r="assets/views/layout."+i+"html",s="assets/views/aside."+i+"html",l="assets/views/content."+i+"html";console.log("h>>>",r,s,l),t.otherwise("/prestacash/prestamos/diario"),e.state("app",{abstract:!0,url:"/app",views:{"":{templateUrl:r},aside:{templateUrl:s},content:{templateUrl:l}}}).state("app.dashboard",{url:"/dashboard",templateUrl:"assets/views/pages/dashboard.html",data:{title:"Dashboard",folded:!0},resolve:o(["assets/js/app/controllers/chart.js","assets/js/app/controllers/vectormap.js"])}).state("app.analysis",{url:"/analysis",templateUrl:"assets/views/pages/dashboard.analysis.html",data:{title:"Analysis"},resolve:o(["assets/js/app/controllers/chart.js","assets/js/app/controllers/vectormap.js"])}).state("app.wall",{url:"/wall",templateUrl:"assets/views/pages/dashboard.wall.html",data:{title:"Wall",folded:!0}}).state("app.todo",{url:"/todo",templateUrl:"apps/todo/todo.html",data:{title:"Todo",theme:{primary:"indigo-800"}},controller:"TodoCtrl",resolve:o("apps/todo/todo.js")}).state("app.todo.list",{url:"/{fold}"}).state("app.note",{url:"/note",templateUrl:"apps/note/main.html",data:{theme:{primary:"blue-grey"}}}).state("app.note.list",{url:"/list",templateUrl:"apps/note/list.html",data:{title:"Note"},controller:"NoteCtrl",resolve:o(["apps/note/note.js","moment"])}).state("app.note.item",{url:"/{id}",views:{"":{templateUrl:"apps/note/item.html",controller:"NoteItemCtrl",resolve:o(["apps/note/note.js","moment"])},"navbar@":{templateUrl:"apps/note/navbar.html",controller:"NoteItemCtrl"}},data:{title:"",child:!0}}).state("app.inbox",{url:"/inbox",templateUrl:"apps/inbox/inbox.html",data:{title:"Inbox",folded:!0},resolve:o(["apps/inbox/inbox.js","moment"])}).state("app.inbox.list",{url:"/inbox/{fold}",templateUrl:"apps/inbox/list.html"}).state("app.inbox.detail",{url:"/{id:[0-9]{1,4}}",templateUrl:"apps/inbox/detail.html"}).state("app.inbox.compose",{url:"/compose",templateUrl:"apps/inbox/new.html",resolve:o(["textAngular","ui.select"])}).state("ui",{url:"/ui",abstract:!0,views:{"":{templateUrl:r},aside:{templateUrl:s},content:{templateUrl:l}}}).state("ui.component",{url:"/component",abstract:!0,template:"<div ui-view></div>"}).state("ui.component.arrow",{url:"/arrow",templateUrl:"assets/views/ui/component/arrow.html",data:{title:"Arrows"}}).state("ui.component.badge-label",{url:"/badge-label",templateUrl:"assets/views/ui/component/badge-label.html",data:{title:"Badges & Labels"}}).state("ui.component.button",{url:"/button",templateUrl:"assets/views/ui/component/button.html",data:{title:"Buttons"}}).state("ui.component.color",{url:"/color",templateUrl:"assets/views/ui/component/color.html",data:{title:"Colors"}}).state("ui.component.grid",{url:"/grid",templateUrl:"assets/views/ui/component/grid.html",data:{title:"Grids"}}).state("ui.component.icon",{url:"/icons",templateUrl:"assets/views/ui/component/icon.html",data:{title:"Icons"}}).state("ui.component.list",{url:"/list",templateUrl:"assets/views/ui/component/list.html",data:{title:"Lists"}}).state("ui.component.nav",{url:"/nav",templateUrl:"assets/views/ui/component/nav.html",data:{title:"Navs"}}).state("ui.component.progressbar",{url:"/progressbar",templateUrl:"assets/views/ui/component/progressbar.html",data:{title:"Progressbars"}}).state("ui.component.streamline",{url:"/streamline",templateUrl:"assets/views/ui/component/streamline.html",data:{title:"Streamlines"}}).state("ui.component.timeline",{url:"/timeline",templateUrl:"assets/views/ui/component/timeline.html",data:{title:"Timelines"}}).state("ui.component.uibootstrap",{url:"/uibootstrap",templateUrl:"assets/views/ui/component/uibootstrap.html",resolve:o("assets/js/app/controllers/bootstrap.js"),data:{title:"UI Bootstrap"}}).state("ui.material",{url:"/material",template:"<div ui-view></div>",resolve:o("assets/js/app/controllers/material.js")}).state("ui.material.button",{url:"/button",templateUrl:"assets/views/ui/material/button.html",data:{title:"Buttons"}}).state("ui.material.color",{url:"/color",templateUrl:"assets/views/ui/material/color.html",data:{title:"Colors"}}).state("ui.material.icon",{url:"/icon",templateUrl:"assets/views/ui/material/icon.html",data:{title:"Icons"}}).state("ui.material.card",{url:"/card",templateUrl:"assets/views/ui/material/card.html",data:{title:"Card"}}).state("ui.material.form",{url:"/form",templateUrl:"assets/views/ui/material/form.html",data:{title:"Form"}}).state("ui.material.list",{url:"/list",templateUrl:"assets/views/ui/material/list.html",data:{title:"List"}}).state("ui.material.ngmaterial",{url:"/ngmaterial",templateUrl:"assets/views/ui/material/ngmaterial.html",data:{title:"NG Material"}}).state("ui.form",{url:"/form",template:"<div ui-view></div>"}).state("ui.form.layout",{url:"/layout",templateUrl:"assets/views/ui/form/layout.html",data:{title:"Layouts"}}).state("ui.form.element",{url:"/element",templateUrl:"assets/views/ui/form/element.html",data:{title:"Elements"}}).state("ui.form.validation",{url:"/validation",templateUrl:"assets/views/ui/form/validation.html",data:{title:"Validations"}}).state("ui.form.select",{url:"/select",templateUrl:"assets/views/ui/form/select.html",data:{title:"Selects"},controller:"SelectCtrl",resolve:o(["ui.select","assets/js/app/controllers/select.js"])}).state("ui.form.editor",{url:"/editor",templateUrl:"assets/views/ui/form/editor.html",data:{title:"Editor"},controller:"EditorCtrl",resolve:o(["textAngular","assets/js/app/controllers/editor.js"])}).state("ui.form.slider",{url:"/slider",templateUrl:"assets/views/ui/form/slider.html",data:{title:"Slider"},controller:"SliderCtrl",resolve:o("assets/js/app/controllers/slider.js")}).state("ui.form.tree",{url:"/tree",templateUrl:"assets/views/ui/form/tree.html",data:{title:"Tree"},controller:"TreeCtrl",resolve:o("assets/js/app/controllers/tree.js")}).state("ui.form.file-upload",{url:"/file-upload",templateUrl:"assets/views/ui/form/file-upload.html",data:{title:"File upload"},controller:"UploadCtrl",resolve:o(["angularFileUpload","assets/js/app/controllers/upload.js"])}).state("ui.form.image-crop",{url:"/image-crop",templateUrl:"assets/views/ui/form/image-crop.html",data:{title:"Image Crop"},controller:"ImgCropCtrl",resolve:o(["ngImgCrop","assets/js/app/controllers/imgcrop.js"])}).state("ui.form.editable",{url:"/editable",templateUrl:"assets/views/ui/form/xeditable.html",data:{title:"Xeditable"},controller:"XeditableCtrl",resolve:o(["xeditable","assets/js/app/controllers/xeditable.js"])}).state("ui.table",{url:"/table",template:"<div ui-view></div>"}).state("ui.table.static",{url:"/static",templateUrl:"assets/views/ui/table/static.html",data:{title:"Static",theme:{primary:"blue"}}}).state("ui.table.smart",{url:"/smart",templateUrl:"assets/views/ui/table/smart.html",data:{title:"Smart"},controller:"TableCtrl",resolve:o(["smart-table","assets/js/app/controllers/table.js"])}).state("ui.table.datatable",{url:"/datatable",data:{title:"Datatable"},templateUrl:"assets/views/ui/table/datatable.html"}).state("ui.table.footable",{url:"/footable",data:{title:"Footable"},templateUrl:"assets/views/ui/table/footable.html"}).state("ui.table.nggrid",{url:"/nggrid",templateUrl:"assets/views/ui/table/nggrid.html",data:{title:"NG Grid"},controller:"NGGridCtrl",resolve:o(["ngGrid","assets/js/app/controllers/nggrid.js"])}).state("ui.table.uigrid",{url:"/uigrid",templateUrl:"assets/views/ui/table/uigrid.html",data:{title:"UI Grid"},controller:"UiGridCtrl",resolve:o(["ui.grid","assets/js/app/controllers/uigrid.js"])}).state("ui.table.editable",{url:"/editable",templateUrl:"assets/views/ui/table/editable.html",data:{title:"Editable"},controller:"XeditableCtrl",resolve:o(["xeditable","assets/js/app/controllers/xeditable.js"])}).state("ui.chart",{url:"/chart",templateUrl:"assets/views/ui/chart/chart.html",data:{title:"Charts"},resolve:o("assets/js/app/controllers/chart.js")}).state("ui.map",{url:"/map",template:"<div ui-view></div>"}).state("ui.map.google",{url:"/google",templateUrl:"assets/views/ui/map/google.html",data:{title:"Gmap"},controller:"GoogleMapCtrl",resolve:o(["ui.map","assets/js/app/controllers/load-google-maps.js","assets/js/app/controllers/googlemap.js"],function(){return loadGoogleMaps()})}).state("ui.map.vector",{url:"/vector",templateUrl:"assets/views/ui/map/vector.html",data:{title:"Vector"},controller:"VectorMapCtrl",resolve:o("assets/js/app/controllers/vectormap.js")}).state("page",{url:"/page",views:{"":{templateUrl:r},aside:{templateUrl:s},content:{templateUrl:l}}}).state("page.profile",{url:"/profile",templateUrl:"assets/views/pages/profile.html",data:{title:"Profile",theme:{primary:"green"}}}).state("page.settings",{url:"/settings",templateUrl:"assets/views/pages/settings.html",data:{title:"Settings"}}).state("page.blank",{url:"/blank",templateUrl:"assets/views/pages/blank.html",data:{title:"Blank"}}).state("page.document",{url:"/document",templateUrl:"assets/views/pages/document.html",data:{title:"Document"}}).state("404",{url:"/404",templateUrl:"assets/views/pages/404.html"}).state("505",{url:"/505",templateUrl:"assets/views/pages/505.html"})}]),angular.module("app").directive("lazyLoad",["MODULE_CONFIG","$ocLazyLoad","$compile",function(e,t,a){return{restrict:"A",compile:function(o,n){var i,r=o.contents().remove();return function(o,n,s){angular.forEach(e,function(e){e.name==s.lazyLoad&&(i=e.module?e.name:e.files)}),t.load(i).then(function(){a(r)(o,function(e,t){n.append(e)})})}}}}]),angular.module("app").directive("uiFullscreen",["$ocLazyLoad","$document",function(e,t){return{restrict:"AC",link:function(a,o,n){o.addClass("hide"),e.load("./assets/js/libs/jquery/screenfull/dist/screenfull.min.js").then(function(){if(screenfull.enabled){o.removeClass("hide"),o.bind("click",function(){var e;n.target&&(e=angular.element(n.target)[0]),screenfull.toggle(e)});var e=angular.element(t[0].body);t.on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?e.addClass("fullscreen"):e.removeClass("fullscreen")})}})}}}]),angular.module("ui.jp",["oc.lazyLoad","ui.load"]).value("uiJpConfig",{}).directive("uiJp",["uiJpConfig","MODULE_CONFIG","uiLoad","$timeout",function(e,t,a,o){return{restrict:"A",compile:function(n,i){var r=e&&e[i.uiJp];return function(e,n,i){function s(){o(function(){var t;$(n)[i.uiJp].apply($(n),(t=[],i.uiOptions?(t=e.$eval("["+i.uiOptions+"]"),angular.isObject(r)&&angular.isObject(t[0])&&(t[0]=angular.extend({},r,t[0]))):r&&(t=[r]),t))},0,!1)}function l(){i.uiRefresh&&e.$watch(i.uiRefresh,function(){s()})}i.ngModel&&n.is("select,input,textarea")&&n.bind("change",function(){n.trigger("input")});var c=!1;angular.forEach(t,function(e){e.name==i.uiJp&&(c=e.files)}),c?a.load(c).then(function(){s(),l()}).catch(function(){}):(s(),l())}}}}]),angular.module("app").directive("uiNav",["$timeout",function(e){return{restrict:"AC",link:function(e,t,a){t.find("a").bind("click",function(e){var t=angular.element(this).parent(),a=t.parent()[0].querySelectorAll(".active");t.toggleClass("active"),angular.element(a).removeClass("active")})}}}]),angular.module("app").directive("uiScroll",["$location","$anchorScroll",function(e,t){return{restrict:"AC",replace:!0,link:function(a,o,n){o.bind("click",function(a){e.hash(n.uiScroll),t()})}}}]),angular.module("app").directive("uiToggleClass",["$timeout","$document",function(e,t){return{restrict:"AC",link:function(e,t,a){t.on("click",function(e){e.preventDefault();var o=a.uiToggleClass.split(","),n=a.target&&a.target.split(",")||Array(t),i=0;angular.forEach(o,function(e){var t=n[n.length&&i];$(t).toggleClass(e),i++}),t.toggleClass("active")})}}}]),angular.module("ngStore",[]).provider("ngStore",[function(){return{$get:["NSModelFactory",function(e){return{model:function(t){return new e(t)}}}]}}]).factory("NSModelFactory",["$log",function(e){function t(e,t){if(!this.localStorage)throw"localStorage: Environment does not support localStorage.";this.name=e,this.serializer=t||{serialize:function(e){return function(e){return e===Object(e)}(e)?JSON.stringify(e):e},deserialize:function(e){return e&&JSON.parse(e)}};var a=this.localStorage().getItem(this.name);this.records=a&&a.split(",")||[]}function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t.prototype={save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||0===e.id||(e.id=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this._itemName(e.id),this.serializer.serialize(e)),this.records.push(e.id.toString()),this.save(),this.find(e)},update:function(e){this.localStorage().setItem(this._itemName(e.id),this.serializer.serialize(e));var t=e.id.toString();return function(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1}(this.records,t)||(this.records.push(t),this.save()),this.find(e)},find:function(e){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(e.id)))},findAll:function(){for(var e,t,a=[],o=0;o<this.records.length;o++)e=this.records[o],null!=(t=this.serializer.deserialize(this.localStorage().getItem(this._itemName(e))))&&a.push(t);return a},destroy:function(e){this.localStorage().removeItem(this._itemName(e.id));for(var t=e.id.toString(),a=0;a<this.records.length;a++)this.records[a]===t&&this.records.splice(a,1);return this.save(),e},nextId:function(){return 0==this.records.length?1:Number(this.records[this.records.length-1])+1},localStorage:function(){return localStorage},_clear:function(){var e=this.localStorage(),t=new RegExp("^"+this.name+"-");for(var a in e.removeItem(this.name),e)t.test(a)&&e.removeItem(a);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(e){return this.name+"-"+e}},t}]),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(e,t,a){var o=[],n=!1,i=t.defer();this.load=function(e){e=angular.isArray(e)?e:e.split(/\s+/);var t=this;return n||(n=i.promise),angular.forEach(e,function(e){n=n.then(function(){return e.indexOf(".css")>=0?t.loadCSS(e):t.loadScript(e)})}),i.resolve(),n},this.loadScript=function(n){if(o[n])return o[n].promise;var i=t.defer(),r=e[0].createElement("script");return r.src=n,r.onload=function(e){a(function(){i.resolve(e)})},r.onerror=function(e){a(function(){i.reject(e)})},e[0].body.appendChild(r),o[n]=i,i.promise},this.loadCSS=function(n){if(o[n])return o[n].promise;var i=t.defer(),r=e[0].createElement("link");return r.rel="stylesheet",r.type="text/css",r.href=n,r.onload=function(e){a(function(){i.resolve(e)})},r.onerror=function(e){a(function(){i.reject(e)})},e[0].head.appendChild(r),o[n]=i,i.promise}}]),angular.module("app").filter("fromNow",function(){return function(e){return moment(e).fromNow()}}),angular.module("app").config(["$stateProvider","$locationProvider","MODULE_CONFIG","$httpProvider","$mdDateLocaleProvider","uiGmapGoogleMapApiProvider",function(e,t,a,o,n,i){i.configure({china:!0}),o.interceptors.push("httpInterceptor"),n.formatDate=function(e){return e?moment(e).format("DD/MM/YYYY"):""};for(var r=[],s=[],l=[],c=0;c<12;c++){var d=moment().month(c);r.push(d.format("MMMM")),s.push(d.format("MMM"))}for(c=0;c<7;c++){d=moment().day(c);l.push(d.format("dd"))}n.firstDayOfWeek=1,n.months=r,n.shortMonths=s,n.shortDays=l,n.parseDate=function(e){var t=moment(e,"DD/MM/YYYY",!0);return t.isValid()?t.toDate():new Date(NaN)},n.isDateComplete=function(e){e=e.trim();return/^(([a-zA-Z]{3,}|[0-9]{1,4})([ .,]+|[/-]))([a-zA-Z]{3,}|[0-9]{1,4})/.test(e)},e.state("sesion",{url:"/sesion",template:'<div class="indigo bg-big" flex layout-fill><div ui-view class="fade-in-down smooth" flex layout-fill></div></div>'}).state("sesion.login",{url:"/login",templateUrl:"assets/views/pages/signin.html",controller:"SesionCtrl"}).state("access.signup",{url:"/signup",templateUrl:"assets/views/pages/signup.html"}).state("access.forgot-password",{url:"/forgot-password",templateUrl:"assets/views/pages/forgot-password.html"}).state("access.lockme",{url:"/lockme",templateUrl:"assets/views/pages/lockme.html"}),e.state("usuario",{url:"/usuario",views:{"":{templateUrl:"assets/views/layout.html"},aside:{templateUrl:"assets/views/aside.html"},content:{templateUrl:"assets/views/content.html"}}}).state("usuario.configuracion",{url:"/configuracion",controller:"UsuarioConfiguracionCtrl",templateUrl:"assets/views/pages/usuario-configuracion.html",data:{title:"Configuración de Usuario"}}),e.state("configuracion",{abstract:!0,url:"/configuracion",data:{roles:["DEF_ADMINISTRADOR"]},views:{"":{templateUrl:"assets/views/layout.html"},aside:{templateUrl:"assets/views/aside.html"},content:{templateUrl:"assets/views/content.html"}}}).state("configuracion.ubicaciones",{url:"/ubicaciones",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Ubicaciones"},controller:"UbicacionesCtrl"}).state("configuracion.tipos_creditos",{url:"/tipos-de-creditos",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Tipos de Créditos"},controller:"TiposCreditosCtrl"}).state("configuracion.cuentas_bancos",{url:"/cuentas-bancos",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Cuentas - Bancos"},controller:"CuentasBancosCtrl"}).state("configuracion.tipos_negocio",{url:"/tipos-de-negocio",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Tipos de Negocio"},controller:"TiposNegocioCtrl"}).state("configuracion.cargos",{url:"/cargos",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Cargos - Denominaciones"},controller:"CargosCtrl"}).state("configuracion.feriados",{url:"/feriados",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Feriados"},controller:"FeriadosCtrl"}).state("configuracion.sedes",{url:"/sedes",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Sedes"},controller:"SedesCtrl"}),e.state("administracion",{abstract:!0,url:"/administracion",data:{roles:["DEF_ADMINISTRADOR"]},views:{"":{templateUrl:"assets/views/layout.html"},aside:{templateUrl:"assets/views/aside.html"},content:{templateUrl:"assets/views/content.html"}}}).state("administracion.clientes",{url:"/clientes",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Clientes"},controller:"ClientesCtrl"}).state("administracion.contenidos",{url:"/contenidos",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Contenidos"},controller:"ContenidosCtrl"}).state("administracion.usuarios",{url:"/usuarios",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Usuarios"},controller:"UsuariosCtrl"}).state("administracion.usuarios_personal",{url:"/usuarios-personal",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Usuarios > Personal"},controller:"UsuariosPersonalCtrl"}).state("administracion.personal",{url:"/personal",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Personal"},controller:"PersonalCtrl"}).state("administracion.personas",{url:"/personas",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Personas"},controller:"PersonasCtrl"}).state("administracion.empresas",{url:"/empresas",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Empresas"},controller:"EmpresasCtrl"}).state("administracion.rutas",{url:"/rutas",templateUrl:"assets/views/pages/varios/listar.html",data:{title:"Rutas"},controller:"RutasCtrl"}),e.state("prestacash",{abstract:!0,url:"/prestacash",views:{"":{templateUrl:"assets/views/layout.html"},aside:{templateUrl:"assets/views/aside.html"},content:{templateUrl:"assets/views/content.html"}},resolve:{Info:[function(){return{}}]}}).state("prestacash.prestamos",{url:"/prestamos",templateUrl:"assets/views/gestion/layout.html",controller:"PrestamosCtrl"}).state("prestacash.prestamos.diario",{url:"/diario",data:{title:"Préstamos",folded:!1},views:{diario:{templateUrl:"assets/views/gestion/diario.html",controller:"PrestamosDiarioCtrl"}},resolve:{Rutas:["API","$q","$http",function(e,t,a){let o=e.url("crud","zona"),n=t.defer();return a.get(o).success(e=>n.resolve(e)),n.promise}]}}).state("prestacash.prestamos.consulta",{url:"/consulta",data:{title:"Consulta PrestaCash"},views:{consulta:{templateUrl:"assets/views/pages/prestacash/prestacash.html",controller:"PrestacashCtrl"}},resolve:{PrestaCash:["API","$q","$http",function(e,t,a){let o=t.defer();return a.get("prestacash?page=info").success(e=>o.resolve(e)),o.promise}],NombreSubmodulo:[()=>"CONSULTA"]}}).state("prestacash.prestamos.cobranza",{url:"/cobranza",url:"/consulta",data:{title:"Cobranza"},views:{cobranza:{templateUrl:"assets/views/pages/prestacash/prestacash.html",controller:"PrestacashCtrl"}},resolve:{PrestaCash:["API","$q","$http",function(e,t,a){let o=t.defer();return a.get("prestacash?page=info").success(e=>o.resolve(e)),o.promise}],NombreSubmodulo:[()=>"COBRANZA"]}})}]).run(["$rootScope","$compile","$http","$templateCache","WAI","WAI_CONSTANTS","Usuario","$state",function(e,t,a,o,n,i,r,s){var l=e.$new();e.WAI=n,e.WAI_CONSTANTS=i;["assets/views/layout.html","assets/views/aside.html","assets/views/content.html","assets/views/partials/aside.nav.uikit.html","assets/views/partials/aside.tpl.user.html","assets/views/gestion/diario.html","assets/views/gestion/diario_nuevo.html","assets/views/gestion/layout.html"].forEach(e=>a.get(e,{cache:o}));moment.locale("es");var c={body:function(e,t,a,o,n){var i=$(o).find(".export-content");return i.length?i.text():$(o).text()}},d=function(e,t,a,o,n){o[0].className.indexOf("buttons-excel")>=0?$.fn.dataTable.ext.buttons.excelHtml5.available(a,n)?$.fn.dataTable.ext.buttons.excelHtml5.action.call(e,t,a,o,n):$.fn.dataTable.ext.buttons.excelFlash.action.call(e,t,a,o,n):o[0].className.indexOf("buttons-pdf")>=0?$.fn.dataTable.ext.buttons.pdfHtml5.action.call(e,t,a,o,n):o[0].className.indexOf("buttons-print")>=0?$.fn.dataTable.ext.buttons.print.action(t,a,o,n):o[0].className.indexOf("buttons-copy")>=0&&$.fn.dataTable.ext.buttons.copyHtml5.action.call(e,t,a,o,n)},u=function(e,t,a,o){var n=this,i=t.settings()[0],r=i._iDisplayStart;if(!!!i.oInit.bServerSide)return d(n,e,t,a,o);t.one("preXhr",function(e,i,s){s.start=0,s.length=-1,t.one("preDraw",function(e,i){return d(n,e,t,a,o),t.one("preXhr",function(e,t,a){i._iDisplayStart=r,a.start=r}),setTimeout(t.ajax.reload,0),!1})}),t.ajax.reload()},m=[{extend:"copy",exportOptions:{columns:".cell-export",format:c},text:'<span title="Copiar página activa"><i class="fa fa-copy"></i> Copiar</span>'},{extend:"print",orientation:"landscape",pageSize:"A4",exportOptions:{columns:".cell-export",format:c},text:'<span title="Imprimir todos los resultados"><i class="fa fa-print"></i> Imprimir</span>',action:u},{extend:"pdf",orientation:"landscape",pageSize:"A4",customize:function(e){e.defaultStyle.fontSize=5,e.styles.tableHeader.fillColor="#3a5cff",e.styles.tableHeader.fontSize=8,e.styles.title.alignment="left"},exportOptions:{columns:".cell-export",format:c},text:'<i class="fa fa-file-pdf-o"></i> PDF',action:u},{extend:"excel",customize:function(e){},exportOptions:{columns:".cell-export",format:c},text:'<span title="Exportar todos los resultados a Excel"><i class="fa fa-file-excel-o"></i> Excel</span>',action:u}];$.extend(!0,$.fn.dataTable.defaults,{language:{url:"./assets/js/i18n/datatable.js"},responsive:!0,processing:!0,serverSide:!0,iDisplayLength:100,aLengthMenu:[[10,50,100,200],[10,50,100,200]],autoWidth:!1,stateSave:!1,bDestroy:!0,order:[[0,"DESC"]],buttons:m,language:{buttons:{copyTitle:"Copiar a portapapeles",copyKeys:"Presione <i>ctrl</i> o <i>⌘</i> + <i>C</i> para copiar los datos de la tabla<br>a tu portapapeles.<br><br>Para cancelar, haz clic en este mensaje o presione ESCAPE.",copySuccess:{_:"%d filas han sido copiadas",1:"Se copió una fila"}},decimal:"",emptyTable:"No hay datos",info:"Mostrando _START_ al _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",infoPostFix:"",thousands:",",lengthMenu:"Ver _MENU_ registros",loadingRecords:"Cargando...",processing:"Cargando...",search:"Buscar:",zeroRecords:"No se encontraron resultados",paginate:{first:"Inicio",last:"Fin",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"}},bDeferRender:!0,dom:"<'row'<'col-sm-3 col-md-3 col-lg-4'f><'col-sm-3 col-md-3 col-lg-4'l><'col-sm-6 col-md-6 col-lg-4'B>><'row'<'col-sm-12'tr>><'row'<'col-sm-6'i><'col-sm-6'p>>",renderer:"bootstrap",fnRowCallback:function(e){t(e)(l)},drawCallback:function(){$(".paginate_button.previous").html('<md-button class="md-primary "><md-icon>keyboard_arrow_left</md-icon></md-button>'),$(".paginate_button.next").html('<md-button class="md-primary "><md-icon>keyboard_arrow_right</md-icon></md-button>'),t($(".paginate_button"))(l)},initComplete:function(){$(".dt-buttons .dt-button").each(function(e){var t=$(this);$(".dt-buttons").append('<md-button class="md-primary" ng-click="$root.dtExportButtonCallback('+e+')">'+$(t).html()+"</md-button>")}),t($(".dt-buttons"))(l),$(".dataTables_filter").append('\n                <div layout="row">\n                    <md-input-container flex="100">\n                        <label>Buscar</label>\n                        <md-icon>search</md-icon>\n                        <input type="text" ng-change="$root.dtInputSearchCallback(busqueda)" ng-model="busqueda" /> \n                    </md-input-container>\n                </div>\n            '),t($(".dataTables_filter"))(l);let e=[];$("[name='lista_length'] option").each(function(){var t=$(this);e.push(`<md-option value="${t.val()}">${t.text()}</md-option>`)}),$(".dataTables_length").append(`\n                <div layout="row" ng-init="limite = 100">\n                    <md-input-container flex="100">\n                        <label>Mostrar</label>\n                        <md-icon>list</md-icon>\n                        <md-select ng-change="$root.dtSelectLimitCallback(limite)" ng-model="limite"> \n                            ${e.join("")}\n                        </md-select>\n                    </md-input-container>\n                </div>\n            `),t($(".dataTables_length"))(l)}}),e.dtExportButtonCallback=(e=>setTimeout(t=>$(".dt-button").eq(e).trigger("click"),0)),e.dtInputSearchCallback=(e=>setTimeout(t=>$(".dataTables_filter input").val(e).trigger("keyup"),0)),e.dtSelectLimitCallback=(e=>setTimeout(t=>$(".dataTables_length select").val(e).trigger("change"),0)),e.$on("$stateChangeStart",function(e,t,a,o,n){if("sesion.login"!==t.name){if(!r.is_login)return e.preventDefault(),s.go("sesion.login");if(t.data&&t.data.roles){r.gestionPermiso(t.data.roles)||(e.preventDefault(),s.go("prestacash.prestamos.consulta"))}}else r.is_login&&(e.preventDefault(),s.go("prestacash.prestamos.consulta"))}),e.$on("$viewContentLoaded",function(){"localhost"===location.hostname&&o.removeAll()})}]),"serviceWorker"in navigator&&"localhost"!==location.hostname&&navigator.serviceWorker.register("/sw.js").then(function(e){console.log("Registro de SW exitoso",e)}).catch(function(e){console.warn("Error al tratar de registrar el sw",e)}),app.constant("CUALITATIVO",{titulo:"ANÁLISIS CUALITATIVO",validacion:{minimo:14,maximo:27},categorias:[{key:"UF",seccion:"A",titulo:"UNIDAD FAMILIAR",subcategorias:[{key:"TG",titulo:"Tipo de Garantía",descripcion:"\n\t\t\t\t\t<div><i>Garantía Real</i>: Se refiere a las garantías que respaldan el préstamo, pueden ser inmuebles, vehículos, maquinaria y diversos equipos que se inscriben en el registro de propiedad a favor de la institución</div>\n\t\t\t\t\t<div><i>Garantía simple</i> : Documento original de los bienes o declaración jurada de bienes , dejadas en custodia</div>\n\n\t\t\t\t\t",items:[{descripcion:"Real constituida a favor de la Institucion (Hipoteca y/o Prenda)",puntos:4},{descripcion:"Simple",puntos:2}]},{key:"CF",titulo:"Carga Familiar",descripcion:"\n\t\t\t\t\t\t\x3c!--<div><b>Dependientes Vulnerables<b></div>--\x3e\n\t\t\t\t\t\t<div>Relaciona los gastos que se generen respecto a la salud de los dependientes.</div>\n\t\t\t\t\t\t<div>Los dependientes son: hijos, padres u otras personas a quien deba mantenerse y le representen gastos constantes.</div>\n\t\t\t\t\t",items:[{descripcion:"No tiene dependientes",puntos:4},{descripcion:"Tiene Dependientes no vulnerables",puntos:2},{descripcion:"Tiene Dependientes Menores a 5 años",puntos:1},{descripcion:"Tiene Algún Dependiente con enfermedades frecuente y/o grave",puntos:0}]},{key:"RE",titulo:"Riesgo por edad máxima",descripcion:"\n\t\t\t\t\t\t<div>La cobertura del Seguro de Desgravamen cubre fallecimientos de clientes que acceden al  crédito hasta los 64 años y 06 meses.</div>\n\t\t\t\t\t\t<div>Por lo tanto, los que ingresen con mayor edad, no tendrán esta cobertura. Tampoco estarán cubiertas las Personas Jurídicas.</div>\n\t\t\t\t\t",items:[{descripcion:"Menor de 65 años",puntos:3},{descripcion:"Mayor de 65 años",puntos:1}]}]},{key:"UE",seccion:"B",titulo:"UNIDAD EMPRESARIAL",subcategorias:[{key:"AN",titulo:"Tiene antecedentes crediticios?",descripcion:"\n\t\t\t\t\t<di>Se consideraran créditos otorgados en Edyficar y Care Perú, lo que se requiere es saber de la experiencia crediticia \n\t\t\t\t\tque pueda tener en instituciones financieras, otorgándole un mayor peso a la experiencia que tenga con Edyficar y Care Perú.</div>\n\t\t\t\t\t",items:[{descripcion:"Créditos en Edyficar",puntos:5},{descripcion:"Créditos en otras Entidades del Sistema Financiero",puntos:4},{descripcion:"Credito con Proveedores",puntos:3},{descripcion:"No ha tenido créditos",puntos:1}]},{key:"RP",titulo:"Cuál fue el récord de pago del último préstamo",descripcion:"\n\t\t\t\t\t<div>Se refiere a retrasos por mes (mayor retraso en alguno de los meses), en créditos con Edyficar, CarePerú u otras instituciones financieras.</div>\n\t\t\t\t\t<div><i>Pago Oportuno</i>: Cuando ha sido pagado en la fecha programada o antes de ella.</div>\n\t\t\t\t\t",items:[{descripcion:"Fue con pagos oportunos (en su fecha de pago)",puntos:7},{descripcion:"Fue con retraso menor a 8 dias",puntos:5},{descripcion:"Fue con retraso entre 9 y 30 días",puntos:2},{descripcion:"Fue con retraso mayor a 30 días o no ha tenido préstamos",puntos:1}]},{key:"ND",titulo:"Nivel de Desarrollo del Negocio",descripcion:"\n\t\t\t\t\t<div>De sobrevivencia, disponen de ingresos para reproducir el ciclo productivo o comercial a nivel de autoempleo y/o autoconsumo. </div>\n\t\t\t\t\t<div>Los clientes de este nivel generalmente acceden a préstamos hasta US$400.00. Emergentes, se consideran las que generan \ncierta acumulación de capital producto de la actividad económica. Acceden hasta US $2000.00 de prestamo. </div>\n<div>De acumulación simple, aquellas que generan pequeños porcentajes de reinversión y posibilidades de generar empleo. Acceden \nhasta US $6000.00 de prestamo. De acumulación ampliada, se consideran aquellas microempresas con capacidad de reinversión,\nde generación de empleo, crecimiento y de mayores utilidades. Están en un nivel anterior al que constituye una Pequeña\nEmpresa. Se considera endeudamiento máximo de US $30000.00</div>\n\t\t\t\t\t",items:[{descripcion:"Acumulación Ampliada",puntos:4},{descripcion:"Acumulación Simple",puntos:3},{descripcion:"Emergente",puntos:2},{descripcion:"Sobreviviencia",puntos:1}]},{key:"TN",titulo:"Desde que tiempo viene funcionando  el negocio",descripcion:"\n\t\t\t\t\tSe requiere saber la experiencia que tiene en el manejo de su negocio, y la solidez que presenta  el negocio en el transcurso \nde un determinado período de tiempo. Cuanto más tiempo de funcionamiento tenga el negocio significará que ha podido \nsoportar diversos cambios en su entorno, y lo mas probable es que no dejará de de funcionar en un período corto de tiempo.\n\t\t\t\t\t",items:[{descripcion:"Mayor a 3 años",puntos:4},{descripcion:"Entre 1 a 3 años",puntos:3},{descripcion:"Menor a 1 año",puntos:2}]},{key:"EI",titulo:"¿Se muestran evidencia del manejo y control de sus ingresos y gastos?",descripcion:"\n\t\t\t\t\tEs importante saber cual es el nivel de manejo contable del negocio, es necesario saber si cuenta con libros contables u otros\nregistros o declaraciones formales de sus ingresos y egresos, si cuenta con registros propios, guías de remisión u otro \ndocumento que demuestre ese manejo.\n\t\t\t\t\t",items:[{descripcion:"Suficiente y adecuadamente registrada",puntos:3},{descripcion:"Suficiente pero inadecuadamente registrada",puntos:2},{descripcion:"Insuficiente",puntos:1}]},{key:"VD",titulo:"Las ventas totales se declaran",descripcion:"\n\t\t\t\t\tEs necesario saber si el total de sus ventas son declaradas a la SUNAT, que porcentaje de sus ventas y compras se declaran \nformalmente, un alto porcentaje  de sus ventas no declaradas implicará un riesgo mayor a ser multado.\n\t\t\t\t\t",items:[{descripcion:"Formalmente de manera parcial",puntos:2},{descripcion:"No las declara",puntos:0}]},{key:"CA",titulo:"El Comportamiento de la Actividad Económica en el Ambito de la Agencia",descripcion:"\n\t\t\t\t\tEspecíficamente se refiere al contexto económico, político y social actual que engloba el  sector al que pertenece el negocio,\nexisten variables diversas que implican un mayor riesgo, los productos importados, la recesión, la recesión del sector, políticas\neconómicas, factores climáticos, la estacionalidad y otros.\n\t\t\t\t\t",items:[{descripcion:"Bajo riesgo",puntos:4},{descripcion:"Mediano riesgo",puntos:2},{descripcion:"Alto riesgo",puntos:0}]}]}]}),app.constant("WAI_CONSTANTS",{BASE_API:"./admin/api/",TIPO_FRECUENCIA:{DIARIO:1,INTERDIARIO:2,SEMANAL:3,QUINCENAL:4,MENSUAL:5},TIPOS_SECTOR:{SERVICIOS:1,PRODUCCION:2,COMERCIO:3},TIPOS_SOLICITUD:{NUEVO:1,RECURRENTE_SIN_SALDO:2,RECURRENTE_CON_SALDO:3,PARALELO:4},TIPOS_GARANTIA:{SIMPLE:1,REAL:2},COBRANZA_METODO_PAGO:{EFECTIVO:1,DEPOSITO:2},ESTADO_CREDITO:{POR_APROBAR:1,APROBADO:2,RECHAZADO:3,REGRESADO:4,ENTREGADO:10}}),angular.module("app").controller("AccionesCtrl",["$scope","API","WAIUtils",function(e,t,a){e.info={title:"Acciones"},e.dtOptions={ajax:a.urlListar("acciones"),fnRowCallback:function(t){$compile(t)(e)},columns:a.createColumns("acciones",{nombre:{render:function(e,t,o){return a.createEditable({module:"acciones",id:o[0],name:"nombre",description:"Nombre Acción",html:e})},class:"cell-export"},tipo:{render:function(e,t,a){return 1==e?"Derivar Documento":"Archivar Documento"},class:"cell-export"}})},e.crud=t.crud("acciones",e)}]),angular.module("app").controller("CargosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Cargos - Denominaciones"},e.dtOptions={ajax:a.urlListar("cargos"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("cargos",{nombre:{render:function(e,t,o){return a.createEditable({module:"cargos",id:o[0],name:"nombre",description:"Nombre Cargo",html:e})},class:"cell-export"},descripcion:{render:function(e,t,o){return a.createEditable({module:"cargos",id:o[0],name:"descripcion",description:"Descripción",html:e})},class:"cell-export"}})},e.crud=t.crud("cargos",e)}]),angular.module("app").controller("CargosUsuariosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Cargos - Usuarios"},e.dtOptions={ajax:a.urlListar("cargos_usuarios"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("cargos_usuarios",{oficina:{class:"cell-export"},cargo:{class:"cell-export"},nombre_completo:{class:"cell-export"},nombre_usuario:{class:"cell-export"}})},e.crud=t.crud("cargos_usuarios",e)}]),angular.module("app").controller("ClientesCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Clientes"},e.dtOptions={ajax:a.urlListar("cliente"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("cliente",{CLI_DNI:{class:"cell-export"},CLI_Nombre:{class:"cell-export"},CLI_Celular:{class:"cell-export"},CLI_TasaPreferencial:{class:"cell-export"},ZO_Descripcion:{class:"cell-export"}})},e.crud=t.crud("cliente",e)}]),angular.module("app").controller("ConsultasCtrl",["$scope","API","WAIUtils","$state","Sedes","Oficinas","$filter","$compile","$mdDialog",function(e,t,a,o,n,i,r,s,l){e.sedes=n,e.oficinas=i;let c=+moment().format("YYYY"),d=angular.copy(c);e.anhos=new Array(10).fill().map(()=>d--);const u=e=>r("linky")(e||"");e.filtros={anho:c},e.filtros_tipos={id_oficina:"array",id_oficina_origen:"array",id_cargo:"array",id_id_cargo_origen:"array",tipo_origen:"array",id_tipo_documento:"array",codigo:"codigo"},e.dtOptions={ajax:{url:t.url("tramite","consultas"),type:"POST",data:function(t){return t.columns.forEach((t,a)=>{switch(e.filtros_tipos[t.name]){case"array":let a=e.filtros[t.name]||[];a.length&&(t.search.value=a.join(","));break;case"codigo":e.filtros.codigo&&(t.search.value=(e.filtros.anho||moment().format("YYYY"))+(e.filtros.codigo||"").padStart(6,"0"))}}),e.filtros.desde&&(t.desde=moment(e.filtros.desde).format("YYYY-MM-DD HH:mm:ss")),e.filtros.hasta&&(t.hasta=moment(e.filtros.hasta).format("YYYY-MM-DD HH:mm:ss")),+e.filtros.dias>0&&(t.dias=+e.filtros.dias),t}},columns:[{title:"ID Trámite Movimiento",visible:!1,searchable:!1},{title:"Origen",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${u(r("tipo_origen")(e))}</div>`},{title:"Código",name:"codigo",visible:!0,searchable:!0,class:"cell-export"},{title:"Acción",visible:!0,width:80,searchable:!0,class:"cell-export"},{title:"Empresa",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${u(e)}</div>`},{title:"id_empresa_externo",visible:!1,searchable:!1},{title:"tipo_movimiento",visible:!1,searchable:!1},{title:"Oficina origen",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${u(e)}</div>`},{title:"Cargo origen",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${u(e)}</div>`},{title:"Emisor",visible:!0,searchable:!0,render:(e,t,a)=>`\n                <small>${u(a[7])} - ${u(a[8])}</small> <br />${u(e)}\n                <div class="export-content">${u(e)}</div>\n                `,class:"cell-export"},{title:"Oficina destino",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div>${e}</div> <div class="export-content">${u(e)}</div>`},{title:"Cargo destino",visible:!1,searchable:!0,class:"cell-export"},{title:"Destinatario",true:!1,searchable:!0,width:"400",class:"cell-export",render:(e,t,a)=>`\n                    <small>${u(a[10])} - ${u(a[11])}</small> <br />${u(e)}\n                    <div class="export-content">${u(e)}</div>\n                `},{title:"ID Oficina",name:"id_oficina",visible:!1,searchable:!0},{title:"ID Oficina origen",name:"id_oficina_origen",visible:!1,searchable:!0},{title:"ID Cargo",name:"id_cargo",visible:!1,searchable:!0},{title:"ID Cargo Orig.",name:"id_id_cargo_origen",visible:!1,searchable:!0},{title:"Documento",visible:!1,searchable:!0,class:"cell-export"},{title:"Asunto",visible:!1,searchable:!0,class:"cell-export"},{title:"flag_adjunto",visible:!1,searchable:!1,render:(e,t,a)=>`<div class="export-content">${1==e?"SI":"NO"}</div>`},{title:"Archivo adjunto",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>{if(!e)return"";let o=`${location.origin}/uploads/${u(e)}`;return`<div class="export-content"><a href="${o}" target="_blank">${o}</a></div>`}},{title:"id_tipo_documento",name:"id_tipo_documento",visible:!1,searchable:!1},{title:"Fecha",visible:!0,searchable:!0,width:"150",class:"cell-export",render:e=>`\n                    <div ng-bind="'${e}'"></div>\n                    <div class="export-content">${u(e)}</div>\n                `},{title:"Estado destinatario",visible:!1,searchable:!1},{title:"Acciones",width:"1%",orderable:!1,visible:!0,render:function(e,t,a){const o=a[0];let n="";return`\n                        <div layout="row">\n                        ${n+=`\n                    <div><md-tooltip>Ver</md-tooltip><md-button ng-click="historial($event, ${o}, 1)" class="md-icon-button md-primary"><md-icon>remove_red_eye</md-icon></md-button></div>\n                    <div><md-tooltip>Histórico</md-tooltip><md-button ng-click="historial($event, ${o})" class="md-icon-button md-primary"><md-icon>history</md-icon></md-button></div>\n                    `}\n                        </div>\n                    `}}],fnRowCallback:function(t){s(t)(e)}},e.buscar=(()=>{$("#lista").DataTable().ajax.reload()}),e.historial=function(e,a,o){l.show({controller:"TramiteVerCtrl",templateUrl:"./assets/views/gestion/ver.html",preserveScope:!0,multiple:!0,targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,resolve:{IdTramiteMovimiento:()=>a,IsVer:()=>!!o,Sedes:()=>n,Oficinas:()=>i,Tramite:["$http","$q",(e,o)=>{let n=o.defer();return e.get(t.url("tramite","ver",a)).success(function(e){n.resolve(e)}),n.promise}]}}).then(function(e){},function(){})}}]),angular.module("app").controller("ContenidosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Contenidos"},e.dtOptions={ajax:a.urlListar("contenidos"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("contenidos",{proyecto:{class:"cell-export"},tipo:{class:"cell-export"},foto:{class:"cell-export"},contenido:{class:"cell-export",render:(e,t,o)=>a.cutText($("<div/>").text(e).html(),50)},titulo:{class:"cell-export",render:(e,t,o)=>a.cutText($("<div/>").text(e).html(),50)},subtitulo:{class:"cell-export"},orden:{render:function(e,t,o){return a.createEditable({module:"contenidos",id:o[0],name:"orden",description:"Orden",html:e})},class:"cell-export"}},{id:!1})},e.crud=t.crud("contenidos",e)}]),angular.module("app").controller("CuentasBancosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Cuentas - Bancos"},e.dtOptions={ajax:a.urlListar("cuentas_bancos"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("cuentas_bancos",{nombre:{render:function(e,t,o){return a.createEditable({module:"cuentas_bancos",id:o[0],name:"nombre",description:"Nombre",html:e})},class:"cell-export"},descripcion:{render:function(e,t,o){return a.createEditable({module:"cuentas_bancos",id:o[0],name:"descripcion",description:"Descripción",html:e})},class:"cell-export"}})},e.crud=t.crud("cuentas_bancos",e)}]),angular.module("app").controller("EmpresasCtrl",["$scope","API","WAIUtils","$filter",function(e,t,a,o){e.info={title:"Empresas"},e.dtOptions={ajax:a.urlListar("empresas"),columns:a.createColumns("empresas",{nombre:{render:function(e,t,o){return a.createEditable({module:"empresas",id:o[0],name:"nombre",description:"Nombre Empresa",html:e})},class:"cell-export"},tipo_documento:{render:function(e,t,a){return o("tipo_documento")(e)},class:"cell-export"},numero_documento:{class:"cell-export"}})},e.crud=t.crud("empresas",e)}]),angular.module("app").controller("FeriadosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Feriados"},e.dtOptions={ajax:a.urlListar("feriados"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("feriados",{fecha_fija:{render:function(e,t,o){return a.createEditable({module:"feriados",id:o[0],name:"fecha_fija",description:"Fecha fija",html:e})},class:"cell-export"},nombre:{render:function(e,t,o){return a.createEditable({module:"feriados",id:o[0],name:"nombre",html:e})},class:"cell-export"}})},e.crud=t.crud("feriados",e)}]),app.controller("CreditosControlCtrl",["$scope","$mdToast","WAI","API","MarkerCreatorService","$log","$mdDialog","WAI_CONSTANTS","$resource","Item",function(e,t,a,o,n,i,r,s,l,c){const d=({latitude:e,longitude:t})=>`${e.toFixed(8)}, ${t.toFixed(8)}`,u=e=>`Ubicación (${d(e)})`;let m={latitude:-5.17161,longitude:-80.6717254},p=c?c.toJSON():{};if(c){let e=c.coordenadas;e.lat&&(p.coordenadas=`${e.lat}, ${e.lng}`,m.latitude=e.lat,m.longitude=e.lng)}e.crud=parent.crud,e.nuevo=!c,e.WAI=a,e.registro_info=Object.assign({coordenadas:d(m),tipo_ubicacion:1},p),e.loading=!1,e.BuscarTemp={},e.BuscarTextos={id_cliente:e.registro_info.nombre_completo?e.registro_info.nombre_completo:""},e.marker={options:{animation:1,labelContent:u(m),labelAnchor:"28 -5",labelClass:"marker-label",draggable:!0},events:{dragend:function(t,a,o){i.log("marker dragend");var n=t.getPosition().lat(),r=t.getPosition().lng();e.registro_info.coordenadas=e.tmp_lat_lng=`${n.toFixed(8)}, ${r.toFixed(8)}`,e.marker.options={draggable:!0,labelContent:u(e.marker.coords),labelAnchor:"100 0"},setTimeout(()=>$("#map_input").select())}},coords:m,id:0},e.address="",e.map={center:m,zoom:17,markers:[],control:{},options:{scrollwheel:!0}},e.map.markers.push(e.marker),e.tmp_lat_lng=`${e.map.center.latitude.toFixed(8)}, ${e.map.center.longitude.toFixed(8)}`,e.$watch("tmp_lat_lng",t=>{if(!t)return;let a=t.split(/[, ]+/);2===a.length&&(e.map.markers[0].coords={latitude:parseFloat(a[0].trim()),longitude:parseFloat(a[1].trim())})}),console.log("$scope.map",e.map),e.$watchCollection("BuscarTemp",function(t){t&&angular.forEach(t,function(t,a){t&&(e.registro_info[a]=t[a])})}),e.BuscarFn={},e.BuscarFn.clientes=o.autocompleteList("clientes"),e.hide=function(){r.hide()},e.cancel=function(){r.cancel()};var g=l(`${s.BASE_API}crud/:moduleName`,{moduleName:"creditos"});e.enviar=function(){if(e.formulario.$invalid)return t.show(t.simple().textContent("Por favor, revisar los campos requeridos").hideDelay(2e3));var a=new g(e.registro_info);e.loading=!0,a.$save().then(function(e,o){console.log("Item",a),$("#lista").DataTable().ajax.reload(),t.show(t.simple().textContent("Se ha guardado correctamente el registro").hideDelay(2e3)),r.hide()}).catch(function(){t.show(t.simple().textContent("Error al guardar registro, intente nuevamente").hideDelay(3e3))}).finally(function(){e.loading=!1})}}]),angular.module("app").controller("CreditosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Creditos"},e.dtOptions={ajax:a.urlListar("creditos"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("creditos",{codigo:{class:"cell-export"},tipo_documento:{class:"cell-export"},numero_documento:{class:"cell-export"},nombre_completo:{class:"cell-export"},ubicacion:{class:"cell-export"},proyecto:{class:"cell-export"},coordenadas:{class:"cell-export"},descripcion:{class:"cell-export",render:(e,t,o)=>a.cutText($("<div/>").text(e).html(),50)},dormitorios:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"dormitorios",description:"N° Dormitorios",html:e})},class:"cell-export"},banhos:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"banhos",description:"N° Baños",html:e})},class:"cell-export"},estacionamientos:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"estacionamientos",description:"N° Estacionamientos",html:e})},class:"cell-export"},bloque:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"bloque",description:"Bloque",html:e})},class:"cell-export"},numero_casa:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"numero_casa",description:"N° Casa",html:e})},class:"cell-export"},frente:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"frente",description:"Frente",html:e})},class:"cell-export"},fondo:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"fondo",description:"Fondo",html:e})},class:"cell-export"},derecha:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"derecha",description:"Derecha",html:e})},class:"cell-export"},izquierda:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"izquierda",description:"Izquierda",html:e})},class:"cell-export"},area_construida:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"area_construida",description:"Área construida",html:e})},class:"cell-export"},area_total:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"area_total",description:"Área total",html:e})},class:"cell-export"},precio_m2:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"precio_m2",description:"Precio m2",html:e})},class:"cell-export"},precio_m2_e:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"precio_m2_e",description:"Precio m2 - Esquina",html:e})},class:"cell-export"},adicional:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"adicional",description:"Diferencia",html:e})},class:"cell-export"},precio_venta:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"precio_venta",description:"Precio Venta",html:e})},class:"cell-export"},descripcion:{render:function(e,t,o){return a.createEditable({module:"creditos",id:o[0],name:"descripcion",description:"Descripción",html:e})},class:"cell-export"}})},e.crud=t.crud("creditos",e,"CreditosControlCtrl")}]),angular.module("app").controller("OficinasCtrl",["$scope","API","WAIUtils",function(e,t,a){e.info={title:"Oficinas"},e.dtOptions={ajax:a.urlListar("oficinas"),columns:a.createColumns("oficinas",{nombre_sede:{class:"cell-export"},nombre:{render:function(e,t,o){return a.createEditable({module:"oficinas",id:o[0],name:"nombre",description:"Nombre oficina",html:e})},class:"cell-export"},descripcion:{render:function(e,t,o){return a.createEditable({module:"oficinas",id:o[0],name:"descripcion",description:"Descripción",html:e})},class:"cell-export"}})},e.crud=t.crud("oficinas",e)}]),angular.module("app").controller("PersonalAsignarCtrl",["$scope","API","WAIUtils","$compile","PersonalItems",function(e,t,a,o,n){console.log("PersonalItems",n),e.info={title:"Personal"}}]),angular.module("app").controller("PersonalCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Personal"},e.dtOptions={ajax:a.urlListar("personal"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("personal",{PE_IdPersonal:{class:"cell-export"},PE_Nombre:{class:"cell-export"},PE_Direccion:{class:"cell-export"},PE_Celular:{class:"cell-export"},PE_FechaIngreso:{class:"cell-export"}})},e.crud=t.crud("personal",e)}]),angular.module("app").controller("PersonasCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Personas"},e.dtOptions={ajax:a.urlListar("personas"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("personas",{tipo_documento:{class:"cell-export"},numero_documento:{class:"cell-export"},nombres:{render:function(e,t,o){return a.createEditable({module:"personas",id:o[0],name:"nombres",description:"Nombres",html:e})},class:"cell-export"},apellido_paterno:{render:function(e,t,o){return a.createEditable({module:"personas",id:o[0],name:"apellido_paterno",description:"Apellido Paterno",html:e})},class:"cell-export"},apellido_materno:{render:function(e,t,o){return a.createEditable({module:"personas",id:o[0],name:"apellido_materno",description:"Apellido Materno",html:e})},class:"cell-export"}})},e.crud=t.crud("personas",e)}]),angular.module("app").controller("PrestacashCobranzaPopupCtrl",["$scope","$filter","API","WAI","WAI_CONSTANTS","WAIUtils","$http","$interval","PrestaCash","$mdDialog","$mdToast","$mdBottomSheet","$q","TipoCobranza","InfoCobranza","FileUploader",function(e,t,a,o,n,i,r,s,l,c,d,u,m,p,g,f){e.InfoCobranza=g,e.WAI=o,e.WAI_CONSTANTS=n,console.log("$scope.InfoCobranza",e.InfoCobranza);const h=()=>parseFloat((e.InfoCobranza.cuotas||[]).reduce((e,t)=>(e+=parseFloat(t.CC_Saldo),e),0));e.registro_info={metodo_pago:n.COBRANZA_METODO_PAGO.EFECTIVO,tipo_cobranza:p,tipo_operacion:50,id_cuenta_banco:1,total:"cuotas"===p?h():"",fecha:new Date,glosa:"",nombre_archivo:null},e.loading=!1,e.archivo_subiendo=!1;var v=e.uploader=new f({url:a.url("prestacash","upload")});v.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<=1}}),v.onCompleteItem=function(t,a,o,n){if(a.error)return d.show(d.simple().textContent(a.mensaje).hideDelay(2e3)),void(v.queue.length&&e.eliminarArchivo(v.queue[0]));e.registro_info.nombre_archivo=a.upload_data.file_name,v.queue[0].remove()},v.onCompleteAll=function(){e.archivo_subiendo=!1},e.eliminarAdjuntoDeposito=(()=>{angular.element("#adjuntar_archivo").val(""),delete e.registro_info.nombre_archivo}),e.eliminarArchivo=function(t){t.remove(),angular.element("#adjuntar_archivo").val(""),delete e.registro_info.nombre_archivo},e.cancel=(()=>u.cancel());const b=(a,o)=>{r.post("prestacash?page=cobranza_proceso",a).success(a=>{if(!a||a.error)return d.show(d.simple().textContent(a&&a.mensaje?a.mensaje:"Error en la solicitud").hideDelay(2500));if(a.confirmar){let i=[];i.push("<div>Se cancelarán las siguientes cuotas:</div>"),i.push('<div class="small-list-cuotas"><ul>'),a.cuotas_pagar.forEach(e=>{let[a,o]=e;i.push(`<li>Cuota N° ${a}: <b>${t("moneda")(o)}</b></li>`)}),i.push("</ul></div>");var n=c.prompt().title("Confirmar pago").htmlContent(i.join("")).placeholder("Monto").ariaLabel("Monto").initialValue(o-(a.adicional>0?a.adicional:0)).required(!0).ok("Pagar").cancel("Cancelar");c.show(n).then(function(t){t=parseFloat(t);let o=Object.assign({},e.registro_info,{fecha:moment(e.registro_info.fecha).format("YYYY-MM-DD H:m:s"),prestamo_id_movimiento:e.InfoCobranza.prestamo.PP_NumeroMovimiento,cuotas:a.cuotas_pagar.map(e=>+e[0]).join(","),total:t});b(o,t)},function(){})}else d.show(d.simple().textContent(a&&a.mensaje?a.mensaje:a.ok?"Sin respuesta":"Error en la solicitud").hideDelay(3e3)),a&&!a.error&&(a.ok&&u.hide(a.credito),console.log("respuesta pago",a))}).finally(()=>{e.loading=!1})};e.enviar=(()=>{if(e.loading)return;if("cuotas"===e.registro_info.tipo_cobranza)h(),parseFloat(e.registro_info.total);e.loading=!0;let t=Object.assign({},e.registro_info,{fecha:moment(e.registro_info.fecha).format("YYYY-MM-DD H:m:s"),prestamo_id_movimiento:e.InfoCobranza.prestamo.PP_NumeroMovimiento,cuotas:e.InfoCobranza.cuotas.map(e=>+e.CC_NumeroCuota).join(",")});return b(t,e.registro_info.total),!0})}]),angular.module("app").controller("PrestacashCtrl",["$scope","API","WAIUtils","$http","$interval","PrestaCash","$mdDialog","$mdToast","$mdBottomSheet","$q","NombreSubmodulo",function(e,t,a,o,n,i,r,s,l,c,d){const u="localhost"===location.hostname,m="COBRANZA"===d,p={ok:!1,prestamos:[],cliente:null,personal:null};var g={panderitos:"\n        40251353\t2020-100001909\tPURIZACA SANDOVAL ROXANA VICTORIA\t\tMARTINEZ ANTON LEYDI DIANA\tMARTINEZ ANTON MARIA GREGORIA\t0\t0\t512,2\t02-05-2020\t\t512,20\t312,31\t21,95\t2,00\t0,00\t0,00\t312,31\t17-05-2020\t01-06-2020\t \t\t\n        43361728\t2020-100001792\tPURIZACA JACINTO JANET\t\tPURIZACA JACINTO ROSA SERAFINA \tPURIZACA JACINTO MARIA DEL PILAR\t1024,34\t1024,34\t10/19/1901\t02-05-2020\t\t2707,18\t660,28\t21,95\t5,00\t249,84\t249,84\t160,61\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        41711614\t2020-100001662\tGONZALES JACINTO JULIANA DEL PILAR\t\tPURIZACA FLORES ROSA\tCHUNGA PURIZACA LIDUVINDA\t700\t800\t600\t30-04-2020\t\t2100,00\t512,19\t21,95\t5,00\t170,73\t195,12\t146,34\t15-05-2020\t30-05-2020\t14-06-2020\t29-06-2020\t14-07-2020\n        41096587\t2020-100001663\tRUMICHE CALDERON MARIA CAROLINA\t\tVILCHEZ LUPUCHE JACKELINE\tZETA RUMICHE ANDREA\t600\t1000\t700\t30-04-2020\t\t2300,00\t560,97\t21,95\t5,00\t146,34\t243,90\t170,73\t15-05-2020\t30-05-2020\t14-06-2020\t29-06-2020\t14-07-2020\n        46734401\t2020-100001664\tCALDERON JULCA SUSANA C\t\tMARTINEZ BANCAYAN KARINA\tZETA RUMICHE BENITA\t0\t1100\t878,1\t30-04-2020\t\t1978,10\t482,46\t21,95\t5,00\t0,00\t268,29\t214,17\t15-05-2020\t30-05-2020\t14-06-2020\t29-06-2020\t14-07-2020\n        02740291\t2020-100001347\tFLORES GARCIA CECILIA\t\tCHUNGA JACINTO CLARITZA DE LOS ANGELES \tPAICO FLORIAN ELVA \t1100\t600\t700\t25-04-2020\t\t2400,00\t585,36\t21,95\t5,00\t268,29\t146,34\t170,73\t10-05-2020\t25-05-2020\t09-06-2020\t24-06-2020\t09-07-2020\n        46265964\t2020-100001345\tRUIZ PURIZACA JANETH MARIBEL\t\tVILCHEZ LUPUCHE MARIA ANDREA \tFLORES GARCIA HAYDEE JESSENIA \t700\t1200\t800\t25-04-2020\t\t2700,00\t658,53\t21,95\t5,00\t170,73\t292,68\t195,12\t10-05-2020\t25-05-2020\t09-06-2020\t24-06-2020\t09-07-2020\n        43171081\t2020-100001346\tPURIZACA CHUNGA MARIA DEL SOCORRO\t\tANTON ANTON KARINA ARACELI\tECHE INFANTE ROXANA MARIBEL \t1000\t800\t1500\t25-04-2020\t\t3300,00\t804,87\t21,95\t5,00\t243,90\t195,12\t365,85\t10-05-2020\t25-05-2020\t09-06-2020\t24-06-2020\t09-07-2020\n        43934790\t2020-100001295\tANTON PUESCAS EMILIANA\t\tMARTINEZ BANCAYAN DEYSI\tHERNANDEZ GOMEZ DIONILA\t1000\t1000\t1000\t01-04-2020\t\t3000,00\t731,70\t21,95\t5,00\t243,90\t243,90\t243,90\t16-04-2020\t01-05-2020\t16-05-2020\t31-05-2020\t15-06-2020\n        41979782\t2020-100001298\tYENQUE YAMUNAQUE MARCELA LEONOR\t\tYENQUE YAMUNAQUE SUSANA MARIA \tCURO CHUNGA MARIA LIDIA \t1000\t1000\t1500\t01-04-2020\t\t3500,00\t853,65\t21,95\t5,00\t243,90\t243,90\t365,85\t16-04-2020\t01-05-2020\t16-05-2020\t31-05-2020\t15-06-2020\n        42772382\t2020-100001178\tMARTINEZ LLENQUE CARMEN AMELIA\t\tIMAN MARTINEZ ARACELI DEL PILAR\tRUIZ PURIZACA FIDELA\t1000\t1000\t1100\t09/03/2020\t3658,45\t3100,00\t756,09\t21,95\t5,00\t243,90\t243,90\t268,29\t24-03-2020\t08-04-2020\t23-04-2020\t08-05-2020\t23-05-2020\n        48164345\t2020-100000854\tVILCHEZ LUPUCHE JULLIANY MARISOL\t\tLUPUCHE ANTON MARIANA \tCALDERON CHUNGA LUCY MARIBEL \t700\t700\t1000\t21/02/2020\t2341,44\t2400,00\t585,36\t21,95\t5,00\t170,73\t170,73\t243,90\t07-03-2020\t22-03-2020\t06-04-2020\t21-04-2020\t06-05-2020\n        48351068\t2020-100000914\tCALDERON ECHE MARIA ESPERANZA\t\tALVAREZ MENDOZA ALEJANDRA\tBANCAYAN MONCADA VALENTINA DEL ROSARIO\t1000\t800\t900\t26/02/2020\t2634,12\t2700,00\t658,53\t21,95\t5,00\t243,90\t195,12\t219,51\t12-03-2020\t27-03-2020\t11-04-2020\t26-04-2020\t11-05-2020\n        02740654\t2020-100000853\tLLENQUE DE MARTINEZ REGINA\t\tCALDERON CHUNGA DE RUIZ KORINA REBECA\tMARTINEZ LLENQUE MARIA EMERITA\t800\t1200\t900\t21/02/2020\t2829,35\t2900,00\t707,31\t21,95\t5,00\t195,12\t292,68\t219,51\t07-03-2020\t22-03-2020\t06-04-2020\t21-04-2020\t06-05-2020\n        47620761\t2020-100001038\tMARTINEZ BANCAYAN TEODORA FREDESVINDA DE LOURDES\t\tPURIZACA JACINTO GINA LORENA\tMARTINEZ DE RUMICHE MARIA EUFEMIA\t1800\t1800\t1500\t04/03/2020\t6219,45\t5100,00\t1243,89\t21,95\t5,00\t439,02\t439,02\t365,85\t19-03-2020\t03-04-2020\t18-04-2020\t03-05-2020\t18-05-2020\n        02862014\t2020-100001103\tREYES ANTON ANA PETRONILA\t\tPAICO PURIZACA YOISI ELIANY\tMARTINEZ LLENQUE HERLY FABIOLA\t700\t1000\t1000\t07/03/2020\t3292,65\t2700,00\t658,53\t21,95\t5,00\t170,73\t243,90\t243,90\t22-03-2020\t06-04-2020\t21-04-2020\t06-05-2020\t21-05-2020\n        45302483\t2020-100001874\tGALAN FIESTAS JACKELINE MERCEDES\t\tMORALES AMAYA MARLENE DEL SOCORRO\tECHE NUNURA GUIULIANA YANET\t800\t800\t800\t04-05-2020\t\t2400,00\t585,36\t21,95\t5,00\t195,12\t195,12\t195,12\t19-05-2020\t03-06-2020\t18-06-2020\t03-07-2020\t18-07-2020\n        44598832\t2020-100001402\tSABA PAZO DE VITE JENNY ESTHER\t\tSABA PAZO KARINA ELIZABETH\tMOSCOL CORDOVA MARYURY PIERINA\t800\t800\t800\t27-04-2020\t\t2400,00\t585,36\t21,95\t5,00\t195,12\t195,12\t195,12\t12-05-2020\t27-05-2020\t11-06-2020\t26-06-2020\t11-07-2020\n        02661526\t2020-100001439\tAMAYA TUME NATALIA\t\tCHUNGA AMAYA LINDSAY FIORELLA\tCHUNGA AMAYA MARISOL DEL CARMEN\t1463,4\t975,6\t682,9\t02-05-2020\t\t3121,90\t761,43\t21,95\t5,00\t356,92\t237,95\t166,56\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        43729650\t2020-100001561\tPANTA TUME MILAGROS ELENA\t\tNUNURA RUMICHE MARIA BALTAZARA\tNUNURA RUMICHE TANIA JANETH\t1097,5\t1024,5\t951,5\t02-05-2020\t\t3073,50\t749,63\t21,95\t5,00\t267,68\t249,88\t232,07\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        80365324\t2020-100001554\tJUAREZ CHAPILLIQUEN ROXANA\t\tBANCAYAN SABA LILIANA\tHUAMAN LLOCLLA MERLY ERISEYLA\t878,01\t731,67\t731,67\t02-05-2020\t\t2341,35\t571,06\t21,95\t5,00\t214,15\t178,45\t178,45\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        40718400\t2020-100001907\tPINGO PURIZACA SILVIA DEL MILAGRO\t\tPINGO PURIZACA DIANA ELIZABETH\tVALLADARES PINGO DIANA PAOLA\t390,22\t390,22\t390,22\t02-05-2020\t\t1170,66\t285,52\t21,95\t5,00\t95,17\t95,17\t95,17\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        44529896\t2020-100001622\tNUNURA ECHE MARIA ANGELITA\t\tCHERRES QUEREVALU ARACELLI DEL ROCIO\tCHERRES QUEREVALU ANA ROSAURA\t951,18\t878,01\t878,01\t02-05-2020\t\t2707,20\t660,29\t21,95\t5,00\t231,99\t214,15\t214,15\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        42855122\t2020-100001906\tPAZO QUEREVALU LUZ MARIA\t\tPAZO QUEREVALU SANTOS JOVITA\tPAZO QUEREVALU GLORIA DE JESUS\t243,89\t365,84\t243,89\t02-05-2020\t\t853,62\t520,49\t21,95\t2,00\t148,71\t223,07\t148,71\t17-05-2020\t01-06-2020\t\t\t\n        43844464\t2020-100001905\tNUNURA RUMICHE BEATRIZ\t\tANCAJIMA NUNURA ERICA ASUNCION\tSERNAQUE FIESTAS ALEXANDRA LIZBET\t487,78\t439\t390,22\t02-05-2020\t\t1317,00\t535,36\t21,95\t3,00\t198,28\t178,45\t158,62\t17-05-2020\t01-06-2020\t16-06-2020\t\t\n        02738035\t2020-100001400\tPERICHE PAZO ROSA ELENA\t\tDEDIOS PAZO YOLANDA ANAIS\tLLENQUE PERICHE YESENIA LIZBET\t1000\t1200\t1000\t28-04-2020\t\t3200,00\t780,48\t21,95\t5,00\t243,90\t292,68\t243,90\t28-05-2020\t12-06-2020\t27-06-2020\t12-07-2020\t27-07-2020\n        70285182\t2020-100001401\tPANTA GALAN MARCIA LILIANA\t\tCHERRES QUEREVALU ROSA IRINA\tNUNURA TUME GLORIA JESUS\t1300\t1200\t1000\t28-04-2020\t\t3500,00\t853,65\t21,95\t5,00\t317,07\t292,68\t243,90\t28-05-2020\t12-06-2020\t27-06-2020\t12-07-2020\t27-07-2020\n        44767560\t2020-100001908\tFIESTAS RUMICHE MATILDE MARICEL\t\tQUEREVALU TUME DELIA CARMEN\tQUEREVALU RUMICHE MARIA MERCEDES\t142,7\t142,7\t192,7\t02-05-2020\t\t478,10\t291,52\t21,95\t2,00\t87,01\t87,01\t117,50\t17-05-2020\t01-06-2020\t\t\t\n        45744687\t2020-100001669\tQUEREVALU CURO LUZ MARINA\t\tQUEREVALU CURO MAYUMI ELIZABETH\tCURO FIESTAS BASILIA\t947,5\t1097,5\t947,5\t02-05-2020\t\t2992,50\t729,87\t21,95\t5,00\t231,10\t267,68\t231,10\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        46805414\t2020-100001219\tZELADA DE LA CRUZ FLOR MERY\t\tFIESTAS QUEREVALU MARILU MERCEDES\tDEDIOS LLENQUE JESSICA MERCEDES\t1200\t1200\t700\t12-03-2020\t\t3100,00\t756,09\t21,95\t5,00\t292,68\t292,68\t170,73\t27-03-2020\t11-04-2020\t26-04-2020\t11-05-2020\t26-05-2020\n        03696594\t2020-100001863\tTUME PINGO MELANIALUCILA\t\tPERICHE QUEREVALU AGUEDA\tPANTA DE VALENCIA CLAUDINA\t1170,7\t1170,7\t975,6\t02-05-2020\t\t3317,00\t809,02\t21,95\t5,00\t285,53\t285,53\t237,95\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        45126747\t2020-100001860\tLLENQUE FIESTAS MARIA MERCEDES\t\tFIESTAS ECHE ROSA MARISEL\tLLENQUE FIESTAS SANDY FABIOLA\t960\t960\t960\t02-05-2020\t\t2880,00\t691,20\t20,00\t5,00\t230,40\t230,40\t230,40\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        42127753\t2020-100001915\tIPANAQUE PAZO MARIA ISABEL\t\tVITE CHUNGA MERY ARACELI\tIPANAQUE PAZO GRISELDA ISABEL\t439\t390,22\t582,15\t02-05-2020\t\t1411,37\t430,29\t21,95\t4,00\t133,84\t118,97\t177,48\t16-05-2020\t30-05-2020\t13-06-2020\t27-06-2020\t\n        45587877\t2020-100001506\tCRUZ CHERO FLOR MARIA\t\tLAZO CARREÑO MARÍA ISABEL\tCRUZ MARCELO MARTHA ESTHER\t780,44\t975,56\t1170,68\t02-05-2020\t\t2926,68\t713,82\t21,95\t5,00\t190,35\t237,94\t285,53\t16-05-2020\t30-05-2020\t13-06-2020\t27-06-2020\t11-07-2020\n        44177636\t2020-100001893\tECHE QUEREVALU ROSSINA EUFEMIA\t\tFIESTAS MORALES ANGELA MARIA\tECHE MARTINEZ MARIA DEL PILAR\t1219,45\t1097,51\t1219,45\t02-05-2020\t\t3536,41\t862,53\t21,95\t5,00\t297,42\t267,68\t297,42\t17-05-2020\t01-06-2020\t16-06-2020\t01-07-2020\t16-07-2020\n        47711317\t2020-100001903\tFERNANDEZ MARTINEZ JUANA KARINA\t\tANTON PANTA MARIA ELIZABETH\tFIESTAS FIESTAS MARIELLA VANESSA\t170,7\t170,7\t170,7\t02-05-2020\t\t512,10\t312,25\t21,95\t2,00\t104,08\t104,08\t104,08\t17-05-2020\t01-06-2020\t\t\t\n        42682944\t2020-100001904\tNAVARRO SALINAS ANA MARIA\t\tSANTAMARIA OROZCO NOEMI ABIGAIL\tTUME MATTA VERONICA SILVIA\t738\t878\t878\t02-05-2020\t\t2494,00\t608,29\t21,95\t5,00\t180,00\t214,14\t214,14\t16-05-2020\t30-05-2020\t13-06-2020\t27-06-2020\t11-07-2020\n        47614140\t2020-100001241\tQUEREVALU FIESTAS CARMEN ROSA\t\tRUBIO HERRERA FLOR MARITZA\tLLENQUE PERICHE ROSA MARLENE\t800\t800\t800\t13-03-2020\t\t2400,00\t585,36\t21,95\t5,00\t195,12\t195,12\t195,12\t27-03-2020\t10-04-2020\t24-04-2020\t08-05-2020\t22-05-2020\n        "}.panderitos.trim().split(/\n/);g=g.reduce((e,t)=>{let a=t.trim().split(/\t/),o=["P",a[4],a[5]].map(e=>e.trim()||null),n=[a[6],a[7],a[8]].map(e=>parseFloat((e||"").replace(",","."))||0),i=parseFloat((a[14]||"").replace(",",".")),r=[a[15],a[16],a[17]].map(e=>parseFloat((e||"").replace(",","."))||0);return e.push({dni:a[0],id:a[1],numero_cuotas:i,participants:o.map((e,t)=>({nombre_completo:e,monto:null===n[t]?null:n[t],cuota:null===r[t]?null:r[t]})).filter(({nombre_completo:e})=>!!e)}),e},[]),e.PrestaCash=i,e.isControl=!0,e.isSelection=!1,e.cuotas_visible=!1,e.registro_info={numero_documento:"",seleccionados:[]},e.checkbox={cuotas:{}},e.buscando=!1,e.buscando_cuotas=!1,e.respuesta=p,e.searched=!1,e.is_cobranza=m,e.credito=null,e.info_credito={pagos:[],cuotas:[]},e.total_cuotas_con_saldo=0;const f=()=>{e.buscando_cuotas=!0,e.cuotas=[],o.post(`prestacash?page=info_credito&PP_NumeroMovimiento=${e.credito.PP_NumeroMovimiento}`).success(t=>{if(t.cuotas=t.cuotas.map((e,t)=>(e.pago=e.CC_Saldo>0?1:0,e)),e.total_cuotas_con_saldo=0,e.isSelection=!1,e.info_credito=t,e.checkbox.cuotas={},t.cuotas.forEach(({CC_NumeroCuota:t,CC_Saldo:a})=>{a>0&&(e.total_cuotas_con_saldo++,e.checkbox.cuotas[t]=!1)}),m&&u){let a=t.cuotas.find(e=>e.CC_Saldo>0);a&&e.actions(void 0,"PAGAR",[a.CC_NumeroCuota])}}).finally(()=>{e.buscando_cuotas=!1})};e.$watch("credito",e=>{e&&f()}),e.$watchCollection("checkbox.cuotas",t=>{if(!t)return;let a=[];angular.forEach(t,(e,t)=>e&&a.push(t)),e.registro_info.seleccionados=a,console.log("$scope.registro_info.seleccionados",e.registro_info.seleccionados)}),e.sumarTotalSeleccionados=(()=>{let t=0;return e.info_credito.cuotas.forEach(a=>{-1!==e.registro_info.seleccionados.indexOf(a.CC_NumeroCuota)&&(t+=parseFloat(a.CC_Saldo))}),t}),e.actions_loading=!1,e.actions=((t,a,o)=>{if(e.actions_loading)return;e.actions_loading=!0;let n=o.map(e=>+e);switch(a){case"PAGAR":console.log("Pagando cuota:",n),l.show({controller:"PrestacashCobranzaPopupCtrl",templateUrl:"./assets/views/pages/prestacash/cobranza_popup.html",clickOutsideToClose:!0,resolve:{TipoCobranza:()=>n.length?"cuotas":"cancelacion_total",PrestaCash:()=>i,InfoCobranza:["$http","$q",(t,a)=>{let o=a.defer();return t.post(`prestacash?page=info_cobranza&cuotas=${n.join(",")}&numero_movimiento=${e.credito.PP_NumeroMovimiento}`).success(function(e){o.resolve(e)}),o.promise}]}}).then(function(t){console.log("respuesta credito",t);let a=e.respuesta.prestamos.findIndex(({PP_NumeroMovimiento:e})=>e===t.PP_NumeroMovimiento);e.respuesta.prestamos[a]=t,e.credito=t,f()}).catch(function(e){}).finally(()=>e.actions_loading=!1)}}),e.obtenerTipoCredito=(t=>{let a=g.find(({dni:e,id:a})=>(t||{}).PP_NumeroMovimiento===a);if(a)return e.integrantes=a.participants,"PANDERO";if(e.info_credito.cuotas.length>2){let t=!1,a=!1,o=!1,n=!1,i=!1;if(e.info_credito.cuotas.slice(1).forEach((r,s)=>{let l=Math.abs(moment(e.info_credito.cuotas[s].CC_FechaProgramadaCobranza).diff(r.CC_FechaProgramadaCobranza,"days"));30===l||31===l?a=!0:15===l?n=!0:7===l?o=!0:1===l?t=!0:2===l&&(i=!0)}),t)return"DIARIO";if(i)return"INTERDIARIO";if(o)return"SEMANAL";if(n)return"QUINCENAL";if(a)return"MENSUAL"}return""}),e.calcularDiasAtraso=(({CC_FechaProgramadaCobranza:e,CC_FechaCancelacion:t})=>{let a=moment(e).diff(t||moment(),"days");return t||a>=0?"-":-a}),e.obtenerPersonal=(e=>i.personal.find(t=>t.PE_IdPersonal===e)),e.diasVencidos=(e=>moment().diff(e,"days")),e.diasVencidosCancelacion=(({PP_FechaVencimiento:e,PP_UltimaFechaCancelacion:t})=>t?moment(t).diff(e,"days"):0),e.amortizar=((e,t,a)=>{let o=(a||[]).reduce((e,t)=>(e+=parseFloat(t.PP_Abono)||0,e),0),n=0;for(;n<e;)o-=parseFloat(t[n++].CC_Cargo)||0;return Math.max(Math.min(t[e].CC_Cargo,o),0)}),e.sumarColumna=((e,t)=>(e||[]).reduce((e,a)=>(e+=parseFloat(a[t])||0,e),0)),e.estadoDeCuenta=(e=>{setTimeout(()=>window.open(`./admin/api/reporte/estado_cuenta/${e}`))}),e.abrirMovimiento=(t=>{e.registro_info.numero_documento=t,e.buscar()}),e.toggleSelectAll=(()=>{let t,a=!1;for(t in e.checkbox.cuotas)if(e.checkbox.cuotas[t]){a=!0;break}for(t in e.checkbox.cuotas)e.checkbox.cuotas[t]=!a}),e.busquedaPorNombre=(t=>{r.show({controller:["$scope","$mdDialog",function(e,t){var a;e.busqueda="",e.items=[],e.select=(e=>t.hide(e)),e.cancel=(()=>t.cancel()),e.$watch("busqueda",t=>{t&&t.trim().length?(a&&a.resolve(),e.loading=!0,a=c.defer(),o.post(`prestacash?page=busqueda_clientes&query=${t}`,{timeout:a.promise}).success(t=>{t&&(e.items=t)}).finally(()=>{e.loading=!1})):e.items=[]})}],templateUrl:"./assets/views/pages/prestacash/busqueda_dni.html",multiple:!0,targetEvent:t,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0}).then(function(t){e.registro_info.numero_documento=t,e.buscar()})}),e.buscar=(()=>{if(e.registro_info.numero_documento.trim().length&&!e.buscando)return e.buscando=!0,o.post(`prestacash?page=busqueda&numero_documento=${e.registro_info.numero_documento}`).success(t=>{if(!t||!t.prestamos)return e.respuesta=p;e.respuesta=t,e.credito=t.prestamos[0]}).finally(()=>{e.searched=!0,e.buscando=!1}),!0}),u&&(e.registro_info.numero_documento="47908051",e.buscar());let h=!1;const v=t=>{h=b.offset().top<window.innerHeight-100,e.$apply(function(){e.cuotas_visible=h})};var b=$("#cuotas");$("#content .box-cell").on("scroll",v),e.$on("$destroy",()=>{$("#content .box-cell").off("scroll",v)})}]),angular.module("app").filter("tipomovimientoPrestacash",[function(){return function(e){return{10:"ENTREGA/PRESTAMO",20:"REFINANCIAMIENTO",50:"ABONO NORMAL",60:"ABONO INTERESES NO PAGADOS",70:"ABONO POR REFINANCIAMIENTO",75:"ABONO UNION DE CUENTAS",80:"ABONO CRÉDITO PERDIDO"}[e]||"?"}}]),angular.module("app").filter("cargoPrestacash",[function(){return function(e){return{"01":"GERENTE","02":"ADMINISTRADOR","03":"ASISTENTE","05":"COBRADOR","06":"CAJERO"}[e]||"?"}}]),angular.module("app").controller("PrestamosCtrl",["$scope","API","WAIUtils","$state",function(e,t,a,o){}]),angular.module("app").controller("PrestamosDiarioCtrl",["$scope","API","WAIUtils","WAI","$http","$timeout","FileUploader","$mdToast","$state","$mdDialog","Rutas","WAI_CONSTANTS","Usuario",function(e,t,a,o,n,i,r,s,l,c,d,u,m){e.loading=!1,e.registro_info={id_accion:null,id_ruta:1},e.BuscarTemp={},e.BuscarTextos={},e.campos={};let p={};e.crud_cliente=t.crud("clientes",p),e.crud_cliente_callbacks={onSave:e=>{e.item}},e.clientes_filtrados=0,e.clientes=[],e.pendientes=[],e.pendientes_loading=!1;const g=()=>{e.pendientes=[],e.pendientes_loading=!0,n.post(t.url("prestacash","pendientes"),{}).success(function(t){e.pendientes=t}).finally(()=>e.pendientes_loading=!1)};g(),e.$watchCollection("BuscarTemp",function(t){t&&angular.forEach(t,function(t,a){t&&(e.registro_info[a]=t[a])})}),e.loading_clientes_ruta=!1,e.$watch("registro_info.id_ruta",function(e){}),e.loading_cliente_ver_creditos=!1,e.cliente_creditos=[],e.verCreditos=function(a){e.loading_cliente_ver_creditos||(e.cliente_selected=a,p.items=p.items||{},p.items[a[0]]={loading:!1},e.loading_cliente_ver_creditos=!0,n.post(t.url("prestamo","ver_creditos"),{id_cliente:a[0],id_tipo_credito:u.TIPO_FRECUENCIA.DIARIO}).success(function(t){console.log("data",t),e.cliente_creditos=t,e.loading_cliente_ver_creditos=!1,t.length&&(e.credito_selected=t[0])}))},e.BuscarFn={},e.BuscarFn.rutas=t.autocompleteList("zona"),e.BuscarFn.clientes=t.autocompleteList("clientes"),e.toggleTodos=function(t){e.buscarClienteLocal=""},e.abrir_prestamo=function(e,a){c.show({controller:"PrestamosDiarioNuevoCtrl",templateUrl:"./assets/views/gestion/diario_nuevo.html",preserveScope:!0,multiple:!0,targetEvent:e,clickOutsideToClose:!1,escapeToClose:!1,fullscreen:!0,resolve:{Rutas:[function(){return d}],Prestamo:[function(){return a}],Cliente:["$q","$http",function(e,o){if(!a)return;let n=e.defer();return o.get(`${t.url("crud","cliente")}?id=${a.PP_IdCliente}`).success(e=>n.resolve(e)),n.promise}]}}).then(function(e){g()},function(){})},ENV_TESTING}]),angular.module("app").controller("PrestamosDiarioNuevoCtrl",["$scope","API","WAIUtils","WAI","$http","$q","$filter","$timeout","FileUploader","$mdToast","$state","$mdDialog","Rutas","WAI_CONSTANTS","CUALITATIVO","Usuario","Notificaciones","Prestamo","Cliente","WAI_CONSTANTS",function(e,t,a,o,n,i,r,s,l,c,d,u,m,p,g,f,h,v,b,p){e.selectedIndex=3,e.selectedFlujoIndex=1,e.CUALITATIVO=g,e.WAI=o,e.WAI_CONSTANTS=p,e.Prestamo=v,e.loading=!1,e.success=!1,e.registro_info={CLI_IdCliente:void 0,id_tipo_credito:1,capital:0,interes_rate:20,numero_cuotas:30,frecuencia_tipo:1,cualitativo_puntaje:0,tipo_sector:1,destino_prestamo_porcentaje:0,tipo_solicitud:1,glosa:void 0,tipo_garantia:1,creditos_aprobar_id:null},e.totales={interes:0,cuota:0,deuda:0},e.validations={flujo_productos:!1,garantias:!1,propuesta:!1,cualitativo:!1};const A=t=>{let a=Object.assign({titulo:"Producto "+(e.flujo.margen.productos.length+1),descripcion:"",unidad_medida:"",precio:void 0,estructura:[],costo:0,produccion_mensual:void 0},t||{});e.flujo.margen.estructura.forEach(e=>{a.estructura.push(angular.copy(e))}),e.flujo.margen.productos.push(a)},_=()=>{e.flujo.totales_varios.activo_fijo=e.calcularTotalGarantias(1),e.flujo.totales_varios.activos=e.flujo.totales_varios.activo_fijo+(e.flujo.balance.activo.herramientas_otros||0)+(e.flujo.balance.activo.caja||0)+(e.flujo.balance.activo.bancos||0)+(e.flujo.balance.activo.cuentas_cobrar||0)+(e.flujo.balance.activo.inventarios_materiales||0)+(e.flujo.balance.activo.inventarios_prod_proceso||0)+(e.flujo.balance.activo.inventarios_prod_terminados||0),e.flujo.totales_varios.pasivos=0+(e.flujo.balance.pasivo.deudas_proovedores||0)+(e.flujo.balance.pasivo.deudas_entidades||0)+(e.flujo.balance.pasivo.deuda_otros||0)+(e.flujo.balance.pasivo.largo_plazo||0)+(e.flujo.balance.pasivo.deuda_otros_2||0)+(e.flujo.balance.pasivo.otras_cuentas_pagar||0),e.flujo.totales_varios.patrimonio=e.flujo.totales_varios.activos-e.flujo.totales_varios.pasivos};e.propuestas={},e.flujo={margen:{productos:[],estructura:[{titulo:"Materia Prima (Total)",items:[{titulo:"M.P. Principal",valor:void 0},{titulo:"M.P. Secundario",valor:void 0},{titulo:"M.P. Complementario",valor:void 0}],total:0},{titulo:"Mano de Obra (Total)",items:[{titulo:"Mano de Obra 1",valor:void 0},{titulo:"Mano de Obra 2",valor:void 0}]}],totales:{estructura:0,ingreso_mensual:0,costo_mensual:0,margen:0}},gastos:{tipos:{negocio:{DEP:void 0},familia:{},financieros:{1:void 0},ingresos:{1:void 0},egresos:{1:void 0}},totales:{negocio:0,familia:0}},balance:{activo:{caja:void 0,bancos:void 0,cuentas_cobrar:void 0,inventarios_materiales:void 0,inventarios_prod_proceso:void 0,inventarios_prod_terminados:void 0,herramientas_otros:void 0},pasivo:{deudas_proovedores:void 0,deudas_entidades:void 0,deuda_otros:void 0,largo_plazo:void 0,deuda_otros_2:void 0,otras_cuentas_pagar:void 0}},totales_varios:{activo_fijo:0,activos:0,pasivos:0}},ENV_TESTING?(e.registro_info.numero_cuotas=19,A({titulo:"Producto 1",descripcion:"FAENA DE PESCA",unidad_medida:"DIA",precio:680,produccion_mensual:15}),s(()=>{e.flujo.balance.activo.caja=4e3,e.flujo.balance.activo.inventarios_prod_terminados=600,e.flujo.balance.activo.herramientas_otros=1985,e.flujo.margen.productos[0].estructura[0].items[0].valor=205,e.flujo.margen.productos[0].estructura[1].items[0].valor=250,e.flujo.gastos.tipos.negocio[1]=10,e.flujo.gastos.tipos.negocio[5]=300,e.flujo.gastos.tipos.negocio[6]=15,e.flujo.gastos.tipos.negocio[7]=491.67,e.flujo.gastos.tipos.familia[1]=450,e.flujo.gastos.tipos.familia[3]=70,e.flujo.gastos.tipos.familia[4]=300,e.flujo.gastos.tipos.familia[5]=50,e.flujo.gastos.tipos.familia[6]=50,e.flujo.gastos.tipos.familia[7]=50,e.garantias[0].nombre="EMBARCACIÓN",e.garantias[0].uso=1,e.garantias[0].valor=3e4,e.garantias[1].nombre="VIVIENDA",e.garantias[1].uso=2,e.garantias[1].valor=3e4})):A(),A(),A(),e.$watch("flujo.gastos.tipos",()=>{angular.forEach(e.flujo.gastos.tipos,(t,a)=>{e.flujo.gastos.totales[a]=0,angular.forEach(t,t=>{e.flujo.gastos.totales[a]+=parseFloat(t)||0})})},!0),e.$watch("flujo.margen.productos",t=>{e.flujo.margen.totales.ingreso_mensual=0,e.flujo.margen.totales.costo_mensual=0,e.flujo.margen.totales.margen=0;let a=!1;t.forEach(t=>{t.costo=0;let o=!1;t.estructura.forEach(e=>{e.total=0,e.items.forEach(({valor:t})=>e.total+=parseFloat(t)||0),t.costo+=e.total,e.total>0&&(o=!0)});let n=(t.precio||0)*(t.produccion_mensual||0),i=t.costo*(t.produccion_mensual||0);e.flujo.margen.totales.ingreso_mensual+=n,e.flujo.margen.totales.costo_mensual+=i,e.flujo.margen.totales.margen+=n>0?(n-i)/n*100:0,o&&t.produccion_mensual>0&&(a=!0)}),e.validations.flujo_productos=a},!0),e.BuscarTemp={CLI_IdCliente:v?b:void 0},e.BuscarTextos={CLI_IdCliente:ENV_TESTING?"WALTER GERMAN CHAPI":""},e.Rutas=m;let C={nombre:"",descripcion:"",uso:1,valor:void 0};function I(){e.prestamo_datos=void 0,e.propuestas={},e.cualitativo_values={},e.cualitativo_results={},e.CUALITATIVO.categorias.forEach((t,a)=>{e.cualitativo_values[t.key]={},e.cualitativo_results[t.key]={total:0,childrens:{}},t.subcategorias.forEach((a,o)=>{e.cualitativo_values[t.key][a.key]=0,e.cualitativo_results[t.key].childrens[a.key]=0})})}e.garantias=[],e.agregarGarantia=(()=>{e.garantias.push(angular.copy(C))}),e.eliminarGarantia=(t=>{e.garantias.splice(t,1)}),e.agregarGarantia(),e.agregarGarantia(),e.agregarGarantia(),e.calcularTotalGarantias=(t=>{let a=0;return e.garantias.forEach(({valor:e,uso:o})=>a+=void 0===t?parseFloat(e)||0:(t==o||3==t)&&parseFloat(e)||0),a}),e.abrirAcciones=((e,t)=>e.open(t)),e.nombreKeyDown=((e,t)=>{13===e.keyCode&&(angular.element(`#input-valor-${t}`).focus(),e.preventDefault())}),e.valorKeyDown=((t,a)=>{e.garantias[e.garantias.length-1];13===t.keyCode&&(a==e.garantias.length-1&&e.agregarGarantia(),s(()=>{angular.element(`#input-nombre-${a+1}`).focus()},0),t.preventDefault())}),e.$watch("flujo.balance",()=>{_()},!0),e.$watchCollection("propuestas",t=>{if(!t)return;let a=!1,n=!0;o.config.parametros.PROCAT.forEach(({codigo:e})=>{let o=t[e];(void 0!==o&&""!==o?String(o).trim():"").length>0?a=!0:n=!1}),e.validations.propuesta=n}),e.$watch("garantias",t=>{e.flujo.gastos.tipos.negocio.DEP=.1*e.calcularTotalGarantias(1)/12,_(),e.validations.garantias=t.some(e=>(e.nombre||"").length&&+e.valor>0)},!0),e.cualitativo_mostrar_ayuda=void 0===localStorage.cualitativo_mostrar_ayuda?1:1==localStorage.cualitativo_mostrar_ayuda?1:0,I(),e.$watch("cualitativo_values",function(t){e.registro_info.cualitativo_puntaje=0,angular.forEach(e.cualitativo_values,(t,a)=>{e.cualitativo_results[a].total=0,angular.forEach(t,(t,o)=>{e.cualitativo_results[a].total+=t}),e.registro_info.cualitativo_puntaje+=e.cualitativo_results[a].total}),e.validations.cualitativo=e.registro_info.cualitativo_puntaje>=g.validacion.minimo&&e.registro_info.cualitativo_puntaje<=g.validacion.maximo},!0),e.$watch("cualitativo_mostrar_ayuda",e=>{void 0!==e&&(localStorage.cualitativo_mostrar_ayuda=e?1:0)}),e.$watch("registro_info.creditos_aprobar_id",a=>{if(!a)return;e.personal=null,e.creditos_aprobar_selected=e.creditos_aprobar.find(({PP_NumeroMovimiento:e})=>e==a),console.log("$scope.creditos_aprobar_selected",e.creditos_aprobar);let o=e.creditos_aprobar_selected;Object.assign(e.registro_info,{capital:angular.copy(parseFloat(o.PP_Capital)),interes_rate:angular.copy(parseFloat(o.PP_PorcInteres)),numero_cuotas:angular.copy(+o.PP_NumeroCuotas),fecha_inicio:angular.copy(moment(o.PP_FechaInicio)),frecuencia_tipo:angular.copy(+o.PP_Frecuencia)}),I(),n.post(t.url("prestacash","prestamo_datos"),{PP_NumeroMovimiento:o.PP_NumeroMovimiento}).success(function(t){e.cualitativo_values=t.cualitativo_values,e.propuestas=t.propuestas,e.evaluacion=t.evaluacion,e.prestamo_datos=t.prestamo_datos}).finally(()=>{})});let E={};e.crud_cliente=t.crud("cliente",E),e.crud_cliente_callbacks={onSave:t=>{let a=t.item;e.registro_info.CLI_IdCliente=a.CLI_IdCliente,e.BuscarTemp.CLI_IdCliente=angular.copy(a),e.BuscarTextos.CLI_IdCliente=a.CLI_Nombre}},e.$watch("registro_info.capital + registro_info.interes_rate + registro_info.numero_cuotas",function(t){console.log("Cambiando valor",t);let a=parseFloat(e.registro_info.interes_rate),o=parseFloat(e.registro_info.capital),n=e.registro_info.numero_cuotas;isNaN(a)||isNaN(o)||(a/=100,e.totales.interes=parseFloat((e.registro_info.capital*a).toFixed(2)),e.totales.deuda=e.registro_info.capital+e.totales.interes,e.totales.cuota=parseFloat((e.totales.deuda/n).toFixed(2)))}),e.cuotas=[];var y=new Date;function N(e){let t,a=!1;return 0===e.day()&&(a=!0,t="DOMINGO"),o.parametros.feriados.forEach(({fecha_fija:o,nombre:n})=>{let i=o.split("-");5===o.length&&2==i.length&&e.format("DD-MM")===o&&(a=!0,t=n)}),{omitir:a,glosa:t}}y=moment(y).add(1,"days").toDate(),e.min_fecha_1er_pago=new Date(y.getFullYear(),y.getMonth(),y.getDate()),e.registro_info.fecha_inicio=y,e.frecuencia=[1,"days"],e.$watch("registro_info.frecuencia_tipo",function(t){switch(t){case p.TIPO_FRECUENCIA.DIARIO:e.frecuencia=[1,"days"];break;case p.TIPO_FRECUENCIA.INTERDIARIO:e.frecuencia=[2,"days"];break;case p.TIPO_FRECUENCIA.SEMANAL:e.frecuencia=[1,"weeks"];break;case p.TIPO_FRECUENCIA.QUINCENAL:e.frecuencia=[15,"days"];break;case p.TIPO_FRECUENCIA.MENSUAL:e.frecuencia=[1,"months"]}}),e.diasActivosEnCalendario=function(e){return!0},e.primer_dia=!1,e.$watch("registro_info.frecuencia_tipo + registro_info.numero_cuotas + totales.deuda +  registro_info.fecha_inicio",function(t){let a=+e.registro_info.numero_cuotas||0,o=parseFloat(e.registro_info.interes_rate)||0,n=[],i=moment(e.registro_info.fecha_inicio),r=N(i),s=i,l=0;for(;;){let t=e.totales.cuota,c=t/(1+o/100);if(r.omitir){let a=!0;for(;a;)n.push({activo:!1,glosa:r.glosa,fecha_pago:moment(s)}),a=(r=N(s=moment(s).add(1,"days"))).omitir;e.registro_info.frecuencia_tipo!=p.TIPO_FRECUENCIA.DIARIO&&e.registro_info.frecuencia_tipo!=p.TIPO_FRECUENCIA.INTERDIARIO&&n.push({activo:!0,numero:++l,fecha_pago:moment(s),interes:t-c,capital:c+.5,cuota:t}),s=i=moment(i).add(e.frecuencia[0],e.frecuencia[1]),r=N(i)}else n.push({activo:!0,numero:++l,fecha_pago:moment(i),interes:t-c,capital:c,cuota:t}),s=i=moment(i).add(e.frecuencia[0],e.frecuencia[1]),r=N(i);if(l>=a)break}e.cuotas=n,function(){e.primer_dia=!1;for(let t=0,a=e.cuotas.length;t<a;t++)if("capital"in e.cuotas[t]){e.primer_dia=e.cuotas[t];break}}()}),e.cargando_por_aprobar=!1,e.por_aprobar_cargados=!1,e.$watch("BuscarTemp.CLI_IdCliente",function(a){e.creditos_aprobar=[],e.creditos_aprobar_selected=null,a&&a.CLI_LineaCredito&&(v?(e.cargando_por_aprobar=!0,n.post(t.url("prestacash","por_aprobar"),{id_cliente:a.CLI_IdCliente}).success(function(t){e.creditos_aprobar=t,e.registro_info.creditos_aprobar_id=v.PP_NumeroMovimiento,e.por_aprobar_cargados=!0}).finally(()=>{e.cargando_por_aprobar=!1})):(e.registro_info.capital=angular.copy(parseFloat(a.CLI_LineaCredito)),e.registro_info.interes_rate=angular.copy(parseFloat(a.CLI_TasaPreferencial)),ENV_TESTING&&(e.registro_info.capital=200,e.registro_info.numero_cuotas=24)))}),e.$watchCollection("BuscarTemp",function(t){t&&angular.forEach(t,function(t,a){t&&(e.registro_info[a]=t[a]),"CLI_IdCliente"===a&&(E.items={},E.items[e.registro_info.CLI_IdCliente]={loading:!1})})}),e.BuscarFn={},e.BuscarFn.rutas=t.autocompleteList("zona"),e.BuscarFn.clientes=t.autocompleteList("cliente"),e.editarGastos=((t,a)=>{u.show({controller:["$scope","WAI","flujo",function(e,t,o){e.WAI=t,e.flujo=o,e.tipo=a,e.guardar=(()=>u.cancel())}],templateUrl:"./assets/views/gestion/popup_gastos.html",multiple:!0,targetEvent:t,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!1,resolve:{flujo:[function(){return e.flujo}]}})}),e.cambiarTipoCredito=(t=>{e.BuscarTemp.CLI_IdCliente&&(e.registro_info.id_tipo_credito=t)}),e.obtenerResultado=(t=>{let a,o,n;switch(t){case"DESTINO_PRESTAMO":return e.registro_info.capital*e.registro_info.destino_prestamo_porcentaje;case"CAPITAL_TRABAJO":return(e.flujo.balance.activo.caja||0)+(e.flujo.balance.activo.bancos||0)+(e.flujo.balance.activo.cuentas_cobrar||0)+(e.flujo.balance.activo.inventarios_materiales||0)+(e.flujo.balance.activo.inventarios_prod_proceso||0)+(e.flujo.balance.activo.inventarios_prod_terminados||0)-(e.flujo.balance.pasivo.deudas_proovedores||0)-(e.flujo.balance.pasivo.deudas_entidades||0)-(e.flujo.balance.pasivo.deudas_otros||0);case"ENDEUDAMIENTO_INDICE":return e.flujo.totales_varios.pasivos+(e.registro_info.capital||0)/e.flujo.totales_varios.patrimonio;case"ENDEUDAMIENTO_PUNTAJE":switch(a=e.obtenerResultado("ENDEUDAMIENTO_INDICE"),e.registro_info.tipo_sector){case p.TIPOS_SECTOR.SERVICIOS:case p.TIPOS_SECTOR.COMERCIO:return a>0?a<=.5?22:a>1?0:11:0;case p.TIPOS_SECTOR.PRODUCCION:return a>0?a<=.5?16:a>1?0:8:0}break;case"INCREMENTO_INDICE":return o=e.obtenerResultado("CAPITAL_TRABAJO"),n=e.obtenerResultado("DESTINO_PRESTAMO"),e.registro_info.tipo_sector==p.TIPOS_SECTOR.SERVICIOS?0!=o?n/o:0:null;case"INCREMENTO_PUNTAJE":let i=e.obtenerResultado("INCREMENTO_INDICE");return i<0?0:e.registro_info.tipo_sector==p.TIPOS_SECTOR.PRODUCCION||e.registro_info.tipo_sector==p.TIPOS_SECTOR.COMERCIO?null:0!=e.primer_dia.cuota?i<=.75?16:i>1?0:8:0;case"LIQUIDEZ_INDICE":return((e.flujo.balance.activo.caja||0)+(e.flujo.balance.activo.bancos||0)+(e.flujo.balance.activo.cuentas_cobrar||0)+(e.flujo.balance.activo.inventarios_materiales||0)+(e.flujo.balance.activo.inventarios_prod_proceso||0)+(e.flujo.balance.activo.inventarios_prod_terminados||0))/(e.flujo.totales_varios.pasivos||1);case"LIQUIDEZ_PUNTAJE":return a=e.obtenerResultado("LIQUIDEZ_INDICE"),e.registro_info.tipo_sector==p.TIPOS_SECTOR.SERVICIOS?"No relevante":e.registro_info.tipo_sector==p.TIPOS_SECTOR.PRODUCCION?a>=1?14:a<.5?9:7:a>1?22:a<.5?0:11;case"RENTABILIDAD_INDICE":return(e.flujo.margen.totales.ingreso_mensual-e.flujo.margen.totales.costo_mensual-e.flujo.gastos.totales.negocio-(e.flujo.gastos.tipos.financieros[1]||0))/e.flujo.margen.totales.ingreso_mensual*100;case"RENTABILIDAD_PUNTAJE":return a=e.obtenerResultado("RENTABILIDAD_INDICE"),e.registro_info.tipo_sector==p.TIPOS_SECTOR.PRODUCCION?a>=4.5?14:a<3?0:7:a>=4.5?16:a<3?0:8;case"ROTACION_INDICE":return o=e.obtenerResultado("CAPITAL_TRABAJO"),null;case"ROTACION_PUNTAJE":return a=e.obtenerResultado("ROTACION_INDICE"),null;case"TOTAL_INDICADORES_FINANCIEROS":return 0+(e.obtenerResultado("ENDEUDAMIENTO_PUNTAJE")||0)+(e.obtenerResultado("INCREMENTO_PUNTAJE")||0)+(e.obtenerResultado("LIQUIDEZ_PUNTAJE")||0)+(e.obtenerResultado("RENTABILIDAD_PUNTAJE")||0)+(e.obtenerResultado("ROTACION_PUNTAJE")||0);case"PUNTAJE_RESULTADO":return e.registro_info.cualitativo_puntaje+(e.registro_info.capital<=1e3?0:e.obtenerResultado("TOTAL_INDICADORES_FINANCIEROS"));case"PUNTAJE_RESULTADO_VERDE":return e.registro_info.capital>1e3?e.obtenerResultado("PUNTAJE_RESULTADO")>60:e.registro_info.cualitativo_puntaje>14;case"CAPACIDAD_PAGO":return(e.primer_dia?e.primer_dia.cuota:0)/(e.flujo.margen.totales.ingreso_mensual-e.flujo.margen.totales.costo_mensual-e.flujo.gastos.totales.negocio-(e.flujo.gastos.tipos.financieros[1]||0)+(e.flujo.gastos.tipos.ingresos[1]||0)-(e.flujo.gastos.tipos.egresos[1]||0)-(e.flujo.gastos.totales.familia||0))*100;case"CAPACIDAD_LIMITE":return e.registro_info.capital<1e5?85:.85*e.obtenerResultado("PUNTAJE_RESULTADO");case"INDICADORES_RESULTADO":return e.obtenerResultado("ENDEUDAMIENTO_PUNTAJE")<=0&&null!==e.obtenerResultado("ENDEUDAMIENTO_PUNTAJE")||e.obtenerResultado("INCREMENTO_PUNTAJE")<=0&&null!==e.obtenerResultado("INCREMENTO_PUNTAJE")||e.obtenerResultado("LIQUIDEZ_PUNTAJE")<=0&&null!==e.obtenerResultado("LIQUIDEZ_PUNTAJE")||e.obtenerResultado("RENTABILIDAD_PUNTAJE")<=0&&null!==e.obtenerResultado("RENTABILIDAD_PUNTAJE")||e.obtenerResultado("ROTACION_PUNTAJE")<=0&&null!==e.obtenerResultado("ROTACION_PUNTAJE")?"NO":"SI";case"INDICADORES_RESULTADO_VERDE":return"SI"===e.obtenerResultado("INDICADORES_RESULTADO");case"GARANTIAS_RESULTADO":o=e.obtenerResultado("CAPITAL_TRABAJO"),n=e.obtenerResultado("DESTINO_PRESTAMO");const r=(1-(e.registro_info.destino_prestamo_porcentaje||0)/100)*e.registro_info.capital,s=e.calcularTotalGarantias(2),l=o+r;return 100*(0!=r?e.registro_info.tipo_solicitud==p.TIPOS_SOLICITUD.PARALELO?s/(l+e.flujo.balance.pasivo.deuda_otros+e.flujo.balance.pasivo.deuda_otros_2):s/r:0);case"GARANTIAS_LIMITE":return e.registro_info.tipo_garantia==p.TIPOS_GARANTIA.REAL?150:e.registro_info.capital/e.registro_info.cambio<=1e3?100:150}return 0}),e.cancel=(()=>u.cancel()),e.guardar=((t,a)=>{console.log("$scope.formulario >>> ",e.formulario),console.log("$scope.flujo",e.flujo),console.log("$scope.garantias",e.garantias),console.log("$scope.propuestas",e.propuestas),console.log("$scope.cualitativo_values",e.cualitativo_values),console.log("$scope.registro_info",e.registro_info),console.log("$scope.cuotas",e.cuotas);let o=e.creditos_aprobar_selected||{};if(e.formulario.$invalid)return h.alert("Por favor, verifique los campos");if(e.registro_info.capital<=0)return h.alert("Por favor, ingresa la cantidad del préstamo");if(e.registro_info.cualitativo_puntaje<g.validacion.minimo)return h.alert(`Puntaje cualitativo mínimo: ${g.validacion.minimo}`);if(e.registro_info.cualitativo_puntaje>g.validacion.maximo)return h.alert(`Puntaje cualitativo máximo: ${g.validacion.maximo}`);let n=i.defer();if(n.promise.then(e.guardarEnviar.bind(null,t)),o.PP_Estado==p.ESTADO_CREDITO.APROBADO){let t=u.prompt().title("Desembolso").htmlContent("Ingrese un comentario para el desembolso (Opcional)").placeholder("Comentario").ariaLabel("Comentario").initialValue("").multiple(!0).hasBackdrop(!0).required(!1).ok("Desembolso").cancel("Cerrar").targetEvent(a);u.show(t).then(t=>{e.registro_info.glosa=String(t||""),n.resolve()})}else if(v)if(o.PP_Estado==p.ESTADO_CREDITO.POR_APROBAR){const o={APROBAR:["Aprobar","Aprobar","Comentario para la aprobación. (Opcional)"],RECHAZAR:["Rechazar","Rechazar","Ingrese un comentario del motivo del rechazo (Requerido*)"],DEVOLVER:["Devolver","Devolver","Comentario. (Opcional)"]};s=u.prompt().title(o[t][1]).htmlContent(o[t][2]).placeholder("Comentario").ariaLabel("Comentario").initialValue("").multiple(!0).hasBackdrop(!0).required("RECHAZAR"===t).ok(o[t][0]).cancel("Cerrar").targetEvent(a);u.show(s).then(function(t){e.registro_info.glosa=String(t||""),n.resolve()})}else n.resolve();else{var s=u.confirm().title("Continuar").htmlContent(`Has solicitado un préstamo de <b>${r("moneda")(e.registro_info.capital)}</b><br> para ${e.BuscarTemp.CLI_IdCliente.CLI_Nombre}, ¿deseas continuar?`).ariaLabel("Solicitar préstamo").ok("Aceptar").cancel("Cancelar").multiple(!0).hasBackdrop(!0).openFrom("#button_submit");u.show(s).then(n.resolve)}}),e.guardarEnviar=function(a){let o=e.creditos_aprobar_selected,i=Object.assign({},e.registro_info),r={accion:a};var s;v&&o.PP_Estado!=p.ESTADO_CREDITO.REGRESADO?o.PP_Estado==p.ESTADO_CREDITO.APROBADO&&(r={cuotas:(s=e.cuotas,s.filter(e=>e.activo))}):r={fecha_inicio:moment(e.registro_info.fecha_inicio).format("YYYY-MM-DD"),cualitativo_values:e.cualitativo_values,propuestas:e.propuestas},Object.assign(i,r),e.loading=!0,n.post(t.url("prestacash","prestamo_nuevo"),i).success(function(t){let a=t.ok?t.mensaje||"Ok":t.mensaje;console.log("data >>>>>",t),c.show(c.simple().textContent(a).hideDelay(2500)),t.ok&&(e.success=!0,u.hide())}).finally(()=>{e.loading=!1})}}]),app.controller("ProyectosControlCtrl",["$scope","$mdToast","WAI","API","MarkerCreatorService","$log","$mdDialog","WAI_CONSTANTS","$resource","Item",function(e,t,a,o,n,i,r,s,l,c){let d={latitude:-5.17161,longitude:-80.6717254},u=c?c.toJSON():{};if(c){let e=c.coordenadas;e.lat&&(u.coordenadas=`${e.lat}, ${e.lng}`,d.latitude=e.lat,d.longitude=e.lng)}e.crud=parent.crud,e.nuevo=!c,e.WAI=a,e.registro_info=Object.assign({},u),e.loading=!1,e.BuscarTemp={},e.BuscarTextos={};const m=e=>`Ubicación (${(({latitude:e,longitude:t})=>`${e.toFixed(8)}, ${t.toFixed(8)}`)(e)})`;e.marker={options:{animation:1,labelContent:m(d),labelAnchor:"28 -5",labelClass:"marker-label",draggable:!0},events:{dragend:function(t,a,o){i.log("marker dragend");var n=t.getPosition().lat(),r=t.getPosition().lng();e.tmp_lat_lng=`${n.toFixed(8)}, ${r.toFixed(8)}`,e.marker.options={draggable:!0,labelContent:m(e.marker.coords),labelAnchor:"100 0"},setTimeout(()=>$("#map_input").select())}},coords:d,id:0},e.address="",e.map={center:d,zoom:17,markers:[],control:{},options:{scrollwheel:!0}},e.map.markers.push(e.marker),e.tmp_lat_lng=`${e.map.center.latitude.toFixed(8)}, ${e.map.center.longitude.toFixed(8)}`,e.$watch("tmp_lat_lng",t=>{if(!t)return;let a=t.split(/[, ]+/);2===a.length&&(e.map.markers[0].coords={latitude:parseFloat(a[0].trim()),longitude:parseFloat(a[1].trim())})}),console.log("$scope.map",e.map),e.$watchCollection("BuscarTemp",function(t){t&&angular.forEach(t,function(t,a){t&&(e.registro_info[a]=t[a])})}),e.BuscarFn={},e.hide=function(){r.hide()},e.cancel=function(){r.cancel()};var p=l(`${s.BASE_API}crud/:moduleName`,{moduleName:"proyectos"});e.enviar=function(){if(!e.formulario.$invalid){var a=new p(e.registro_info);e.loading=!0,a.$save().then(function(e,o){console.log("Item",a),$("#lista").DataTable().ajax.reload(),t.show(t.simple().textContent("Se ha guardado correctamente el registro").hideDelay(2e3)),r.hide()}).catch(function(){t.show(t.simple().textContent("Error al guardar registro, intente nuevamente").hideDelay(3e3))}).finally(function(){e.loading=!1})}}}]),angular.module("app").controller("ProyectosCtrl",["$scope","API","WAIUtils","MarkerCreatorService","$compile",function(e,t,a,o,n){e.info={title:"Proyectos"},e.dtOptions={ajax:a.urlListar("proyectos"),fnRowCallback:function(t){n(t)(e)},columns:a.createColumns("proyectos",{codigo:{class:"cell-export",visible:!1},tipo_credito_nombre:{class:"cell-export"},ubicacion:{class:"cell-export"},url:{class:"cell-export",visible:!1},foto:{class:"cell-export"},total_creditos:{class:"cell-export"},estado_compra:{class:"cell-export"},nombre:{render:function(e,t,o){return a.createEditable({module:"proyectos",id:o[0],name:"nombre",description:"nombre",html:e})},class:"cell-export"},orden:{render:function(e,t,o){return a.createEditable({module:"proyectos",id:o[0],name:"orden",description:"Orden",html:e})},class:"cell-export"}},{id:!1}),fnRowCallback:function(t){n(t)(e)}},e.crud=t.crud("proyectos",e,"ProyectosControlCtrl")}]),angular.module("app").controller("RutasCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Rutas"},e.dtOptions={ajax:a.urlListar("zona"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("zona",{tipo_documento:{class:"cell-export"},numero_documento:{class:"cell-export"},nombre_completo:{class:"cell-export"},nombr_usuario:{class:"cell-export"},nombre:{class:"cell-export"},fecha_registro:{class:"cell-export"}})},e.crud=t.crud("zona",e)}]),angular.module("app").controller("SedesCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Sedes de la institución"},e.dtOptions={ajax:a.urlListar("sedes"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("sedes",{nombre:{render:function(e,t,o){return a.createEditable({module:"sedes",id:o[0],name:"nombre",description:"Nombre de Sede",html:e})}},descripcion:{render:function(e,t,o){return a.createEditable({module:"sedes",id:o[0],name:"descripcion",description:"Descripción",html:e})}}})},e.crud=t.crud("sedes",e)}]),app.controller("SesionCtrl",["$scope","$http","API","$mdToast","$state","WAI","Usuario",function(e,t,a,o,n,i,r){e.user={cargo_index:-1},e.loading=!1,e.cargos=[],e.login=function(i){e.cargos=[],e.loading=!0,t.post(a.url("sesion","login"),e.user).success(function(t){if(e.loading=!1,o.show(o.simple().textContent(t.mensaje).hideDelay(2e3)),t.prompt)return e.cargos=t.row_cargos,void(e.user.cargo_index=0);t.login&&(r.setCargos(t.cargos),r.login(t.usuario),n.go("prestacash.prestamos.consulta"))})}}]),angular.module("app").controller("TiposCreditosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){const n="tipos_creditos";e.info={title:"Tipos de Creditos"},e.dtOptions={ajax:a.urlListar(n),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns(n,{codigo:{class:"cell-export"},url:{render:function(e,t,o){return a.createEditable({module:n,id:o[0],name:"url",description:"URL",html:e})},class:"cell-export"},nombre:{render:function(e,t,o){return a.createEditable({module:n,id:o[0],name:"nombre",description:"Denominación",html:e})},class:"cell-export"},subtitulo:{render:function(e,t,o){return a.createEditable({module:n,id:o[0],name:"subtitulo",description:"Sub-título",html:e})},class:"cell-export"},orden:{render:function(e,t,o){return a.createEditable({module:n,id:o[0],name:"orden",description:"Mostrar en orden",html:e})},class:"cell-export"},descripcion:{class:"cell-export"},total_proyectos:{class:"cell-export"}})},e.crud=t.crud(n,e)}]),angular.module("app").controller("TiposDocumentoCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Tipos de documento"},e.dtOptions={ajax:a.urlListar("tipos_documento"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("tipos_documento",{nombre:{render:function(e,t,o){return a.createEditable({module:"tipos_documento",id:o[0],name:"nombre",description:"Denominación",html:e})},class:"cell-export"},periodo_max:{render:function(e,t,o){return a.createEditable({module:"tipos_documento",id:o[0],name:"periodo_max",description:"Límite días",html:e})},class:"cell-export"}})},e.crud=t.crud("tipos_documento",e)}]),angular.module("app").controller("TiposNegocioCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Tipos de Negocio"},e.dtOptions={ajax:a.urlListar("tipos_negocio"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("tipos_negocio",{nombre:{render:function(e,t,o){return a.createEditable({module:"tipos_negocio",id:o[0],name:"nombre",description:"Denominación",html:e})},class:"cell-export"},orden:{render:function(e,t,o){return a.createEditable({module:"tipos_negocio",id:o[0],name:"orden",description:"Mostrar en orden",html:e})},class:"cell-export"},descripcion:{class:"cell-export"},total_tipos:{class:"cell-export"}})},e.crud=t.crud("tipos_negocio",e)}]),app.controller("TramiteAtenderCtrl",["$scope","$mdToast","WAI","FileUploader","IdTramiteMovimiento","$timeout","API","$http","$mdDialog","IsDerivar","Sedes","Oficinas","$state",function(e,t,a,o,n,i,r,s,l,c,d,u,m){e.sedes=d,e.oficinas=u,e.cargos_usuarios=[],e.WAI=a,e.registro_info={id_tramite_movimiento:n,id_accion:null,flag_adjunto:0,destinatarios:[],derivar:c?1:2},e.loading=!1,e.BuscarTemp={},e.BuscarTextos={},e.is_derivar=e.registro_info.derivar,e.$watch("registro_info.derivar",t=>{t&&(e.is_derivar=1==t,e.registro_info.id_accion=e.is_derivar?5:10)}),e.$watchCollection("BuscarTemp",function(t){t&&angular.forEach(t,function(t,a){t&&(e.registro_info[a]=t[a])})}),e.BuscarFn={},e.destinatarios=[];var p={id_sede:a.config.sede_unica?1:e.sedes.find(e=>1==e.id_sede).id_sede,id_oficina:null,id_cargo_usuario:null};function g(){e.destinatario.id_oficina=null,e.destinatario_selected=null,e.cargos_usuarios=[],i(function(){e.destinatario=Object.assign(angular.copy(p))})}e.destinatario=p,e.destinatario_selected=null,g(),e.agregarDestinatario=(t=>{e.destinatarios.push(angular.copy(e.destinatario_selected)),g()}),e.eliminarDestinatario=((t,a)=>{const o=e.destinatarios.findIndex(e=>e.id_cargo_usuario==a);o>-1&&e.destinatarios.splice(o,1)}),e.destinatarioExistente=(t=>e.destinatarios.some(e=>e.id_cargo_usuario==t)),e.$watch("destinatarios",t=>{t&&(e.registro_info.destinatarios=t.map(e=>+e.id_cargo_usuario))},!0),e.$watch("destinatario.id_sede",function(t){if(e.destinatario.id_oficina=void 0,t){var a=e.oficinas.filter(e=>e.id_sede==t);a.length&&(e.destinatario.id_oficina=a[0].id_oficina)}}),e.$watch("destinatario.id_oficina",function(t){e.cargos_usuarios=[],e.destinatario.id_cargo_usuario=null,t&&s.get(r.url("cargos_usuarios","listar_todos")+"?id_oficina="+e.destinatario.id_oficina,{id_oficina:e.destinatario.id_oficina}).success(function(t){e.cargos_usuarios=t})}),e.hide=function(){l.hide()},e.cancel=function(){l.cancel()},e.guardar=function(){e.formulario.$invalid||(e.loading=!0,console.log("$scope.registro_info",e.registro_info),s.post(r.url("tramite","derivar"),e.registro_info).success(function(a){let o=a.ok?a.mensaje||"Se ha derivado el documento correctamente":a.mensaje;e.loading=!1,t.show(t.simple().textContent(o).hideDelay(2500)),a.ok&&(l.hide(),m.go("gestion.tramite.enviados"))}))},e.archivo_subiendo=!1;var f=e.uploader=new o({url:r.url("tramite","upload")});f.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<=1}}),f.onCompleteItem=function(a,o,n,i){if(o.error)return t.show(t.simple().textContent(o.mensaje).hideDelay(2e3)),void(f.queue.length&&e.eliminarArchivo(f.queue[0]));e.registro_info.nombre_archivo=o.upload_data.file_name},f.onCompleteAll=function(){e.archivo_subiendo=!1},e.eliminarArchivo=function(t){t.remove(),angular.element("#adjuntar_archivo").val(""),delete e.registro_info.nombre_archivo}}]),angular.module("app").controller("TramiteCtrl",["$scope","API","WAIUtils","$state","MisCargos",function(e,t,a,o,n){e.mis_cargos=n}]),angular.module("app").controller("TramiteMovimientosCtrl",["$scope","API","WAIUtils","$filter","$compile","$mdDialog","Sedes","Oficinas","Info","$http","$templateCache",function(e,t,a,o,n,i,r,s,l,c,d){e.sedes=r,e.oficinas=s;c.get("assets/views/gestion/ver.html",{cache:d}),c.get("assets/views/gestion/atender.html",{cache:d});const u=-1!==["enviados"].indexOf(l.name),m=e=>o("linky")(e||""),p=e=>`'${e.replace(/'/,"\\'")}'`;e.dtOptions={ajax:{url:t.url("tramite","listar",l.name),method:"POST"},columns:[{title:"ID Trámite Movimiento",visible:!1,searchable:!1},{title:"Origen",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(o("tipo_origen")(e))}</div>`},{title:"Empresa",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"id_empresa_externo",visible:!1,searchable:!1},{title:"tipo_movimiento",visible:!1,searchable:!1},{title:"Cargo origen",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Oficina origen",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Cargo destino",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Oficina destino",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div>${e}</div> <div class="export-content">${m(e)}</div>`},{title:"Emisor",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Código",visible:!0,width:"120",searchable:!0,class:"cell-export",sortable:!1,render:(e,t,a)=>{const n=a[1],i=o("tipo_origen")(n),r=a[16];return`\n                    <div class="movimiento-codigo-wrap">\n                        <div title="Documento ${i}"><md-icon>${1==n?"360":"scatter_plot"}</md-icon>${e}</div>\n                        <div md-truncate title="{{${p(r)}}}"><md-icon>class</md-icon>{{${p(r)}}}</div>\n                    </div>\n                    <div class="export-content">${m(e)}</div>\n                `}},{title:"Acción",visible:!1,width:80,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Adjunto",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${1==e?"SI":"NO"}</div>`},{title:"Archivo adjunto",visible:!1,searchable:!1,class:"cell-export",render:(e,t,a)=>{if(!e)return"";let o=`${location.origin}/uploads/${m(e)}`;return`<div class="export-content"><a href="${o}" target="_blank">${o}</a></div>`}},{title:"Fecha",visible:!1,searchable:!0,width:"150",class:"cell-export",render:e=>`\n                    <div ng-bind="'${e}' | fecha"></div>\n                    <div class="export-content">${m(e)}</div>\n                `},{title:"Estado destinatario",visible:!1,searchable:!1,class:"cell-export---",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Documento",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"Asunto",visible:!1,searchable:!0,class:"cell-export",render:(e,t,a)=>`<div class="export-content">${m(e)}</div>`},{title:"periodo_max",visible:!1,searchable:!0,class:"cell-export__",render:(e,t,a)=>`\n                    <div class="export-content">${m(e)}</div>\n                `},{title:u?"Destinatario":"Origen",visible:!0,sortable:!1,searchable:!0,width:"30%",class:"cell-export",render:(e,t,a)=>u?`\n                    <div class="autor-origen" md-truncate><span ng-bind="${p(a[7])}"></span> - <span ng-bind="${p(a[8])}"></span></div>\n                    <div class="autor-nombre" ng-bind="${p(e)}"></div>\n                    <div class="export-content">${m(e)}</div>\n                `:`\n                    <div class="autor-origen" md-truncate><span ng-bind="${p(a[5])}"></span> - <span ng-bind="${p(a[6])}"></span></div>\n                    <div class="autor-nombre" ng-bind="${p(a[9])}"></div>\n                    <div class="export-content">${p(a[9])}</div>\n                `},{title:"Mensaje",visible:!0,searchable:!0,className:"movimiento-td cell-export",sortable:!1,render:(e,t,a)=>{const o=a[14],n=a[0],i=a[11],r=a[17],s=a[12],c=a[13];let d="";d+=`\n                <div><md-tooltip>Ver</md-tooltip><md-button ng-click="historial($event, ${n}, 1)" class="md-icon-button md-primary"><md-icon>remove_red_eye</md-icon></md-button></div>\n                <div><md-tooltip>Histórico</md-tooltip><md-button ng-click="historial($event, ${n})" class="md-icon-button md-primary"><md-icon>history</md-icon></md-button></div>\n                `,"pendientes"===l.name&&(d+=`\n                    <div><md-tooltip>Atender</md-tooltip><md-button ng-click="atender($event, ${n}, 1)" class="md-icon-button md-primary"><md-icon>assignment_turned_in</md-icon></md-button></div>\n                    <div><md-tooltip>Archivar</md-tooltip><md-button ng-click="atender($event, ${n}, 0)" class="md-icon-button md-primary"><md-icon>lock</md-icon></md-button></div>\n                    `);let u=`\n                    <div layout="row">\n                    ${d}\n                    </div>\n                `;return`\n                <div class="movimiento-wrap">\n                    <div md-truncate class="text" title="{{${p(e)}}}"><span ng-bind="${p(r)}"></span> - <span ng-bind="${p(e)}"></span></div>\n                    <div>\n                        <span class="label bg-primary">${i}</span> \n                        <md-button ng-click="descargarAdjunto($event, '${c}')" ng-show="${1==s?"true":"false"}" class="adjunto-button md-icon-button" title="${c}"><md-icon>attach_file</md-icon></md-button>\n                    </div>\n                    <div class="movimiento-fecha" title="{{'${o}' | amDateFormat:'LLLL'}}">{{'${o}' | amTimeAgo}}</div>\n                    <div class="movimiento-acciones">\n                        ${u}\n                    </div>\n                </div>\n                <div class="export-content">${m(e).substr(0,50)}</div>\n                `}},{title:"Acciones",width:"1%",orderable:!1,visible:!1,render:function(e,t,a){return""}}],fnRowCallback:function(t,a){$(t).data("cellContent",a).attr("data-fecha",a[14]).attr("data-periodo-max",a[18]),n(t)(e)}},e.atender=function(e,t,a){i.show({controller:"TramiteAtenderCtrl",templateUrl:"./assets/views/gestion/atender.html",preserveScope:!0,multiple:!0,targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,resolve:{IdTramiteMovimiento:()=>t,IsDerivar:()=>a,Sedes:()=>r,Oficinas:()=>s}}).then(function(e){},function(){})},e.historial=function(e,a,o){i.show({controller:"TramiteVerCtrl",templateUrl:"./assets/views/gestion/ver.html",preserveScope:!0,multiple:!0,targetEvent:e,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:!0,resolve:{IdTramiteMovimiento:()=>a,IsVer:()=>!!o,Sedes:()=>r,Oficinas:()=>s,Tramite:["$http","$q",(e,o)=>{let n=o.defer();return e.get(t.url("tramite","ver",a)).success(function(e){n.resolve(e)}),n.promise}]}}).then(function(e){},function(){})},e.descargarAdjunto=((e,t)=>{window.open("./uploads/"+t,"_blank")})}]),app.controller("TramiteVerCtrl",["$scope","$mdToast","WAI","FileUploader","IdTramiteMovimiento","$timeout","API","$http","$mdDialog","Tramite","IsVer",function(e,t,a,o,n,r,s,l,c,d,u){e.tramite=d.tramite,e.movimiento=d.movimiento;let m=[];e.items=d.historial.filter(({fecha:e})=>-1===m.indexOf(e)&&(m.push(e),!0)),e.is_ver=u,e.selectedIndex=u?0:1,e.cargos_usuarios=[],e.WAI=a,e.hide=function(){c.hide()},e.cancel=function(){c.cancel()},e.linkAdjunto=(e=>$("base").prop("href")+"uploads/"+e),e.descargarAdjunto=((t,a)=>{window.open(e.linkAdjunto(a),"_blank")});let p=!1,g=!1,f=!1;e.timelineHeader=(e=>!!e.header||(1!=e.tipo_movimiento||p?2!=e.tipo_movimiento||g?3==e.tipo_movimiento&&!f&&(f=!0,e.header=!0):(g=!0,e.header=!0):(p=!0,e.header=!0))),e.timelineText=(e=>({1:"Inicio",2:"Derivar",3:"Archivado"})[e.tipo_movimiento]),e.exportar=function(e){$("#tabla-historico").DataTable({processing:!1,serverSide:!1,iDisplayLength:500,aLengthMenu:[[500],[500]],initComplete:function(){setTimeout(function(){$("#tabla-historico_wrapper .buttons-"+e).trigger("click")},0)},dom:"Blfrtip",order:[[0,"ASC"]],fnRowCallback:function(){},drawCallback:function(){},buttons:[{extend:"copy",text:'<span title="Copiar página activa"><i class="fa fa-copy"></i> Copiar</span>'},{extend:"pdf",orientation:"landscape",pageSize:"A4"},{extend:"excel",customize:function(e){var t=e.xl.worksheets["sheet1.xml"];t=e.xl.worksheets["sheet1.xml"];function a(e,a){var o=t.createElement("row");for(o.setAttribute("r",e),i=0;i<a.length;i++){var n=a[i].key,r=a[i].value,s=t.createElement("c");s.setAttribute("t","inlineStr"),s.setAttribute("s","2"),s.setAttribute("r",n+e);var l=t.createElement("is"),c=t.createElement("t"),d=t.createTextNode(r);c.appendChild(d),l.appendChild(c),s.appendChild(l),o.appendChild(s)}return o}$("row",t).each(function(){var e=$(this).attr("r"),t=parseInt(e);t+=4,$(this).attr("r",t)}),$("row c ",t).each(function(e){var t=$(this).attr("r"),a=t.substring(0,1),o=parseInt(t.substring(1,t.length));o+=4,$(this).attr("r",a+o)});var o=a(1,[{key:"A",value:""},{key:"B",value:""}]),n=a(2,[{key:"A",value:""},{key:"B",value:"Aquí ícono de Cliente"}]),r=a(3,[{key:"A",value:""},{key:"B",value:""}]),s=a(4,[{key:"A",value:""},{key:"B",value:""}]),l=t.getElementsByTagName("sheetData")[0];l.insertBefore(s,l.childNodes[0]),l.insertBefore(r,l.childNodes[0]),l.insertBefore(n,l.childNodes[0]),l.insertBefore(o,l.childNodes[0])}},{extend:"print",orientation:"landscape",pageSize:"A4"}]})}}]),angular.module("app").controller("UbicacionesCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Ubicaciones"},e.dtOptions={ajax:a.urlListar("ubicaciones"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("ubicaciones",{codigo:{render:function(e,t,o){return a.createEditable({module:"ubicaciones",id:o[0],name:"codigo",description:"Código URL",html:e})},class:"cell-export"},nombre:{render:function(e,t,o){return a.createEditable({module:"ubicaciones",id:o[0],name:"nombre",description:"Denominación",html:e})},class:"cell-export"},descripcion:{render:function(e,t,o){return a.createEditable({module:"ubicaciones",id:o[0],name:"descripcion",description:"Descripción",html:e})},class:"cell-export"}})},e.crud=t.crud("ubicaciones",e)}]),angular.module("app").controller("UsuarioConfiguracionCtrl",["$scope","$http","API","WAI","FileUploader","$mdToast",function(e,t,a,o,n,i){e.usuario_info=o.usuario.info,e.usuario_password={},e.foto_nuevo=!1,e.loading=!1,e.guardar=function(o){e.loading||(e.loading=!0,t.post(a.url("usuario","guardar"),Object.assign({},"perfil"===o?e.usuario_info:e.usuario_password,{tipo:o})).success(function(t){let a=t.ok?t.mensaje||"Guardado correctamente":t.mensaje;e.loading=!1,i.show(i.simple().textContent(a).hideDelay(2500)),t.ok}))},e.archivo_subiendo=!1;var r=e.uploader=new n({url:a.url("usuario","upload")});r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<=1}}),r.onCompleteItem=function(t,a,o,n){if(a.error)return i.show(i.simple().textContent(a.mensaje).hideDelay(2e3)),void(r.queue.length&&e.eliminarArchivo(r.queue[0]));console.log("response.upload_data",a.upload_data),e.usuario_info.foto=a.upload_data.file_name,r.queue=[]},r.onCompleteAll=function(){console.info("onCompleteAll"),e.archivo_subiendo=!1},e.eliminarArchivo=function(t){t.remove(),angular.element("#adjuntar_archivo").val(""),delete e.usuario_info.nombre_archivo},e.$watch(function(){return e.uploader.queue.length},function(t){e.foto_nuevo=t?1:0})}]),angular.module("app").controller("UsuariosCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Usuarios"},e.dtOptions={ajax:a.urlListar("usuarios"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("usuarios",{nombre_usuario:{render:function(e,t,o){return a.createEditable({module:"usuarios",id:o[0],name:"nombre_usuario",description:"Nombre Usuario",html:e})},class:"cell-export"},nombre_completo:{class:"cell-export"}})},e.crud=t.crud("usuarios",e)}]),angular.module("app").controller("UsuariosPersonalCtrl",["$scope","API","WAIUtils","$compile",function(e,t,a,o){e.info={title:"Usuarios - Personal"},e.dtOptions={ajax:a.urlListar("usuarios_personal"),fnRowCallback:function(t){o(t)(e)},columns:a.createColumns("usuarios_personal",{nombre_usuario:{class:"cell-export"},PE_IdPersonal:{class:"cell-export"},PE_Nombre:{class:"cell-export"},cargo:{class:"cell-export"}})},e.crud=t.crud("usuarios_personal",e)}]),app.controller("AccordionDemoCtrl",["$scope",function(e){e.oneAtATime=!0,e.groups=[{title:"Accordion group header - #1",content:"Dynamic group body - #1"},{title:"Accordion group header - #2",content:"Dynamic group body - #2"}],e.items=["Item 1","Item 2","Item 3"],e.addItem=function(){var t=e.items.length+1;e.items.push("Item "+t)},e.status={isFirstOpen:!0,isFirstDisabled:!1}}]),app.controller("AlertDemoCtrl",["$scope",function(e){e.alerts=[{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"info",msg:"Heads up! This alert needs your attention, but it is not super important."},{type:"warning",msg:"Warning! Best check yo self, you are not looking too good..."}],e.addAlert=function(){e.alerts.push({type:"danger",msg:"Oh snap! Change a few things up and try submitting again."})},e.closeAlert=function(t){e.alerts.splice(t,1)}}]),app.controller("ButtonsDemoCtrl",["$scope",function(e){e.singleModel=1,e.radioModel="Middle",e.checkModel={left:!1,middle:!0,right:!1}}]),app.controller("CarouselDemoCtrl",["$scope",function(e){e.myInterval=5e3;var t=e.slides=[];e.addSlide=function(){t.push({image:"images/c"+t.length+".jpg",text:["Carousel text #0","Carousel text #1","Carousel text #2","Carousel text #3"][t.length%4]})};for(var a=0;a<4;a++)e.addSlide()}]),app.controller("DropdownDemoCtrl",["$scope",function(e){e.items=["The first choice!","And another choice for you.","but wait! A third!"],e.status={isopen:!1},e.toggled=function(e){},e.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),e.status.isopen=!e.status.isopen}}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(e,t,a){e.items=a,e.selected={item:e.items[0]},e.ok=function(){t.close(e.selected.item)},e.cancel=function(){t.dismiss("cancel")}}]),app.controller("ModalDemoCtrl",["$scope","$modal","$log",function(e,t,a){e.items=["item1","item2","item3"],e.open=function(o){t.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:o,resolve:{items:function(){return e.items}}}).result.then(function(t){e.selected=t},function(){a.info("Modal dismissed at: "+new Date)})}}]),app.controller("PaginationDemoCtrl",["$scope","$log",function(e,t){e.totalItems=64,e.currentPage=4,e.setPage=function(t){e.currentPage=t},e.pageChanged=function(){t.info("Page changed to: "+e.currentPage)},e.maxSize=5,e.bigTotalItems=175,e.bigCurrentPage=1}]),app.controller("PopoverDemoCtrl",["$scope",function(e){e.dynamicPopover="Hello, World!",e.dynamicPopoverTitle="Title"}]),app.controller("ProgressDemoCtrl",["$scope",function(e){e.max=200,e.random=function(){var t,a=Math.floor(100*Math.random()+1);t=a<25?"success":a<50?"info":a<75?"warning":"danger",e.showWarning="danger"===t||"warning"===t,e.dynamic=a,e.type=t},e.random(),e.randomStacked=function(){e.stacked=[];for(var t=["success","info","warning","danger"],a=0,o=Math.floor(4*Math.random()+1);a<o;a++){var n=Math.floor(4*Math.random());e.stacked.push({value:Math.floor(30*Math.random()+1),type:t[n]})}},e.randomStacked()}]),app.controller("TabsDemoCtrl",["$scope",function(e){e.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1"},{title:"Dynamic Title 2",content:"Dynamic content 2",disabled:!0}]}]),app.controller("RatingDemoCtrl",["$scope",function(e){e.rate=7,e.max=10,e.isReadonly=!1,e.hoveringOver=function(t){e.overStar=t,e.percent=t/e.max*100}}]),app.controller("TooltipDemoCtrl",["$scope",function(e){e.dynamicTooltip="Hello, World!",e.dynamicTooltipText="dynamic",e.htmlTooltip="I've been made <b>bold</b>!"}]),app.controller("TypeaheadDemoCtrl",["$scope","$http",function(e,t){e.selected=void 0,e.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],e.getLocation=function(e){return t.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:e,sensor:!1}}).then(function(e){var t=[];return angular.forEach(e.data.results,function(e){t.push(e.formatted_address)}),t})}}]),app.controller("DatepickerDemoCtrl",["$scope",function(e){e.today=function(){e.dt=new Date},e.today(),e.clear=function(){e.dt=null},e.disabled=function(e,t){return"day"===t&&(0===e.getDay()||6===e.getDay())},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!0},e.dateOptions={formatYear:"yy",startingDay:1,class:"datepicker"},e.initDate=new Date("2016-15-20"),e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0]}]),app.controller("TimepickerDemoCtrl",["$scope",function(e){e.mytime=new Date,e.hstep=1,e.mstep=15,e.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},e.ismeridian=!0,e.toggleMode=function(){e.ismeridian=!e.ismeridian},e.update=function(){var t=new Date;t.setHours(14),t.setMinutes(0),e.mytime=t},e.changed=function(){},e.clear=function(){e.mytime=null}}]),app.directive("setNgAnimate",["$animate",function(e){return{link:function(t,a,o){t.$watch(function(){return t.$eval(o.setNgAnimate,t)},function(t,o){e.enabled(!!t,a)})}}}]),app.controller("ChartCtrl",["$scope",function(e){e.plot_pie=[];for(var t=Math.floor(4*Math.random())+3,a=0;a<t;a++)e.plot_pie[a]={label:"Series"+(a+1),data:Math.floor(100*Math.random())+1};e.plot_line=[[1,7.5],[2,7.5],[3,5.7],[4,8.9],[5,10],[6,7],[7,9],[8,6],[9,8],[10,9]],e.plot_line_1=[[1,9.5],[2,9.4],[3,9.5],[4,9.5],[5,9.7],[6,9.5],[7,9],[8,9.9],[9,9.6],[10,9.3]],e.plot_line_2=[[1,4.5],[2,4.2],[3,4.5],[4,4.3],[5,4.5],[6,4.7],[7,4.6],[8,4.8],[9,4.6],[10,4.5]],e.plot_line_3=[[1,14],[2,5.7],[3,9.6],[4,7.8],[5,6.6],[6,10.5]]}]),app.controller("EditorCtrl",function(e){e.htmlVariable='<h3>Try me!</h3><p>textAngular is a super cool WYSIWYG Text Editor directive for AngularJS</p><p><b>Features:</b></p><ol><li>Automatic Seamless Two-Way-Binding</li><li style="color: blue;">Super Easy <b>Theming</b> Options</li><li>Simple Editor Instance Creation</li><li>Safely Parses Html for Custom Toolbar Icons</li><li>Doesn&apos;t Use an iFrame</li><li>Works with Firefox, Chrome, and IE8+</li></ol><p><b>Code at GitHub:</b> <a href="https://github.com/fraywing/textAngular">Here</a> </p>'}),app.controller("GoogleMapCtrl",["$scope",function(e){e.myMarkers=[],e.mapOptions={center:new google.maps.LatLng(35.784,-98.67),zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP},e.addMarker=function(t,a){e.myMarkers.push(new google.maps.Marker({map:e.myMap,position:a[0].latLng}))},e.setZoomMessage=function(t){e.zoomMessage="You just zoomed to "+t+"!"},e.openMarkerInfo=function(t){e.currentMarker=t,e.currentMarkerLat=t.getPosition().lat(),e.currentMarkerLng=t.getPosition().lng(),e.myInfoWindow.open(e.myMap,t)},e.setMarkerPosition=function(e,t,a){e.setPosition(new google.maps.LatLng(t,a))}}]),app.controller("ImgCropCtrl",["$scope",function(e){e.myImage="",e.myCroppedImage="",e.cropType="circle";angular.element(document.querySelector("#fileInput")).on("change",function(t){var a=t.currentTarget.files[0],o=new FileReader;o.onload=function(t){e.$apply(function(e){e.myImage=t.target.result})},o.readAsDataURL(a)})}]);
/*!
 * JavaScript - loadGoogleMaps( version, apiKey, language )
 *
 * - Load Google Maps API using jQuery Deferred. 
 *   Useful if you want to only load the Google Maps API on-demand.
 * - Requires jQuery 1.5
 * 
 * Copyright (c) 2011 Glenn Baker
 * Dual licensed under the MIT and GPL licenses.
 */
var loadGoogleMaps=function(e){var t,a=e.now();return function(o,n,i){if(t)return t;var r=e.Deferred(),s=function(){r.resolve(!(!window.google||!google.maps)&&google.maps)},l="loadGoogleMaps_"+a++,c=e.extend({sensor:!1},n?{key:n}:{},i?{language:i}:{});return window.google&&google.maps?s():window.google&&google.load?google.load("maps",o||3,{other_params:e.param(c),callback:s}):(c=e.extend(c,{v:o||3,callback:l}),window[l]=function(){s(),setTimeout(function(){try{delete window[l]}catch(e){}},20)},e.ajax({dataType:"script",data:c,url:"http://maps.google.com/maps/api/js"})),t=r.promise()}}(jQuery);function DialogController(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}app.controller("MDAutocompleteCtrl",function(e,t,a){var o=this;o.states="Alabama, Alaska, Arizona, Arkansas, California, Colorado, Connecticut, Delaware,            Florida, Georgia, Hawaii, Idaho, Illinois, Indiana, Iowa, Kansas, Kentucky, Louisiana,            Maine, Maryland, Massachusetts, Michigan, Minnesota, Mississippi, Missouri, Montana,            Nebraska, Nevada, New Hampshire, New Jersey, New Mexico, New York, North Carolina,            North Dakota, Ohio, Oklahoma, Oregon, Pennsylvania, Rhode Island, South Carolina,            South Dakota, Tennessee, Texas, Utah, Vermont, Virginia, Washington, West Virginia,            Wisconsin, Wyoming".split(/, +/g).map(function(e){return{value:e.toLowerCase(),display:e}}),o.selectedItem=null,o.searchText=null,o.querySearch=function(e){var n,i=e?o.states.filter(function(e){var t=angular.lowercase(e);return function(e){return 0===e.value.indexOf(t)}}(e)):[];return o.simulateQuery?(n=a.defer(),t(function(){n.resolve(i)},1e3*Math.random(),!1),n.promise):i},o.simulateQuery=!1,o.isDisabled=!1}),app.controller("MDBottomSheetCtrl",function(e,t,a){e.alert="",e.showListBottomSheet=function(t){e.alert="",a.show({templateUrl:"bottom-sheet-list-template.html",controller:"ListBottomSheetCtrl",targetEvent:t}).then(function(t){e.alert=t.name+" clicked!"})},e.showGridBottomSheet=function(t){e.alert="",a.show({templateUrl:"bottom-sheet-grid-template.html",controller:"GridBottomSheetCtrl",targetEvent:t}).then(function(t){e.alert=t.name+" clicked!"})}}),app.controller("MDListBottomSheetCtrl",function(e,t){e.items=[{name:"Share",icon:"share"},{name:"Upload",icon:"upload"},{name:"Copy",icon:"copy"},{name:"Print this page",icon:"print"}],e.listItemClick=function(a){var o=e.items[a];t.hide(o)}}),app.controller("MDGridBottomSheetCtrl",function(e,t){e.items=[{name:"Hangout",icon:"hangout"},{name:"Mail",icon:"mail"},{name:"Message",icon:"message"},{name:"Copy",icon:"copy"},{name:"Facebook",icon:"facebook"},{name:"Twitter",icon:"twitter"}],e.listItemClick=function(a){var o=e.items[a];t.hide(o)}}),app.controller("MDCheckboxCtrl",function(e){e.data={},e.data.cb1=!0,e.data.cb2=!1,e.data.cb3=!1,e.data.cb4=!1,e.data.cb5=!1}),app.controller("MDRadioCtrl",function(e){e.data={group1:"Banana",group2:"2",group3:"avatar-1"},e.avatarData=[{id:"svg-1",title:"avatar 1",value:"avatar-1"},{id:"svg-2",title:"avatar 2",value:"avatar-2"},{id:"svg-3",title:"avatar 3",value:"avatar-3"}],e.radioData=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:"3",isDisabled:!0},{label:"4",value:"4"}],e.submit=function(){alert("submit")},e.addItem=function(){var t=Math.ceil(1e3*Math.random());e.radioData.push({label:t,value:t})},e.removeItem=function(){e.radioData.pop()}}),app.controller("MDSwitchCtrl",function(e){e.data={cb1:!0,cb4:!0},e.onChange=function(t){e.message="The switch is now: "+t}}),app.controller("MDDialogCtrl",function(e,t){e.alert="",e.showAlert=function(e){t.show(t.alert().title("This is an alert title").content("You can specify some description text in here.").ariaLabel("Password notification").ok("Got it!").targetEvent(e))},e.showConfirm=function(a){var o=t.confirm().title("Would you like to delete your debt?").content("All of the banks have agreed to forgive you your debts.").ariaLabel("Lucky day").ok("Please do it!").cancel("Sounds like a scam").targetEvent(a);t.show(o).then(function(){e.alert="You decided to get rid of your debt."},function(){e.alert="You decided to keep your debt."})},e.showAdvanced=function(a){t.show({controller:DialogController,templateUrl:"views/ui/material/dialog.tmpl.html",targetEvent:a}).then(function(t){e.alert='You said the information was "'+t+'".'},function(){e.alert="You cancelled the dialog."})}}),app.controller("MDSliderCtrl",function(e){e.color={red:Math.floor(255*Math.random()),green:Math.floor(255*Math.random()),blue:Math.floor(255*Math.random())},e.rating1=3,e.rating2=2,e.rating3=4,e.disabled1=0,e.disabled2=70}),app.controller("MDSelectCtrl",function(e,t){t.neighborhoods=["Chelsea","Financial District","Midtown","West Village","Williamsburg"],t.toppings=[{category:"meat",name:"Pepperoni"},{category:"meat",name:"Sausage"},{category:"meat",name:"Ground Beef"},{category:"meat",name:"Bacon"},{category:"veg",name:"Mushrooms"},{category:"veg",name:"Onion"},{category:"veg",name:"Green Pepper"},{category:"veg",name:"Green Olives"}],t.loadUsers=function(){return t.users=[],e(function(){t.users=[{id:1,name:"Scooby Doo"},{id:2,name:"Shaggy Rodgers"},{id:3,name:"Fred Jones"},{id:4,name:"Daphne Blake"},{id:5,name:"Velma Dinkley"}]},650)}}),app.controller("MDInputCtrl",function(e){e.user={title:"Developer",email:"ipsum@lorem.com",firstName:"",lastName:"",company:"Google",address:"1600 Amphitheatre Pkwy",city:"Mountain View",state:"CA",biography:"Loves kittens, snowboarding, and can type at 130 WPM.\n\nAnd rumor has it she bouldered up Castle Craig!",postalCode:"94043"},e.project={description:"Nuclear Missile Defense System",clientName:"Bill Clinton",rate:500}}),app.controller("MDProgressCtrl",["$scope","$interval",function(e,t){e.mode="query",e.determinateValue=30,e.determinateValue2=30,t(function(){e.determinateValue+=1,e.determinateValue2+=1.5,e.determinateValue>100&&(e.determinateValue=30,e.determinateValue2=30)},100,0,!0),t(function(){e.mode="query"==e.mode?"determinate":"query"},7200,0,!0)}]),app.controller("MDSidenavCtrl",function(e,t,a,o){e.toggleLeft=function(){a("left").toggle().then(function(){o.debug("toggle left is done")})},e.toggleRight=function(){a("right").toggle().then(function(){o.debug("toggle RIGHT is done")})},e.closeLeft=function(){a("left").close().then(function(){o.debug("close LEFT is done")})},e.closeRight=function(){a("right").close().then(function(){o.debug("close RIGHT is done")})}}),app.controller("MDSubheaderCtrl",function(e){e.messages=[{face:"images/a0.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a1.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a2.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a3.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a4.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a5.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a6.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a7.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a8.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a9.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"images/a0.jpg",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"}]}),app.controller("MDTabCtrl",function(e){e.data={selectedIndex:0,secondLocked:!0,secondLabel:"Item Two"},e.next=function(){e.data.selectedIndex=Math.min(e.data.selectedIndex+1,2)},e.previous=function(){e.data.selectedIndex=Math.max(e.data.selectedIndex-1,0)};var t=[{title:"One",content:"Tabs will become paginated if there isn't enough room for them."},{title:"Two",content:"You can swipe left and right on a mobile device to change tabs."},{title:"Three",content:"You can bind the selected tab via the selected attribute on the md-tabs element."},{title:"Four",content:"If you set the selected tab binding to -1, it will leave no tab selected."},{title:"Five",content:"If you remove a tab, it will try to select a new one."},{title:"Six",content:"There's an ink bar that follows the selected tab, you can turn it off if you want."},{title:"Seven",content:"If you set ng-disabled on a tab, it becomes unselectable. If the currently selected tab becomes disabled, it will try to select the next tab."},{title:"Eight",content:"If you look at the source, you're using tabs to look at a demo for tabs. Recursion!"},{title:"Nine",content:'If you set md-theme="green" on the md-tabs element, you\'ll get green tabs.'},{title:"Ten",content:"If you're still reading this, you should just go check out the API docs for tabs!"}];e.tabs=t,e.selectedIndex=2,e.addTab=function(e,a){a=a||e+" Content View",t.push({title:e,content:a,disabled:!1})},e.removeTab=function(a){for(var o=0;o<t.length;o++)if(a.title==t[o].title){e.tabs.splice(o,1);break}}}),app.controller("MDToastCtrl",function(e,t,a){e.toastPosition={bottom:!1,top:!0,left:!1,right:!0},e.getToastPosition=function(){return Object.keys(e.toastPosition).filter(function(t){return e.toastPosition[t]}).join(" ")},e.showCustomToast=function(){t.show({controller:"ToastCtrl",templateUrl:"views/ui/material/toast.tmpl.html",hideDelay:6e3,parent:"#toast",position:e.getToastPosition()})},e.showSimpleToast=function(){t.show(t.simple().content("Simple Toast!").position(e.getToastPosition()).hideDelay(3e3))},e.showActionToast=function(){var a=t.simple().content("Action Toast!").action("OK").highlightAction(!1).position(e.getToastPosition());t.show(a).then(function(){alert("You clicked 'OK'.")})}}),app.controller("ToastCtrl",function(e,t){e.closeToast=function(){t.hide()}}),app.controller("MDTooltipCtrl",function(e){e.demo={}}),app.controller("NGGridCtrl",["$scope","$http",function(e,t){e.filterOptions={filterText:"",useExternalFilter:!0},e.totalServerItems=0,e.pagingOptions={pageSizes:[250,500,1e3],pageSize:250,currentPage:1},e.setPagingData=function(t,a,o){var n=t.slice((a-1)*o,a*o);e.myData=n,e.totalServerItems=t.length,e.$$phase||e.$apply()},e.getPagedDataAsync=function(a,o,n){setTimeout(function(){var i;if(n){var r=n.toLowerCase();t.get("scripts/controllers/largeLoad.json").success(function(t){i=t.filter(function(e){return-1!=JSON.stringify(e).toLowerCase().indexOf(r)}),e.setPagingData(i,o,a)})}else t.get("scripts/controllers/largeLoad.json").success(function(t){e.setPagingData(t,o,a)})},100)},e.getPagedDataAsync(e.pagingOptions.pageSize,e.pagingOptions.currentPage),e.$watch("pagingOptions",function(t,a){t!==a&&t.currentPage!==a.currentPage&&e.getPagedDataAsync(e.pagingOptions.pageSize,e.pagingOptions.currentPage,e.filterOptions.filterText)},!0),e.$watch("filterOptions",function(t,a){t!==a&&e.getPagedDataAsync(e.pagingOptions.pageSize,e.pagingOptions.currentPage,e.filterOptions.filterText)},!0),e.gridOptions={data:"myData",enablePaging:!0,showFooter:!0,rowHeight:36,headerRowHeight:36,totalServerItems:"totalServerItems",pagingOptions:e.pagingOptions,filterOptions:e.filterOptions}}]),app.filter("propsFilter",function(){return function(e,t){var a=[];return angular.isArray(e)?e.forEach(function(e){for(var o=!1,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],s=t[r].toLowerCase();if(-1!==e[r].toString().toLowerCase().indexOf(s)){o=!0;break}}o&&a.push(e)}):a=e,a}}),app.controller("SelectCtrl",function(e,t,a){e.disabled=void 0,e.searchEnabled=void 0,e.enable=function(){e.disabled=!1},e.disable=function(){e.disabled=!0},e.enableSearch=function(){e.searchEnabled=!0},e.disableSearch=function(){e.searchEnabled=!1},e.clear=function(){e.person.selected=void 0,e.address.selected=void 0,e.country.selected=void 0},e.someGroupFn=function(e){return e.name[0]>="A"&&e.name[0]<="M"?"From A - M":e.name[0]>="N"&&e.name[0]<="Z"?"From N - Z":void 0},e.personAsync={selected:"wladimir@email.com"},e.peopleAsync=[],a(function(){e.peopleAsync=[{name:"Adam",email:"adam@email.com",age:12,country:"United States"},{name:"Amalie",email:"amalie@email.com",age:12,country:"Argentina"},{name:"Estefanía",email:"estefania@email.com",age:21,country:"Argentina"},{name:"Adrian",email:"adrian@email.com",age:21,country:"Ecuador"},{name:"Wladimir",email:"wladimir@email.com",age:30,country:"Ecuador"},{name:"Samantha",email:"samantha@email.com",age:30,country:"United States"},{name:"Nicole",email:"nicole@email.com",age:43,country:"Colombia"},{name:"Natasha",email:"natasha@email.com",age:54,country:"Ecuador"},{name:"Michael",email:"michael@email.com",age:15,country:"Colombia"},{name:"Nicolás",email:"nicole@email.com",age:43,country:"Colombia"}]},3e3),e.counter=0,e.someFunction=function(t,a){e.counter++,e.eventResult={item:t,model:a}},e.removed=function(t,a){e.lastRemoved={item:t,model:a}},e.person={},e.people=[{name:"Adam",email:"adam@email.com",age:12,country:"United States"},{name:"Amalie",email:"amalie@email.com",age:12,country:"Argentina"},{name:"Estefanía",email:"estefania@email.com",age:21,country:"Argentina"},{name:"Adrian",email:"adrian@email.com",age:21,country:"Ecuador"},{name:"Wladimir",email:"wladimir@email.com",age:30,country:"Ecuador"},{name:"Samantha",email:"samantha@email.com",age:30,country:"United States"},{name:"Nicole",email:"nicole@email.com",age:43,country:"Colombia"},{name:"Natasha",email:"natasha@email.com",age:54,country:"Ecuador"},{name:"Michael",email:"michael@email.com",age:15,country:"Colombia"},{name:"Nicolás",email:"nicolas@email.com",age:43,country:"Colombia"}],e.availableColors=["Red","Green","Blue","Yellow","Magenta","Maroon","Umbra","Turquoise"],e.multipleDemo={},e.multipleDemo.colors=["Blue","Red"],e.multipleDemo.selectedPeople=[e.people[5],e.people[4]],e.multipleDemo.selectedPeopleWithGroupBy=[e.people[8],e.people[6]],e.multipleDemo.selectedPeopleSimple=["samantha@email.com","wladimir@email.com"],e.address={},e.refreshAddresses=function(a){var o={address:a,sensor:!1};return t.get("http://maps.googleapis.com/maps/api/geocode/json",{params:o}).then(function(t){e.addresses=t.data.results})},e.country={},e.countries=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]}),app.controller("SliderCtrl",function(e){e.cost=40,e.range={min:30,max:60},e.currencyFormatting=function(e){return"$"+e.toString()}}),app.controller("TableCtrl",["$scope","$timeout",function(e,t){e.rowCollectionBasic=[{firstName:"Laurent",lastName:"Renard",birthDate:new Date("1987-05-21"),balance:102,email:"whatever@gmail.com"},{firstName:"Blandine",lastName:"Faivre",birthDate:new Date("1987-04-25"),balance:-2323.22,email:"oufblandou@gmail.com"},{firstName:"Francoise",lastName:"Frere",birthDate:new Date("1955-08-27"),balance:42343,email:"raymondef@gmail.com"}],e.removeRow=function(t){var a=e.rowCollectionBasic.indexOf(t);-1!==a&&e.rowCollectionBasic.splice(a,1)},e.predicates=["firstName","lastName","birthDate","balance","email"],e.selectedPredicate=e.predicates[0];var a=["Laurent","Blandine","Olivier","Max"],o=["Renard","Faivre","Frere","Eponge"],n=["1987-05-21","1987-04-25","1955-08-27","1966-06-06"],i=1;function r(e){var t=a[Math.floor(3*Math.random())],i=o[Math.floor(3*Math.random())],r=n[Math.floor(3*Math.random())],s=Math.floor(2e3*Math.random());return{id:e,firstName:t,lastName:i,birthDate:new Date(r),balance:s}}for(e.rowCollection=[];i<5;i++)e.rowCollection.push(r(i));e.displayedCollection=[].concat(e.rowCollection),e.addRandomItem=function(){e.rowCollection.push(r(i)),i++},e.removeItem=function(t){var a=e.rowCollection.indexOf(t);-1!==a&&e.rowCollection.splice(a,1)},e.itemsByPage=10,e.rowCollectionPage=[];for(var s=0;s<200;s++)e.rowCollectionPage.push(r(s));e.isLoading=!1,e.rowCollectionPip=[],e.getPage=function(){e.rowCollectionPip=[];for(var t=0;t<20;t++)e.rowCollectionPip.push(r(t))},e.callServer=function(a){e.isLoading=!0,t(function(){e.getPage(),e.isLoading=!1},2e3)},e.getPage()}]),app.controller("TreeCtrl",["$scope","$timeout",function(e,t){var a,o,n,i;return e.my_tree_handler=function(t){var a;if(e.output="You selected: "+t.label,null!=(a=t.data)?a.description:void 0)return e.output+="("+t.data.description+")"},n=[{label:"Animal",children:[{label:"Dog",data:{description:"man's best friend"}},{label:"Cat",data:{description:"Felis catus"}},{label:"Hippopotamus",data:{description:"hungry, hungry"}},{label:"Chicken",children:["White Leghorn","Rhode Island Red","Jersey Giant"]}]},{label:"Vegetable",data:{definition:"A plant or part of a plant used as food, typically as accompaniment to meat or fish, such as a cabbage, potato, carrot, or bean.",data_can_contain_anything:!0},onSelect:function(t){return e.output="Vegetable: "+t.data.definition},children:[{label:"Oranges"},{label:"Apples",children:[{label:"Granny Smith",onSelect:a=function(t){return e.output="APPLE! : "+t.label}},{label:"Red Delicous",onSelect:a},{label:"Fuji",onSelect:a}]}]},{label:"Mineral",children:[{label:"Rock",children:["Igneous","Sedimentary","Metamorphic"]},{label:"Metal",children:["Aluminum","Steel","Copper"]},{label:"Plastic",children:[{label:"Thermoplastic",children:["polyethylene","polypropylene","polystyrene"," polyvinyl chloride"]},{label:"Thermosetting Polymer",children:["polyester","polyurethane","vulcanized rubber","bakelite","urea-formaldehyde"]}]}]}],i=[{label:"North America",children:[{label:"Canada",children:["Toronto","Vancouver"]},{label:"USA",children:["New York","Los Angeles"]},{label:"Mexico",children:["Mexico City","Guadalajara"]}]},{label:"South America",children:[{label:"Venezuela",children:["Caracas","Maracaibo"]},{label:"Brazil",children:["Sao Paulo","Rio de Janeiro"]},{label:"Argentina",children:["Buenos Aires","Cordoba"]}]}],e.my_data=n,e.try_changing_the_tree_data=function(){return e.my_data===n?e.my_data=i:e.my_data=n},e.my_tree=o={},e.try_async_load=function(){return e.my_data=[],e.doing_async=!0,t(function(){return Math.random()<.5?e.my_data=n:e.my_data=i,e.doing_async=!1,o.expand_all()},1e3)},e.try_adding_a_branch=function(){var e;return e=o.get_selected_branch(),o.add_branch(e,{label:"New Branch",data:{something:42,else:43}})}}]),app.controller("UiGridCtrl",["$scope","uiGridConstants",function(e,t){e.gridOptionsSimple={rowHeight:36,data:[{name:"Ethel Price",gender:"female",company:"Enersol"},{name:"Claudine Neal",gender:"female",company:"Sealoud"},{name:"Beryl Rice",gender:"female",company:"Velity"},{name:"Wilder Gonzales",gender:"male",company:"Geekko"},{name:"Georgina Schultz",gender:"female",company:"Suretech"},{name:"Carroll Buchanan",gender:"male",company:"Ecosys"},{name:"Valarie Atkinson",gender:"female",company:"Hopeli"},{name:"Schroeder Mathews",gender:"male",company:"Polarium"},{name:"Lynda Mendoza",gender:"female",company:"Dogspa"},{name:"Sarah Massey",gender:"female",company:"Bisba"},{name:"Robles Boyle",gender:"male",company:"Comtract"},{name:"Evans Hickman",gender:"male",company:"Parleynet"},{name:"Dawson Barber",gender:"male",company:"Dymi"},{name:"Bruce Strong",gender:"male",company:"Xyqag"},{name:"Nellie Whitfield",gender:"female",company:"Exospace"},{name:"Jackson Macias",gender:"male",company:"Aquamate"},{name:"Pena Pena",gender:"male",company:"Quarx"},{name:"Lelia Gates",gender:"female",company:"Proxsoft"},{name:"Letitia Vasquez",gender:"female",company:"Slumberia"},{name:"Trevino Moreno",gender:"male",company:"Conjurica"}]},e.gridOptionsComplex={enableFiltering:!0,showFooter:!0,rowHeight:36,columnDefs:[{name:"name",aggregationType:t.aggregationTypes.count,width:150},{name:"gender",filter:{term:"male"},width:150,enableCellEdit:!1,cellClass:function(e,t,a,o,n){return"male"===e.getCellValue(t,a)?"blue":"female"===e.getCellValue(t,a)?"pink":void 0}},{name:"age",aggregationType:t.aggregationTypes.avg,width:100},{name:"company",enableFiltering:!1,width:200}],data:[{name:"Ethel Price",gender:"female",company:"Enersol",age:25},{name:"Claudine Neal",gender:"female",company:"Sealoud",age:19},{name:"Beryl Rice",gender:"female",company:"Velity",age:44},{name:"Wilder Gonzales",gender:"male",company:"Geekko",age:26},{name:"Georgina Schultz",gender:"female",company:"Suretech",age:53},{name:"Carroll Buchanan",gender:"male",company:"Ecosys",age:64},{name:"Valarie Atkinson",gender:"female",company:"Hopeli",age:35},{name:"Schroeder Mathews",gender:"male",company:"Polarium",age:29},{name:"Lynda Mendoza",gender:"female",company:"Dogspa",age:49},{name:"Sarah Massey",gender:"female",company:"Bisba",age:40},{name:"Robles Boyle",gender:"male",company:"Comtract",age:32},{name:"Evans Hickman",gender:"male",company:"Parleynet",age:38},{name:"Dawson Barber",gender:"male",company:"Dymi",age:21},{name:"Bruce Strong",gender:"male",company:"Xyqag",age:61},{name:"Nellie Whitfield",gender:"female",company:"Exospace",age:54},{name:"Jackson Macias",gender:"male",company:"Aquamate",age:49},{name:"Pena Pena",gender:"male",company:"Quarx",age:25},{name:"Lelia Gates",gender:"female",company:"Proxsoft",age:54},{name:"Alfred Oscar",gender:"male",company:"Transprop",age:34},{name:"John Alfred",gender:"male",company:"Haymans",age:70},{name:"Leonie Warren",gender:"female",company:"Hilltop",age:25},{name:"Belinda Gosford",gender:"female",company:"Archison",age:42},{name:"Tracey Misoni",gender:"female",company:"Verizona",age:34},{name:"Trevino Moreno",gender:"male",company:"Conjurica",age:31}]}}]),app.controller("UploadCtrl",["$scope","FileUploader",function(e,t){var a=e.uploader=new t({url:"scripts/controllers/upload.php"});a.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),a.onWhenAddingFileFailed=function(e,t,a){console.info("onWhenAddingFileFailed",e,t,a)},a.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},a.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},a.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},a.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},a.onProgressAll=function(e){console.info("onProgressAll",e)},a.onSuccessItem=function(e,t,a,o){console.info("onSuccessItem",e,t,a,o)},a.onErrorItem=function(e,t,a,o){console.info("onErrorItem",e,t,a,o)},a.onCancelItem=function(e,t,a,o){console.info("onCancelItem",e,t,a,o)},a.onCompleteItem=function(e,t,a,o){console.info("onCompleteItem",e,t,a,o)},a.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",a)}]),app.controller("VectorMapCtrl",["$scope",function(e){e.world_markers=[{latLng:[41.9,12.45],name:"Vatican City"},{latLng:[43.93,12.46],name:"San Marino"},{latLng:[47.14,9.52],name:"Liechtenstein"},{latLng:[7.11,171.06],name:"Marshall Islands"},{latLng:[17.3,-62.73],name:"Saint Kitts and Nevis"},{latLng:[3.2,73.22],name:"Maldives"},{latLng:[35.88,14.5],name:"Malta"},{latLng:[12.05,-61.75],name:"Grenada"},{latLng:[13.16,-61.23],name:"Saint Vincent and the Grenadines"},{latLng:[13.16,-59.55],name:"Barbados"},{latLng:[17.11,-61.85],name:"Antigua and Barbuda"},{latLng:[-4.61,55.45],name:"Seychelles"},{latLng:[7.35,134.46],name:"Palau"},{latLng:[42.5,1.51],name:"Andorra"}],e.usa_markers=[{latLng:[40.71,-74],name:"New York"},{latLng:[34.05,-118.24],name:"Los Angeles"},{latLng:[41.87,-87.62],name:"Chicago"},{latLng:[29.76,-95.36],name:"Houston"},{latLng:[39.95,-75.16],name:"Philadelphia"},{latLng:[38.9,-77.03],name:"Washington"},{latLng:[37.36,-122.03],name:"Silicon Valley"}],e.cityAreaData=[605.16,310.69,405.17,248.31,207.35,217.22,137.7,280.71,210.32,325.42]}]),app.controller("XeditableCtrl",["$scope","$filter","$http","editableOptions","editableThemes",function(e,t,a,o,n){n.bs3.inputClass="input-sm",n.bs3.buttonsClass="btn-sm",o.theme="bs3",e.html5={email:"email@example.com",tel:"123-45-67",number:29,range:10,url:"http://example.com",search:"blabla",color:"#6a4415",date:null,time:"12:30",datetime:null,month:null,week:null},e.user={name:"awesome",desc:"Awesome user \ndescription!",status:2,agenda:1,remember:!1},e.statuses=[{value:1,text:"status1"},{value:2,text:"status2"},{value:3,text:"status3"}],e.agenda=[{value:1,text:"male"},{value:2,text:"female"}],e.showStatus=function(){var a=t("filter")(e.statuses,{value:e.user.status});return e.user.status&&a.length?a[0].text:"Not set"},e.showAgenda=function(){var a=t("filter")(e.agenda,{value:e.user.agenda});return e.user.agenda&&a.length?a[0].text:"Not set"},e.users=[{id:1,name:"awesome user1",status:2,group:4,groupName:"admin"},{id:2,name:"awesome user2",status:void 0,group:3,groupName:"vip"},{id:3,name:"awesome user3",status:2,group:null}],e.groups=[],e.loadGroups=function(){return e.groups.length?null:a.get("api/groups").success(function(t){e.groups=t})},e.showGroup=function(a){if(a.group&&e.groups.length){var o=t("filter")(e.groups,{id:a.group});return o.length?o[0].text:"Not set"}return a.groupName||"Not set"},e.showStatus=function(a){var o=[];return a&&a.status&&(o=t("filter")(e.statuses,{value:a.status})),o.length?o[0].text:"Not set"},e.checkName=function(e,t){if(2===t&&"awesome"!==e)return"Username 2 should be `awesome`"},e.saveUser=function(e,t){angular.extend(e,{id:t})},e.removeUser=function(t){e.users.splice(t,1)},e.addUser=function(){e.inserted={id:e.users.length+1,name:"",status:null,group:null},e.users.push(e.inserted)}}]),app.directive("editable",["API",function(e){return{restrict:"AE",link:function(t,a){var o=$(a),n=o.data();o.editable({url:e.url("crud","updateCell",n.module),ajaxOptions:{dataType:"json"},container:"body",success:function(e,t){return e&&!1!==e.success?void 0:(e||{msg:"Error desconocido!"}).msg}})}}}]),app.directive("inputCell",[function(){return{restrict:"A",link:function(e,t){var a=$(t),o=a.find("input"),n=a.closest("tr");a.addClass("input-cell"),o.bind("click",()=>o.select()),o.bind("focus",()=>a.addClass("focus")&&n.addClass("focus")),o.bind("blur",()=>a.removeClass("focus")&&n.removeClass("focus"))}}}]),app.filter("parametros",[function(e){return function(e,t,a){return""}}]),app.directive("periodoMax",[function(){return{restrict:"A",scope:{fecha:"@",periodoMax:"@"},link:function(e,t){var a=$(t),o=moment(e.fecha),n=+e.periodoMax,i=o.diff(moment(),"days");i<0&&Math.abs(i)>n?a.addClass("periodo-max"):a.removeClass("periodo-max")}}}]),app.directive("valueOnChange",function(e){return function(t,a,o){t.$watch(o.valueOnChange,function(t,o){t!=o&&(a.addClass("changed"),e(function(){a.removeClass("changed")},500))})}}),app.directive("waiFileModule",["API","$compile","Upload","$mdToast","$timeout",function(e,t,a,o,n){return{restrict:"A",scope:{waiFileAccept:"=",waiFilePattern:"=",waiFileModule:"@",waiFileModel:"=?",waiFileResize:"=?"},link:function(i,r){let s=$(r),l=(s.data(),s.closest("md-input-container"));l.addClass("wai-file-wrap");let c=$("<div />").addClass("wai-file");c.append('\n            <md-button title="Abrir en nueva ventana" ng-show="!!waiFileModel" class="md-icon-button wai-file-action" ng-click="abrir()"><md-icon>open_in_new</md-icon></md-button>\n            <md-button title="Restaurar al valor anterior" ng-if="uploaded" class="md-icon-button wai-file-action" ng-click="restaurar()"><md-icon>settings_backup_restore</md-icon></md-button>\n            <md-button ngf-resize="waiFileResize" title="Subir archivo" ng-disabled="(f.progress > 0 && f.progress < 100) || request_loading" class="md-icon-button"  ngf-select="uploadFiles($file, $invalidFiles)"\n            accept="{{waiFileAccept}}" ngf-pattern="{{waiFilePattern}}" ng-class="{\'uploaded\': f.progress == 100} ">\n                <md-icon>{{f.progress == 100 ? \'cloud_done\' : \'cloud_upload\'}}</md-icon> \n            </md-button>\n            <b ng-show="f.progress > 0">{{f.progress}}%</b>\n            '),i.request_loading=!1,i.old_value=angular.copy(void 0!==typeof i.waiFileModel?i.waiFileModel:void 0),i.restaurar=(()=>{i.waiFileModel=angular.copy(i.old_value),i.uploaded=!1,i.f.progress=0}),i.abrir=(()=>window.open(/^https?\:/.test(i.waiFileModel)?i.waiFileModel:`../uploads/${i.waiFileModule}/${i.waiFileModel}`)),i.uploadFiles=function(t,r){i.request_loading=!0,i.f=t,i.errFile=r&&r[0],i.errFile&&o.show(o.simple().textContent(`Error: ${i.errFile.$error}`).hideDelay(2500)),t&&(t.upload=a.upload({url:e.url("upload","index",i.waiFileModule),data:{file:t}}),t.upload.then(function(e){i.request_loading=!1,n(function(){let t=e.data;if(t.error)return o.show(o.simple().textContent(`${t.mensaje}`).hideDelay(2500));void 0!==i.waiFileModel&&(i.waiFileModel=t.upload_data.file_name,i.uploaded=!0)})},function(e){i.request_loading=!1,o.show(o.simple().textContent(`Error: ${e.data}`).hideDelay(3e3))},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},l.append(c),t(c)(i)}}}]),app.factory("API",["WAI_CONSTANTS","$resource","$mdDialog","$q",function(e,t,a,o){var n={url:function(t,a){var o=Array.prototype.slice.call(arguments);return`${e.BASE_API}${t}/${a}${o.length>2?"/"+o.splice(2).join("/"):""}`},autocompleteList:function(a){return(new(t(`${e.BASE_API}crud/:moduleName?term=:term`,{moduleName:a},{query:{method:"get",isArray:!0,cancellable:!0},delete:{method:"DELETE",cancellable:!0}}))).$query},crud:function(i,r,s){var l=t(`${e.BASE_API}crud/:moduleName`,{moduleName:i},{one:{method:"get",isArray:!1,cancellable:!0}});return r.items={},r.editar=function(e,t){r.crud.agregar(e,t)},r.estado=function(e,t,n){if(!r.items[t].loading){r.items[t].loading=!0;var i=new l,s=o.defer();if(0===n){var c=a.confirm().title("¿Estás seguro de eliminar este registro?").targetEvent(e).ok("Si, eliminar").cancel("Salir");a.show(c).then(()=>s.resolve(),()=>s.reject())}else s.resolve();s.promise.then(()=>{i.$delete({id:t,estado:n}).then(e=>{if(!e.ok)return $mdToast.show($mdToast.simple().textContent("Error al realizar esta acción, por favor intente nuevamente.").hideDelay(2e3));$("#lista").DataTable().ajax.reload()}).finally(()=>{r.items[t].loading=!1})}).catch(()=>{r.items[t].loading=!1})}},{agregar:function(e,t,o,c){if(t){if(r.items[t].loading)return;r.items[t].loading=!0}a.show({controller:s||["$scope","$mdToast","WAI","Item",function(e,t,i,s){let c=s?s.toJSON():{};e.crud=r.crud,e.nuevo=!s,e.WAI=i,e.registro_info=Object.assign({},c),e.loading=!1,e.BuscarTemp={},e.BuscarTextos={},e.AutocompleteReplacement={},e.$watchCollection("BuscarTemp",function(t){t&&angular.forEach(t,function(t,a){let o=a in e.AutocompleteReplacement?e.AutocompleteReplacement[a]:a;t&&(e.registro_info[o]=t[a])})}),e.BuscarFn={},e.autocompleteList=n.autocompleteList,e.hide=function(){a.hide()},e.cancel=function(){a.cancel()},e.enviar=function(){if(e.formulario.$invalid)return t.show(t.simple().textContent("Por favor, revisar los campos requeridos").hideDelay(2e3));e.registro_info.draw_new_item=o?1:0;var n=new l(e.registro_info);e.loading=!0,n.$save().then(function(e,n){if($("#lista").DataTable().ajax.reload(),e.error)return t.show(t.simple().textContent(e.mensaje||"Error").hideDelay(2e3));t.show(t.simple().textContent("Se ha guardado correctamente el registro").hideDelay(2e3)),a.hide({item:o?e.item:null})}).catch(function(){t.show(t.simple().textContent("Error al guardar registro, intente nuevamente").hideDelay(3e3))}).finally(function(){e.loading=!1})}}],templateUrl:"./assets/views/pages/"+i+"/control.html",multiple:!0,targetEvent:e,clickOutsideToClose:!1,escapeToClose:!0,fullscreen:!0,resolve:{Item:["$http",function(e){if(t)return(new l).$one({id:t})}]}}).then(function(e){t&&(r.items[t].loading=!1),c&&(c.onSave||angular.noop)(e)},function(){t&&(r.items[t].loading=!1)})}}}};return n}]),angular.module("app").factory("DoksUtils",["API","$compile","$rootScope","$http",function(e,t,a,o){var n={urlListar:function(t){return e.url(t,"listar")},createColumns:function(e,t,a){var o=[];return a=a||{},o.push({title:"ID",visible:!1!==a.id,searchable:!1,class:"cell-export"}),window.DOKS.columns[e].forEach(function(a){if(a.db===window.DOKS.primary_keys[e]||"estado"===a.db)return;let n=Object.assign({title:a.db,visible:!0,searchable:!0},a,t[a.db]);a.param&&a.param in DOKS_config.parametros&&(n.render=((e,t,o)=>{var n=DOKS_config.parametros[a.param].find(({codigo:t})=>t==e);return n?a.param_set?n[a.param_set]:n.descripcion:e})),o.push(n)}),o.push({title:"Estado",visible:!0===a.estado,searchable:!1}),o},createEditable:function(e){return'<span data-editable data-emptytext="Ninguno" data-module="'+e.module+'" class="editable-json-response" data-type="text" data-inputclass="form-control" data-pk="'+e.id+'" data-name="'+e.name+'" data-title="'+e.description+'">'+(e.html||"")+"</span>"}};return n}]),app.factory("MarkerCreatorService",["$log",function(e){var t=0;function a(a,o){return{options:{animation:1,labelAnchor:"28 -5",labelClass:"markerlabel",draggable:!0},events:{dragend:function(t,a,o){e.log("marker dragend");var n=t.getPosition().lat(),i=t.getPosition().lng();e.log(n),e.log(i),t.options={draggable:!0,labelContent:"lat: "+t.coords.latitude+" lon: "+t.coords.longitude,labelAnchor:"100 0",labelClass:"marker-labels"}}},coords:{latitude:a,longitude:o},id:++t}}function o(e,t){"function"==typeof e&&e(t)}return{createByCoords:function(e,t,n){o(n,a(e,t))},createByAddress:function(e,t){(new google.maps.Geocoder).geocode({address:e},function(n,i){if(i===google.maps.GeocoderStatus.OK){var r=n[0],s=a(r.geometry.location.lat(),r.geometry.location.lng());o(t,s)}else alert("Unknown address: "+e)})},createByCurrentLocation:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var n=a(t.coords.latitude,t.coords.longitude);o(e,n)}):alert("Unable to locate current position")}}}]),app.factory("Notificaciones",["$q","$mdToast","$localStorage",function(e,t,a){return{alert:function(e){return t.show(t.simple().textContent(e).hideDelay(2500))}}}]),angular.module("app").factory("WAIUtils",["API","$compile","$rootScope","$http",function(e,t,a,o){var n={urlListar:function(t){return e.url(t,"listar")},cutText:function(e,t){return(e||"").length>t?`${e.substr(0,t)}...`:e},createColumns:function(e,t,a){var o=[];a=a||{},o.push({title:"ID",visible:!1!==a.id,searchable:!1,class:"cell-export"});let n=!1;window.WAI.columns[e].forEach(function(a){a.db!==window.WAI.primary_keys[e]&&"estado"!==a.db?(a.param&&(a.render=((e,t,o)=>{let n=(WAI_config.parametros[a.param]||[]).find(({codigo:t})=>t==e);return n?n.descripcion:e})),a.file&&(a.file.type,a.render=((e,t,o)=>{let n=`<a href="../uploads/${a.file.module}/${e}" target="_blank">@</a>`;if(!a.file.draw)return n.replace("@","Imagen");let i=Object.assign({width:50,height:50},a.file.size||{});return n.replace("@",`<img class="rounded" src="../uploads/${a.file.module}/${e}" alt="" width="${i.width}" height="${i.height}" />`)})),o.push(Object.assign({title:a.db,visible:!0,searchable:!0},a,t[a.db]))):"estado"===a.db&&(n=!0)}),n&&o.push({title:"Estado",visible:!0===a.estado,searchable:!1});const i=o.length-1;return o.push({title:"Acciones",orderable:!1,visible:!1!==a.acciones,render:function(e,t,a){const o=a[i];return`\n                    <div style="width:160px" ng-init="items[${a[0]}] = {}">\n                        <md-button class="md-icon-button md-accent" ng-disabled="items[${a[0]}].loading" ng-click="editar($event, ${a[0]})" title="Editar"><md-icon>edit</md-icon></md-button>\n                        <md-button class="md-icon-button md-accent" ng-disabled="items[${a[0]}].loading" ng-click="estado($event, ${a[0]}, ${1==o?2:1})" title="${1==o?"Ocultar":"Mostrar"}"><md-icon>${1==o?"block":"visibility"}</md-icon></md-button>\n                        <md-button class="md-icon-button" ng-disabled="items[${a[0]}].loading" ng-click="estado($event, ${a[0]}, 0)" title="Eliminar"><md-icon>delete</md-icon></md-button>\n                    </div>\n                `}}),o},createEditable:function(e){return'<span data-editable data-emptytext="Ninguno" data-module="'+e.module+'" class="editable-json-response" data-type="text" data-inputclass="form-control" data-pk="'+e.id+'" data-name="'+e.name+'" data-title="'+e.description+'">'+(e.html||"")+"</span>"}};return n}]),app.factory("httpInterceptor",["$q","$location","$localStorage",function(e,t,a){return{request:function(e){return e.url.includes("assets/views")&&("localhost"===location.hostname?Object.assign(e.headers,{"Cache-Control":"no-cache, must-revalidate"}):e.url=`${e.url}?v=`+WAI_config.assets_version),e}}}]),app.filter("avatarUrl",[function(){return function(e){return e&&e.foto?`./uploads/avatars/${e.foto}`:"./assets/images/no_avatar.png"}}]),app.filter("buscaParametro",[function(){return function(e,t,a){let o,n;if(console.log(e,t,a),(o=DOKS_config.parametros[t])&&(n=o.find(({codigo:t})=>t==e)))return a?n[a]:n}}]),app.filter("estado_prestamo",[function(){return function(e){return{1:"POR APROBAR",2:"APROBADO",3:"RECHAZADO",4:"REGRESADO",10:"ENTREGADO"}[e]||e}}]),app.filter("fecha",["$filter","$sce",function(e,t){return function(t,a){return e("amDateFormat")(t,"L LT")+(!1!==a?"<br />"+e("amTimeAgo")(t):"")}}]),app.filter("moneda",["$filter",function(e){return function(){var t=Array.prototype.slice.call(arguments);return t[1]="S/ ",e("currency").apply(null,t)}}]),app.filter("fixNumber",["$filter",function(e){return function(e){return isNaN(e)||!isFinite(e)?0:e}}]),app.filter("pad",function(){return function(e,t){return(1e4+""+e).slice(-t)}}),app.filter("parametro",[function(){return function(e,t,a){var o=(WAI_config.parametros[t]||[]).find(({codigo:t})=>t==e)||{};return"$obj"===a?o:o[void 0!==a?a:"descripcion"]}}]),app.filter("parametroCollection",[function(){return function(e,t,a,o){var n=(WAI.parametros[t]||[]).find(t=>t[a||"id"]==e)||{};return"$obj"===o?n:n[void 0!==o?o:"descripcion"]}}]),app.filter("si_no",[function(){return function(e){return 1==e?"SI":"NO"}}]),app.filter("tipo_documento",[function(){return function(e){return{1:"DNI",2:"RUC",3:"C.E",4:"PASAPORTE"}[e]}}]),app.filter("tipo_movimiento",[function(){return function(e){return{1:"Enviado",2:"Derivado",3:"Archivado"}[e]}}]),app.filter("tipo_origen",[function(){return function(e){return{1:"Interno",2:"Externo"}[e]}}]),app.service("WAI",["Usuario","$http","API","$state",function(e,t,a,o){var n=this;this.parametros=window.WAI.parametros,this.config=window.WAI_config,this.usuario=e,this.theme={name:"default"},e.login(this.config.usuario),e.setCargos(WAI_config.usuario_cargos),this.logout_loading=!1,this.logout=function(){n.logout_loading||(n.logout_loading=!0,t.post(a.url("sesion","logout")).success(function(t){n.logout_loading=!1,t.logout&&(e.logout(),o.go("sesion.login"))}))}}]),app.service("Usuario",["$http",function(e){let t={};(WAI.parametros.cargos_permisos||[]).forEach(({id_cargo:e,permiso_key:a,estado:o})=>{1==o&&(t[a]=t[a]||[],t[a].push(+e))}),this.is_login=!1,this.info={},this.login=function(e){this.is_login=!!e,this.info=this.is_login?e:{}},this.logout=function(){this.is_login=!1,this.info={}},this.setCargos=function(e){this.cargos=e},this.gestionPermiso=(e=>e.some(e=>-1!==(t[e]||[]).indexOf(+this.info.id_cargo)))}]);